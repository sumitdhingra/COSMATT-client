utils=function(){"use strict";var a="state_start",b="state_resume",c="state_preview",d="state_splash",e=20,f=function(a,b,c){var d=0;if(void 0!==b&&null!==b){var f=b.RESIZE_MODE;if(void 0!==f&&null!==f&&"manual"===f.toLowerCase()){var g,h=parseInt(b.RESIZE_HEIGHT,10);void 0!==c&&(g=parseInt(c.RESIZE_HEIGHT,10)),void 0===g||null===g||""===g||isNaN(g)?void 0===h||null===h||""===h||isNaN(h)||(d=h):d=g}}var i=jQuery(a.iframeId),j=i.parent();j.css("height",j.height()),i.css("height","");var k=i.get(0).contentWindow.document.body,l=i.get(0).contentWindow.document.documentElement;if(0===d&&(d=Math.max(k.scrollHeight,k.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight)),d+=e,i.css("height",d+"px"),j.css("height",""),void 0!==a.doAfterDimensionChange&&jQuery.isFunction(a.doAfterDimensionChange)){var m={};m.CURRENT_HEIGHT=d,m.MIN_HEIGHT=$(a.iframeId).contents().find("body").height();var n=void 0;void 0!==c&&(n=c.id),a.doAfterDimensionChange(m,n)}},g=function(){return{LAUNCH_MODE_STATE_START:a,LAUNCH_MODE_STATE_RESUME:b,LAUNCH_MODE_STATE_PREVIEW:c,LAUNCH_MODE_STATE_SPLASH:d}};return{getActivityLaunchMode:g,autoResizeActivityIframe:f}}();var AdapterGenerator=function(){"use strict";function a(a){var c=this;this.id=a,this.shell=void 0,this.activityEngineConfig,this.renderOverridesHandler,this.eventObj={fired:!1},this.platformStatus={code:b,message:"Success"},this.adapterConfig={loaderId:"#loader",iframeContainerId:"#iframeContainer",iframeId:"#activity_container",autoResize:!0,loadedResources:[],loadedJS:[],loadedCSS:[],doAfterInitializationCompleted:function(){},autoResizeActivityIframe:"",doAfterSavePartialResult:function(){},doAfterSaveResult:function(){},doAfterSkipQuestion:function(){},itemChangedInEditor:function(){},doAfterItemSavedInEditor:function(){}},this.platformAdapter={engineType:h.engineType,engine:h.engine,content:h.content,externalPath:h.externalPath,videoRoot:h.videoRoot,displaySubmit:h.displaySubmit,productAssetsBasePath:h.productAssetsBasePath,mediaManager:h.mediaManager,showAnswers:h.showAnswers,variation:h.variation,activityName:h.activityName,splashScreen:h.splashScreen,RESIZE_MODE:h.RESIZE_MODE,RESIZE_HEIGHT:h.RESIZE_HEIGHT,MIN_HEIGHT_THRESHOLD:h.MIN_HEIGHT_THRESHOLD,renderOverrides:h.renderOverrides,mode:h.mode,currentAttempt:h.currentAttempt,maxAttempts:h.maxAttempts,lastResults:h.lastResults,getParameterMap:function(){return{engineType:this.engineType,engine:this.engine,content:this.content,externalPath:this.externalPath,videoRoot:this.videoRoot,variation:this.variation,displaySubmit:this.displaySubmit,productAssetsBasePath:this.productAssetsBasePath,mediaManager:this.mediaManager,showAnswers:this.showAnswers,activityName:this.activityName,splashScreen:this.splashScreen,renderOverrides:this.renderOverrides,mode:this.mode,currentAttempt:this.currentAttempt,maxAttempts:this.maxAttempts}},getId:function(){return c.id},setShellObject:function(a){c.shell=a},showLoadingSpinner:function(){jQuery(c.adapterConfig.loaderId).removeClass("hidden")},hideLoadingSpinner:function(){jQuery(c.adapterConfig.loaderId).addClass("hidden")},initializationCompleted:function(a,b){c.activityEngineConfig=a,void 0!==b&&(c.renderOverridesHandler=b.renderOverridesHandler),c.adapterConfig.doAfterInitializationCompleted(a,c.id),jQuery(c.adapterConfig.iframeContainerId).removeClass("invisible"),jQuery(c.adapterConfig.loaderId).addClass("hidden"),this.autoResizeActivityIframe(a)},autoResizeActivityIframe:function(){this.adapterConfig.autoResize&&(jQuery.isFunction(this.adapterConfig.autoResizeActivityIframe)?this.adapterConfig.autoResizeActivityIframe(this.adapterConfig.iframeId,this.activityEngineConfig,this):utils.autoResizeActivityIframe(this.adapterConfig,this.activityEngineConfig,this))}.bind(this),getLastResults:function(a){a&&a(g,"NO_ERROR")},submitResults:function(a,b,d){c.adapterConfig.doAfterSaveResult(b,a),d&&d(g,"NO_ERROR")},savePartialResults:function(a,b,d){c.adapterConfig.doAfterSavePartialResult(b,a),d&&d(g,"NO_ERROR")},sendStatement:function(a,b){c.adapterConfig.sendStatement(a,b)},submitSkipQuestion:function(a,b){c.adapterConfig.doAfterSkipQuestion(b,a)},submitEditChanges:function(a,b,d){c.adapterConfig.doAfterItemSavedInEditor(b,a),d&&d()},itemChangedInEditor:function(a,b){c.adapterConfig.itemChangedInEditor(b,a)},closeActivity:function(a){a&&a(g,"NO_ERROR")},zoomImage:function(a){jQuery.fancybox({href:a},{type:"iframe"})},launchHTML:function(a){jQuery.fancybox({href:a},{type:"iframe"})},launchPDF:function(a){jQuery.fancybox({href:a},{type:"iframe",autoSize:!1,autoCenter:!0,iframe:{preload:!1}})},showOverlayDiv:function(){var a=jQuery("<div></div>");a.addClass("overlay"),jQuery(c.adapterConfig.iframeContainerId).append(a)},removeOverlayDiv:function(){var a=jQuery(c.adapterConfig.iframeContainerId+" .overlay");a.remove()},getResource:function(a,b,d){return void 0!==c.adapterConfig.loadedResources[a]?void d(c.adapterConfig.loadedResources[a],"NO_ERROR"):void jQuery.ajax({url:a,dataType:b}).done(function(b){c.adapterConfig.loadedResources[a]=b,d(b,"NO_ERROR")}).fail(function(b){console.error("AJAX to get resource failed with path:"+a+",status:"+b.status+", with Status Text:"+b.statusText),d(b,"ERROR")})},loadJS:function(a,b){return c.adapterConfig.loadedJS[a]===!0?void b():void utils.loadJS(a,function(){c.adapterConfig.loadedJS[a]=!0,b()})},loadCSS:function(a,b){return c.adapterConfig.loadedCSS[a]===!0?void b():void utils.loadCSS(a,function(){c.adapterConfig.loadedCSS[a]=!0,b()})},getModel:function(a,b){b&&b(g,"NO_ERROR")},updateModel:function(a,b,c){c&&c(g,"NO_ERROR")}},jQuery(window).bind("resize",function(){if(jQuery(c.adapterConfig.iframeId).length>0){var a=jQuery(window).width(),b=jQuery(window).height();e==a&&f==b||c.platformAdapter.autoResizeActivityIframe(),e=a,f=b}})}var b="PLATFORM_OK",c="PLATFORM_FAIL",d=utils.getActivityLaunchMode(),e=jQuery(window).width(),f=jQuery(window).height(),g={readyState:4,status:200,statusText:"No interaction with LMS",responseText:"<html><head><title>Success</title><body><p>No interaction with LMS.</p></body></html>"},h={engineType:"",engine:"",content:"",externalPath:"",videoRoot:"",displaySubmit:!0,productAssetsBasePath:"",mediaManager:{},showAnswers:!0,variation:"",activityName:"Default Activity Name",currentAttempt:0,maxAttempts:0,splashScreen:"",RESIZE_MODE:"auto",RESIZE_HEIGHT:0,MIN_HEIGHT_THRESHOLD:0,renderOverrides:{},mode:{activityState:d.LAUNCH_MODE_STATE_START},lastResults:""};return a.prototype={getActivityAdapter:function(a){return jQuery.extend(this.adapterConfig,a),this},setRenderOverrides:function(a){this.platformAdapter.renderOverrides=a,$.isFunction(this.renderOverridesHandler)&&this.renderOverridesHandler()},clearCachedResources:function(){this.adapterConfig.loadedJS=[],this.adapterConfig.loadedCSS=[]},getActivityHtmlElements:function(){return{loaderId:this.adapterConfig.loaderId,iframeContainerId:this.adapterConfig.iframeContainerId,iframeId:this.adapterConfig.iframeId}},populateAdapterParameters:function(a){var b="success";return this.platformAdapter.engineType=a.engineType,this.platformAdapter.engine=a.engine,this.platformAdapter.activityName=a.activityname,this.platformAdapter.productAssetsBasePath=a.productAssetsBasePath,this.platformAdapter.mediaManager=a.mediaManager,this.platformAdapter.content=a.content?a.content:"",this.platformAdapter.externalPath=a.externalPath?a.externalPath:"",this.platformAdapter.videoRoot=a.videoRoot?a.videoRoot:"",this.platformAdapter.displaySubmit=void 0===a.displaySubmit||a.displaySubmit,this.platformAdapter.showAnswers=void 0===a.showAnswers||a.showAnswers,this.platformAdapter.RESIZE_MODE=a.RESIZE_MODE,this.platformAdapter.RESIZE_HEIGHT=a.RESIZE_HEIGHT,this.platformAdapter.MIN_HEIGHT_THRESHOLD=a.MIN_HEIGHT_THRESHOLD,this.platformAdapter.renderOverrides=a.renderOverrides,this.platformAdapter.variation=a.variation,this.platformAdapter.currentAttempt=a.currentAttempt,this.platformAdapter.maxAttempts=a.maxAttempts,void 0!==a.mode&&void 0!==a.mode.activityState&&(this.platformAdapter.mode.activityState=a.mode.activityState),this.platformAdapter.mode.activityState!==d.LAUNCH_MODE_STATE_PREVIEW&&(this.platformAdapter.splashScreen=a.splashScreen),b},resetAdapterToDefaultParams:function(){this.platformAdapter.engineType=h.engineType,this.platformAdapter.engine=h.engine,this.platformAdapter.content=h.content,this.platformAdapter.externalPath=h.externalPath,this.platformAdapter.videoRoot=h.videoRoot,this.platformAdapter.variation=h.variation,this.platformAdapter.displaySubmit=h.displaySubmit,this.platformAdapter.productAssetsBasePath=h.productAssetsBasePath,this.platformAdapter.mediaManager=h.mediaManager,this.platformAdapter.showAnswers=h.showAnswers,this.platformAdapter.activityName=h.activityName,this.platformAdapter.splashScreen=h.splashScreen,this.platformAdapter.RESIZE_MODE=h.RESIZE_MODE,this.platformAdapter.RESIZE_HEIGHT=h.RESIZE_HEIGHT,this.platformAdapter.MIN_HEIGHT_THRESHOLD=h.MIN_HEIGHT_THRESHOLD,this.platformAdapter.renderOverrides=h.renderOverrides,this.platformAdapter.mode=h.mode,this.platformAdapter.currentAttempt=h.currentAttempt,this.platformAdapter.maxAttempts=h.maxAttempts,this.platformAdapter.lastResults=h.lastResults,this.activityEngineConfig=null,this.renderOverridesHandler=null},launch:function(a,b){this.resetAdapterToDefaultParams();var d="",e=this.getActivityHtmlElements(),f=e.iframeId,g=e.loaderId,h=e.iframeContainerId,i=a.html;void 0!==f&&""!==f&&0===f.indexOf("#")||(d+="Incorrect value supplied for iframe. Value supplied is "+f+"."),void 0!==g&&""!==g&&0===g.indexOf("#")||(d+=" Incorrect value supplied for loader. Value supplied is "+g+"."),void 0!==h&&""!==h&&0===h.indexOf("#")||(d+=" Incorrect value supplied for iframe container. Value supplied is "+h+"."),void 0!==i&&""!==i||(d+=" Incorrect value supplied for iframe html."),jQuery(h).html("");var j=document.createElement("iframe");j.id=f.split("#")[1],jQuery(j).attr("frameborder","0"),jQuery(j).css("width","100%"),jQuery(h).addClass("invisible"),jQuery(h).append(j);var k=j.document;j.contentDocument?k=j.contentDocument:j.contentWindow&&(k=j.contentWindow.document),k&&(k.open(),k.writeln(i),k.close()),jQuery(g).removeClass("hidden"),jQuery(g).css("position","fixed"),jQuery(g).css("top","55%"),jQuery(g).css("left","48%"),void 0===a.productAssetsBasePath&&(a.productAssetsBasePath="");var l=this.populateAdapterParameters(a);"failure"===l&&(d+=" Incorrect value supplied for mandatory adapter parameters."),""!==d&&(this.platformStatus.code=c,this.platformStatus.message=d),this.eventObj.fired=!0,jQuery(this.eventObj).triggerHandler("readyEvent")},launchNewItem:function(a){var b=this.getActivityHtmlElements(),c=b.loaderId;jQuery(c).removeClass("hidden"),jQuery(c).css("position","fixed"),jQuery(c).css("top","55%"),jQuery(c).css("left","48%"),void 0===a.productAssetsBasePath&&(a.productAssetsBasePath=""),this.populateAdapterParameters(a),this.shell.initializeEngine(this.platformAdapter)}},a}();