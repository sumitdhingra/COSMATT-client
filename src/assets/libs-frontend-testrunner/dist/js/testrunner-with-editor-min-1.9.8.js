!function(a,b){a.forge=b()}(this,function(){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.i=function(a){return a},b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a["default"]}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="",b(b.s=42)}([function(a,b){a.exports={options:{usePureJavaScript:!1}}},function(a,b,c){function d(a){if(8!==a&&16!==a&&24!==a&&32!==a)throw new Error("Only 8, 16, 24, or 32 bits supported: "+a)}function e(a){if(this.data="",this.read=0,"string"==typeof a)this.data=a;else if(h.isArrayBuffer(a)||h.isArrayBufferView(a)){var b=new Uint8Array(a);try{this.data=String.fromCharCode.apply(null,b)}catch(c){for(var d=0;d<b.length;++d)this.putByte(b[d])}}else(a instanceof e||"object"==typeof a&&"string"==typeof a.data&&"number"==typeof a.read)&&(this.data=a.data,this.read=a.read);this._constructedStringLength=0}function f(a,b){b=b||{},this.read=b.readOffset||0,this.growSize=b.growSize||1024;var c=h.isArrayBuffer(a),d=h.isArrayBufferView(a);return c||d?(c?this.data=new DataView(a):this.data=new DataView(a.buffer,a.byteOffset,a.byteLength),void(this.write="writeOffset"in b?b.writeOffset:this.data.byteLength)):(this.data=new DataView(new ArrayBuffer(0)),this.write=0,null!==a&&void 0!==a&&this.putBytes(a),void("writeOffset"in b&&(this.write=b.writeOffset)))}var g=c(0),h=a.exports=g.util=g.util||{};!function(){function a(a){if(a.source===window&&a.data===b){a.stopPropagation();var d=c.slice();c.length=0,d.forEach(function(a){a()})}}if("undefined"!=typeof process&&process.nextTick)return h.nextTick=process.nextTick,void("function"==typeof setImmediate?h.setImmediate=setImmediate:h.setImmediate=h.nextTick);if("function"==typeof setImmediate)return h.setImmediate=function(){return setImmediate.apply(void 0,arguments)},void(h.nextTick=function(a){return setImmediate(a)});if(h.setImmediate=function(a){setTimeout(a,0)},"undefined"!=typeof window&&"function"==typeof window.postMessage){var b="forge.setImmediate",c=[];h.setImmediate=function(a){c.push(a),1===c.length&&window.postMessage(b,"*")},window.addEventListener("message",a,!0)}if("undefined"!=typeof MutationObserver){var d=Date.now(),e=!0,f=document.createElement("div"),c=[];new MutationObserver(function(){var a=c.slice();c.length=0,a.forEach(function(a){a()})}).observe(f,{attributes:!0});var g=h.setImmediate;h.setImmediate=function(a){Date.now()-d>15?(d=Date.now(),g(a)):(c.push(a),1===c.length&&f.setAttribute("a",e=!e))}}h.nextTick=h.setImmediate}(),h.isNodejs="undefined"!=typeof process&&process.versions&&process.versions.node,h.isArray=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},h.isArrayBuffer=function(a){return"undefined"!=typeof ArrayBuffer&&a instanceof ArrayBuffer},h.isArrayBufferView=function(a){return a&&h.isArrayBuffer(a.buffer)&&void 0!==a.byteLength},h.ByteBuffer=e,h.ByteStringBuffer=e;var i=4096;h.ByteStringBuffer.prototype._optimizeConstructedString=function(a){this._constructedStringLength+=a,this._constructedStringLength>i&&(this.data.substr(0,1),this._constructedStringLength=0)},h.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read},h.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0},h.ByteStringBuffer.prototype.putByte=function(a){return this.putBytes(String.fromCharCode(a))},h.ByteStringBuffer.prototype.fillWithByte=function(a,b){a=String.fromCharCode(a);for(var c=this.data;b>0;)1&b&&(c+=a),b>>>=1,b>0&&(a+=a);return this.data=c,this._optimizeConstructedString(b),this},h.ByteStringBuffer.prototype.putBytes=function(a){return this.data+=a,this._optimizeConstructedString(a.length),this},h.ByteStringBuffer.prototype.putString=function(a){return this.putBytes(h.encodeUtf8(a))},h.ByteStringBuffer.prototype.putInt16=function(a){return this.putBytes(String.fromCharCode(a>>8&255)+String.fromCharCode(255&a))},h.ByteStringBuffer.prototype.putInt24=function(a){return this.putBytes(String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a))},h.ByteStringBuffer.prototype.putInt32=function(a){return this.putBytes(String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a))},h.ByteStringBuffer.prototype.putInt16Le=function(a){return this.putBytes(String.fromCharCode(255&a)+String.fromCharCode(a>>8&255))},h.ByteStringBuffer.prototype.putInt24Le=function(a){return this.putBytes(String.fromCharCode(255&a)+String.fromCharCode(a>>8&255)+String.fromCharCode(a>>16&255))},h.ByteStringBuffer.prototype.putInt32Le=function(a){return this.putBytes(String.fromCharCode(255&a)+String.fromCharCode(a>>8&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>24&255))},h.ByteStringBuffer.prototype.putInt=function(a,b){d(b);var c="";do b-=8,c+=String.fromCharCode(a>>b&255);while(b>0);return this.putBytes(c)},h.ByteStringBuffer.prototype.putSignedInt=function(a,b){return 0>a&&(a+=2<<b-1),this.putInt(a,b)},h.ByteStringBuffer.prototype.putBuffer=function(a){return this.putBytes(a.getBytes())},h.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)},h.ByteStringBuffer.prototype.getInt16=function(){var a=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,a},h.ByteStringBuffer.prototype.getInt24=function(){var a=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,a},h.ByteStringBuffer.prototype.getInt32=function(){var a=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,a},h.ByteStringBuffer.prototype.getInt16Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,a},h.ByteStringBuffer.prototype.getInt24Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,a},h.ByteStringBuffer.prototype.getInt32Le=function(){var a=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,a},h.ByteStringBuffer.prototype.getInt=function(a){d(a);var b=0;do b=(b<<8)+this.data.charCodeAt(this.read++),a-=8;while(a>0);return b},h.ByteStringBuffer.prototype.getSignedInt=function(a){var b=this.getInt(a),c=2<<a-2;return b>=c&&(b-=c<<1),b},h.ByteStringBuffer.prototype.getBytes=function(a){var b;return a?(a=Math.min(this.length(),a),b=this.data.slice(this.read,this.read+a),this.read+=a):0===a?b="":(b=0===this.read?this.data:this.data.slice(this.read),this.clear()),b},h.ByteStringBuffer.prototype.bytes=function(a){return"undefined"==typeof a?this.data.slice(this.read):this.data.slice(this.read,this.read+a)},h.ByteStringBuffer.prototype.at=function(a){return this.data.charCodeAt(this.read+a)},h.ByteStringBuffer.prototype.setAt=function(a,b){return this.data=this.data.substr(0,this.read+a)+String.fromCharCode(b)+this.data.substr(this.read+a+1),this},h.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)},h.ByteStringBuffer.prototype.copy=function(){var a=h.createBuffer(this.data);return a.read=this.read,a},h.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this},h.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this},h.ByteStringBuffer.prototype.truncate=function(a){var b=Math.max(0,this.length()-a);return this.data=this.data.substr(this.read,b),this.read=0,this},h.ByteStringBuffer.prototype.toHex=function(){for(var a="",b=this.read;b<this.data.length;++b){var c=this.data.charCodeAt(b);16>c&&(a+="0"),a+=c.toString(16)}return a},h.ByteStringBuffer.prototype.toString=function(){return h.decodeUtf8(this.bytes())},h.DataBuffer=f,h.DataBuffer.prototype.length=function(){return this.write-this.read},h.DataBuffer.prototype.isEmpty=function(){return this.length()<=0},h.DataBuffer.prototype.accommodate=function(a,b){if(this.length()>=a)return this;b=Math.max(b||this.growSize,a);var c=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),d=new Uint8Array(this.length()+b);return d.set(c),this.data=new DataView(d.buffer),this},h.DataBuffer.prototype.putByte=function(a){return this.accommodate(1),this.data.setUint8(this.write++,a),this},h.DataBuffer.prototype.fillWithByte=function(a,b){this.accommodate(b);for(var c=0;b>c;++c)this.data.setUint8(a);return this},h.DataBuffer.prototype.putBytes=function(a,b){if(h.isArrayBufferView(a)){var c=new Uint8Array(a.buffer,a.byteOffset,a.byteLength),d=c.byteLength-c.byteOffset;this.accommodate(d);var e=new Uint8Array(this.data.buffer,this.write);return e.set(c),this.write+=d,this}if(h.isArrayBuffer(a)){var c=new Uint8Array(a);this.accommodate(c.byteLength);var e=new Uint8Array(this.data.buffer);return e.set(c,this.write),this.write+=c.byteLength,this}if(a instanceof h.DataBuffer||"object"==typeof a&&"number"==typeof a.read&&"number"==typeof a.write&&h.isArrayBufferView(a.data)){var c=new Uint8Array(a.data.byteLength,a.read,a.length());this.accommodate(c.byteLength);var e=new Uint8Array(a.data.byteLength,this.write);return e.set(c),this.write+=c.byteLength,this}if(a instanceof h.ByteStringBuffer&&(a=a.data,b="binary"),b=b||"binary","string"==typeof a){var f;if("hex"===b)return this.accommodate(Math.ceil(a.length/2)),f=new Uint8Array(this.data.buffer,this.write),this.write+=h.binary.hex.decode(a,f,this.write),this;if("base64"===b)return this.accommodate(3*Math.ceil(a.length/4)),f=new Uint8Array(this.data.buffer,this.write),this.write+=h.binary.base64.decode(a,f,this.write),this;if("utf8"===b&&(a=h.encodeUtf8(a),b="binary"),"binary"===b||"raw"===b)return this.accommodate(a.length),f=new Uint8Array(this.data.buffer,this.write),this.write+=h.binary.raw.decode(f),this;if("utf16"===b)return this.accommodate(2*a.length),f=new Uint16Array(this.data.buffer,this.write),this.write+=h.text.utf16.encode(f),this;throw new Error("Invalid encoding: "+b)}throw Error("Invalid parameter: "+a)},h.DataBuffer.prototype.putBuffer=function(a){return this.putBytes(a),a.clear(),this},h.DataBuffer.prototype.putString=function(a){return this.putBytes(a,"utf16")},h.DataBuffer.prototype.putInt16=function(a){return this.accommodate(2),this.data.setInt16(this.write,a),this.write+=2,this},h.DataBuffer.prototype.putInt24=function(a){return this.accommodate(3),this.data.setInt16(this.write,a>>8&65535),this.data.setInt8(this.write,a>>16&255),this.write+=3,this},h.DataBuffer.prototype.putInt32=function(a){return this.accommodate(4),this.data.setInt32(this.write,a),this.write+=4,this},h.DataBuffer.prototype.putInt16Le=function(a){return this.accommodate(2),this.data.setInt16(this.write,a,!0),this.write+=2,this},h.DataBuffer.prototype.putInt24Le=function(a){return this.accommodate(3),this.data.setInt8(this.write,a>>16&255),this.data.setInt16(this.write,a>>8&65535,!0),this.write+=3,this},h.DataBuffer.prototype.putInt32Le=function(a){return this.accommodate(4),this.data.setInt32(this.write,a,!0),this.write+=4,this},h.DataBuffer.prototype.putInt=function(a,b){d(b),this.accommodate(b/8);do b-=8,this.data.setInt8(this.write++,a>>b&255);while(b>0);return this},h.DataBuffer.prototype.putSignedInt=function(a,b){return d(b),this.accommodate(b/8),0>a&&(a+=2<<b-1),this.putInt(a,b)},h.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)},h.DataBuffer.prototype.getInt16=function(){var a=this.data.getInt16(this.read);return this.read+=2,a},h.DataBuffer.prototype.getInt24=function(){var a=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,a},h.DataBuffer.prototype.getInt32=function(){var a=this.data.getInt32(this.read);return this.read+=4,a},h.DataBuffer.prototype.getInt16Le=function(){var a=this.data.getInt16(this.read,!0);return this.read+=2,a},h.DataBuffer.prototype.getInt24Le=function(){var a=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,a},h.DataBuffer.prototype.getInt32Le=function(){var a=this.data.getInt32(this.read,!0);return this.read+=4,a},h.DataBuffer.prototype.getInt=function(a){d(a);var b=0;do b=(b<<8)+this.data.getInt8(this.read++),a-=8;while(a>0);return b},h.DataBuffer.prototype.getSignedInt=function(a){var b=this.getInt(a),c=2<<a-2;return b>=c&&(b-=c<<1),b},h.DataBuffer.prototype.getBytes=function(a){var b;return a?(a=Math.min(this.length(),a),b=this.data.slice(this.read,this.read+a),this.read+=a):0===a?b="":(b=0===this.read?this.data:this.data.slice(this.read),this.clear()),b},h.DataBuffer.prototype.bytes=function(a){return"undefined"==typeof a?this.data.slice(this.read):this.data.slice(this.read,this.read+a)},h.DataBuffer.prototype.at=function(a){return this.data.getUint8(this.read+a)},h.DataBuffer.prototype.setAt=function(a,b){return this.data.setUint8(a,b),this},h.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)},h.DataBuffer.prototype.copy=function(){return new h.DataBuffer(this)},h.DataBuffer.prototype.compact=function(){if(this.read>0){var a=new Uint8Array(this.data.buffer,this.read),b=new Uint8Array(a.byteLength);b.set(a),this.data=new DataView(b),this.write-=this.read,this.read=0}return this},h.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this},h.DataBuffer.prototype.truncate=function(a){return this.write=Math.max(0,this.length()-a),this.read=Math.min(this.read,this.write),this},h.DataBuffer.prototype.toHex=function(){for(var a="",b=this.read;b<this.data.byteLength;++b){var c=this.data.getUint8(b);16>c&&(a+="0"),a+=c.toString(16)}return a},h.DataBuffer.prototype.toString=function(a){var b=new Uint8Array(this.data,this.read,this.length());if(a=a||"utf8","binary"===a||"raw"===a)return h.binary.raw.encode(b);if("hex"===a)return h.binary.hex.encode(b);if("base64"===a)return h.binary.base64.encode(b);if("utf8"===a)return h.text.utf8.decode(b);if("utf16"===a)return h.text.utf16.decode(b);throw new Error("Invalid encoding: "+a)},h.createBuffer=function(a,b){return b=b||"raw",void 0!==a&&"utf8"===b&&(a=h.encodeUtf8(a)),new h.ByteBuffer(a)},h.fillString=function(a,b){for(var c="";b>0;)1&b&&(c+=a),b>>>=1,b>0&&(a+=a);return c},h.xorBytes=function(a,b,c){for(var d="",e="",f="",g=0,h=0;c>0;--c,++g)e=a.charCodeAt(g)^b.charCodeAt(g),h>=10&&(d+=f,f="",h=0),f+=String.fromCharCode(e),++h;return d+=f},h.hexToBytes=function(a){var b="",c=0;for(a.length&!0&&(c=1,b+=String.fromCharCode(parseInt(a[0],16)));c<a.length;c+=2)b+=String.fromCharCode(parseInt(a.substr(c,2),16));return b},h.bytesToHex=function(a){return h.createBuffer(a).toHex()},h.int32ToBytes=function(a){return String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a)};var j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51];h.encode64=function(a,b){for(var c,d,e,f="",g="",h=0;h<a.length;)c=a.charCodeAt(h++),d=a.charCodeAt(h++),e=a.charCodeAt(h++),f+=j.charAt(c>>2),f+=j.charAt((3&c)<<4|d>>4),isNaN(d)?f+="==":(f+=j.charAt((15&d)<<2|e>>6),f+=isNaN(e)?"=":j.charAt(63&e)),b&&f.length>b&&(g+=f.substr(0,b)+"\r\n",f=f.substr(b));return g+=f},h.decode64=function(a){a=a.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var b,c,d,e,f="",g=0;g<a.length;)b=k[a.charCodeAt(g++)-43],c=k[a.charCodeAt(g++)-43],d=k[a.charCodeAt(g++)-43],e=k[a.charCodeAt(g++)-43],f+=String.fromCharCode(b<<2|c>>4),64!==d&&(f+=String.fromCharCode((15&c)<<4|d>>2),64!==e&&(f+=String.fromCharCode((3&d)<<6|e)));return f},h.encodeUtf8=function(a){return unescape(encodeURIComponent(a))},h.decodeUtf8=function(a){return decodeURIComponent(escape(a))},h.binary={raw:{},hex:{},base64:{}},h.binary.raw.encode=function(a){return String.fromCharCode.apply(null,a)},h.binary.raw.decode=function(a,b,c){var d=b;d||(d=new Uint8Array(a.length)),c=c||0;for(var e=c,f=0;f<a.length;++f)d[e++]=a.charCodeAt(f);return b?e-c:d},h.binary.hex.encode=h.bytesToHex,h.binary.hex.decode=function(a,b,c){var d=b;d||(d=new Uint8Array(Math.ceil(a.length/2))),c=c||0;var e=0,f=c;for(1&a.length&&(e=1,d[f++]=parseInt(a[0],16));e<a.length;e+=2)d[f++]=parseInt(a.substr(e,2),16);return b?f-c:d},h.binary.base64.encode=function(a,b){for(var c,d,e,f="",g="",h=0;h<a.byteLength;)c=a[h++],d=a[h++],e=a[h++],f+=j.charAt(c>>2),f+=j.charAt((3&c)<<4|d>>4),isNaN(d)?f+="==":(f+=j.charAt((15&d)<<2|e>>6),f+=isNaN(e)?"=":j.charAt(63&e)),b&&f.length>b&&(g+=f.substr(0,b)+"\r\n",f=f.substr(b));return g+=f},h.binary.base64.decode=function(a,b,c){var d=b;d||(d=new Uint8Array(3*Math.ceil(a.length/4))),a=a.replace(/[^A-Za-z0-9\+\/\=]/g,""),c=c||0;for(var e,f,g,h,i=0,j=c;i<a.length;)e=k[a.charCodeAt(i++)-43],f=k[a.charCodeAt(i++)-43],g=k[a.charCodeAt(i++)-43],h=k[a.charCodeAt(i++)-43],d[j++]=e<<2|f>>4,64!==g&&(d[j++]=(15&f)<<4|g>>2,64!==h&&(d[j++]=(3&g)<<6|h));return b?j-c:d.subarray(0,j)},h.text={utf8:{},utf16:{}},h.text.utf8.encode=function(a,b,c){a=h.encodeUtf8(a);var d=b;d||(d=new Uint8Array(a.length)),c=c||0;for(var e=c,f=0;f<a.length;++f)d[e++]=a.charCodeAt(f);return b?e-c:d},h.text.utf8.decode=function(a){return h.decodeUtf8(String.fromCharCode.apply(null,a))},h.text.utf16.encode=function(a,b,c){var d=b;d||(d=new Uint8Array(2*a.length));var e=new Uint16Array(d.buffer);c=c||0;for(var f=c,g=c,h=0;h<a.length;++h)e[g++]=a.charCodeAt(h),f+=2;return b?f-c:d},h.text.utf16.decode=function(a){return String.fromCharCode.apply(null,new Uint16Array(a.buffer))},h.deflate=function(a,b,c){if(b=h.decode64(a.deflate(h.encode64(b)).rval),c){var d=2,e=b.charCodeAt(1);32&e&&(d=6),b=b.substring(d,b.length-4)}return b},h.inflate=function(a,b,c){var d=a.inflate(h.encode64(b)).rval;return null===d?null:h.decode64(d)};var l=function(a,b,c){if(!a)throw new Error("WebStorage not available.");var d;if(null===c?d=a.removeItem(b):(c=h.encode64(JSON.stringify(c)),d=a.setItem(b,c)),"undefined"!=typeof d&&d.rval!==!0){var e=new Error(d.error.message);throw e.id=d.error.id,e.name=d.error.name,e}},m=function(a,b){if(!a)throw new Error("WebStorage not available.");var c=a.getItem(b);if(a.init)if(null===c.rval){if(c.error){var d=new Error(c.error.message);throw d.id=c.error.id,d.name=c.error.name,d}c=null}else c=c.rval;return null!==c&&(c=JSON.parse(h.decode64(c))),c},n=function(a,b,c,d){var e=m(a,b);null===e&&(e={}),e[c]=d,l(a,b,e)},o=function(a,b,c){var d=m(a,b);return null!==d&&(d=c in d?d[c]:null),d},p=function(a,b,c){var d=m(a,b);if(null!==d&&c in d){delete d[c];var e=!0;for(var f in d){e=!1;break}e&&(d=null),l(a,b,d)}},q=function(a,b){l(a,b,null)},r=function(a,b,c){var d=null;"undefined"==typeof c&&(c=["web","flash"]);var e,f=!1,g=null;for(var h in c){e=c[h];try{if("flash"===e||"both"===e){if(null===b[0])throw new Error("Flash local storage not available.");d=a.apply(this,b),f="flash"===e}("web"===e||"both"===e)&&(b[0]=localStorage,d=a.apply(this,b),f=!0)}catch(i){g=i}if(f)break}if(!f)throw g;return d};h.setItem=function(a,b,c,d,e){r(n,arguments,e)},h.getItem=function(a,b,c,d){return r(o,arguments,d)},h.removeItem=function(a,b,c,d){r(p,arguments,d)},h.clearItems=function(a,b,c){r(q,arguments,c)},h.parseUrl=function(a){var b=/^(https?):\/\/([^:&^\/]*):?(\d*)(.*)$/g;b.lastIndex=0;var c=b.exec(a),d=null===c?null:{full:a,scheme:c[1],host:c[2],port:c[3],path:c[4]};return d&&(d.fullHost=d.host,d.port?80!==d.port&&"http"===d.scheme?d.fullHost+=":"+d.port:443!==d.port&&"https"===d.scheme&&(d.fullHost+=":"+d.port):"http"===d.scheme?d.port=80:"https"===d.scheme&&(d.port=443),d.full=d.scheme+"://"+d.fullHost),d};var s=null;h.getQueryVariables=function(a){var b,c=function(a){for(var b={},c=a.split("&"),d=0;d<c.length;d++){var e,f,g=c[d].indexOf("=");g>0?(e=c[d].substring(0,g),f=c[d].substring(g+1)):(e=c[d],f=null),e in b||(b[e]=[]),e in Object.prototype||null===f||b[e].push(unescape(f))}return b};return"undefined"==typeof a?(null===s&&(s="undefined"!=typeof window&&window.location&&window.location.search?c(window.location.search.substring(1)):{}),b=s):b=c(a),b},h.parseFragment=function(a){var b=a,c="",d=a.indexOf("?");d>0&&(b=a.substring(0,d),c=a.substring(d+1));var e=b.split("/");e.length>0&&""===e[0]&&e.shift();var f=""===c?{}:h.getQueryVariables(c);return{pathString:b,queryString:c,path:e,query:f}},h.makeRequest=function(a){var b=h.parseFragment(a),c={path:b.pathString,query:b.queryString,getPath:function(a){return"undefined"==typeof a?b.path:b.path[a]},getQuery:function(a,c){var d;return"undefined"==typeof a?d=b.query:(d=b.query[a],d&&"undefined"!=typeof c&&(d=d[c])),d},getQueryLast:function(a,b){var d,e=c.getQuery(a);return d=e?e[e.length-1]:b}};return c},h.makeLink=function(a,b,c){a=jQuery.isArray(a)?a.join("/"):a;var d=jQuery.param(b||{});return c=c||"",a+(d.length>0?"?"+d:"")+(c.length>0?"#"+c:"")},h.setPath=function(a,b,c){if("object"==typeof a&&null!==a)for(var d=0,e=b.length;e>d;){var f=b[d++];if(d==e)a[f]=c;else{var g=f in a;(!g||g&&"object"!=typeof a[f]||g&&null===a[f])&&(a[f]={}),a=a[f]}}},h.getPath=function(a,b,c){for(var d=0,e=b.length,f=!0;f&&e>d&&"object"==typeof a&&null!==a;){var g=b[d++];f=g in a,f&&(a=a[g])}return f?a:c},h.deletePath=function(a,b){if("object"==typeof a&&null!==a)for(var c=0,d=b.length;d>c;){var e=b[c++];if(c==d)delete a[e];else{if(!(e in a)||"object"!=typeof a[e]||null===a[e])break;a=a[e]}}},h.isEmpty=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},h.format=function(a){for(var b,c,d=/%./g,e=0,f=[],g=0;b=d.exec(a);){c=a.substring(g,d.lastIndex-2),c.length>0&&f.push(c),g=d.lastIndex;var h=b[0][1];switch(h){case"s":case"o":e<arguments.length?f.push(arguments[e++ +1]):f.push("<?>");break;case"%":f.push("%");break;default:f.push("<%"+h+"?>")}}return f.push(a.substring(g)),f.join("")},h.formatNumber=function(a,b,c,d){var e=a,f=isNaN(b=Math.abs(b))?2:b,g=void 0===c?",":c,h=void 0===d?".":d,i=0>e?"-":"",j=parseInt(e=Math.abs(+e||0).toFixed(f),10)+"",k=j.length>3?j.length%3:0;return i+(k?j.substr(0,k)+h:"")+j.substr(k).replace(/(\d{3})(?=\d)/g,"$1"+h)+(f?g+Math.abs(e-j).toFixed(f).slice(2):"")},h.formatSize=function(a){return a=a>=1073741824?h.formatNumber(a/1073741824,2,".","")+" GiB":a>=1048576?h.formatNumber(a/1048576,2,".","")+" MiB":a>=1024?h.formatNumber(a/1024,0)+" KiB":h.formatNumber(a,0)+" bytes"},h.bytesFromIP=function(a){return-1!==a.indexOf(".")?h.bytesFromIPv4(a):-1!==a.indexOf(":")?h.bytesFromIPv6(a):null},h.bytesFromIPv4=function(a){if(a=a.split("."),4!==a.length)return null;for(var b=h.createBuffer(),c=0;c<a.length;++c){var d=parseInt(a[c],10);if(isNaN(d))return null;b.putByte(d)}return b.getBytes()},h.bytesFromIPv6=function(a){var b=0;a=a.split(":").filter(function(a){return 0===a.length&&++b,!0});for(var c=2*(8-a.length+b),d=h.createBuffer(),e=0;8>e;++e)if(a[e]&&0!==a[e].length){var f=h.hexToBytes(a[e]);f.length<2&&d.putByte(0),d.putBytes(f)}else d.fillWithByte(0,c),c=0;return d.getBytes()},h.bytesToIP=function(a){return 4===a.length?h.bytesToIPv4(a):16===a.length?h.bytesToIPv6(a):null},h.bytesToIPv4=function(a){if(4!==a.length)return null;for(var b=[],c=0;c<a.length;++c)b.push(a.charCodeAt(c));return b.join(".")},h.bytesToIPv6=function(a){if(16!==a.length)return null;for(var b=[],c=[],d=0,e=0;e<a.length;e+=2){for(var f=h.bytesToHex(a[e]+a[e+1]);"0"===f[0]&&"0"!==f;)f=f.substr(1);if("0"===f){var g=c[c.length-1],i=b.length;g&&i===g.end+1?(g.end=i,g.end-g.start>c[d].end-c[d].start&&(d=c.length-1)):c.push({start:i,end:i})}b.push(f)}if(c.length>0){var j=c[d];j.end-j.start>0&&(b.splice(j.start,j.end-j.start+1,""),0===j.start&&b.unshift(""),7===j.end&&b.push(""))}return b.join(":")},h.estimateCores=function(a,b){function c(a,g,i){if(0===g){var j=Math.floor(a.reduce(function(a,b){return a+b},0)/a.length);return h.cores=Math.max(1,j),URL.revokeObjectURL(f),b(null,h.cores)}d(i,function(b,d){a.push(e(i,d)),c(a,g-1,i)})}function d(a,b){for(var c=[],d=[],e=0;a>e;++e){var g=new Worker(f);g.addEventListener("message",function(e){if(d.push(e.data),d.length===a){for(var f=0;a>f;++f)c[f].terminate();b(null,d)}}),c.push(g)}for(var e=0;a>e;++e)c[e].postMessage(e)}function e(a,b){for(var c=[],d=0;a>d;++d)for(var e=b[d],f=c[d]=[],g=0;a>g;++g)if(d!==g){var h=b[g];(e.st>h.st&&e.st<h.et||h.st>e.st&&h.st<e.et)&&f.push(g)}return c.reduce(function(a,b){return Math.max(a,b.length)},0)}if("function"==typeof a&&(b=a,a={}),a=a||{},"cores"in h&&!a.update)return b(null,h.cores);if("undefined"!=typeof navigator&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return h.cores=navigator.hardwareConcurrency,b(null,h.cores);if("undefined"==typeof Worker)return h.cores=1,b(null,h.cores);if("undefined"==typeof Blob)return h.cores=2,b(null,h.cores);var f=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var b=Date.now(),c=b+4;Date.now()<c;);self.postMessage({st:b,et:c})})}.toString(),")()"],{type:"application/javascript"}));c([],5,16)}},function(a,b,c){var d=c(0);c(5),c(30),c(28),c(1),function(){return d.random&&d.random.getBytes?void(a.exports=d.random):void function(b){function c(){var a=d.prng.create(e);return a.getBytes=function(b,c){return a.generate(b,c)},a.getBytesSync=function(b){return a.generate(b)},a}var e={},f=new Array(4),g=d.util.createBuffer();e.formatKey=function(a){var b=d.util.createBuffer(a);return a=new Array(4),a[0]=b.getInt32(),a[1]=b.getInt32(),a[2]=b.getInt32(),a[3]=b.getInt32(),d.aes._expandKey(a,!1)},e.formatSeed=function(a){var b=d.util.createBuffer(a);return a=new Array(4),a[0]=b.getInt32(),a[1]=b.getInt32(),a[2]=b.getInt32(),a[3]=b.getInt32(),a},e.cipher=function(a,b){return d.aes._updateBlock(a,b,f,!1),g.putInt32(f[0]),g.putInt32(f[1]),g.putInt32(f[2]),g.putInt32(f[3]),g.getBytes()},e.increment=function(a){return++a[3],a},e.md=d.md.sha256;var h=c(),i=null;if("undefined"!=typeof window){var j=window.crypto||window.msCrypto;j&&j.getRandomValues&&(i=function(a){return j.getRandomValues(a)})}if(d.options.usePureJavaScript||!d.util.isNodejs&&!i){if("undefined"==typeof window||void 0===window.document,h.collectInt(+new Date,32),"undefined"!=typeof navigator){var k="";for(var l in navigator)try{"string"==typeof navigator[l]&&(k+=navigator[l])}catch(m){}h.collect(k),k=null}b&&(b().mousemove(function(a){h.collectInt(a.clientX,16),h.collectInt(a.clientY,16)}),b().keypress(function(a){h.collectInt(a.charCode,8)}))}if(d.random)for(var l in h)d.random[l]=h[l];else d.random=h;d.random.createInstance=c,a.exports=d.random}("undefined"!=typeof jQuery?jQuery:null)}()},function(a,b,c){function d(a,b,c){if(c>b){var d=new Error("Too few bytes to parse DER.");throw d.available=a.length(),d.remaining=b,d.requested=c,d}}function e(a,b,c,f){var i;d(a,b,2);var j=a.getByte();b--;var k=192&j,l=31&j;i=a.length();var m=h(a,b);if(b-=i-a.length(),void 0!==m&&m>b){if(f.strict){var n=new Error("Too few bytes to read ASN.1 value.");throw n.available=a.length(),n.remaining=b,n.requested=m,n}m=b}var o,p,q=32===(32&j);if(q)if(o=[],void 0===m)for(;;){if(d(a,b,2),a.bytes(2)===String.fromCharCode(0,0)){a.getBytes(2),b-=2;break}i=a.length(),o.push(e(a,b,c+1,f)),b-=i-a.length()}else for(;m>0;)i=a.length(),o.push(e(a,m,c+1,f)),b-=i-a.length(),m-=i-a.length();if(void 0===o&&k===g.Class.UNIVERSAL&&l===g.Type.BITSTRING&&(p=a.bytes(m)),void 0===o&&f.decodeBitStrings&&k===g.Class.UNIVERSAL&&l===g.Type.BITSTRING&&m>1){var r=a.read,s=b,t=0;if(l===g.Type.BITSTRING&&(d(a,b,1),t=a.getByte(),b--),0===t)try{i=a.length();var u={verbose:f.verbose,strict:!0,decodeBitStrings:!0},v=e(a,b,c+1,u),w=i-a.length();b-=w,l==g.Type.BITSTRING&&w++;var x=v.tagClass;w!==m||x!==g.Class.UNIVERSAL&&x!==g.Class.CONTEXT_SPECIFIC||(o=[v])}catch(y){}void 0===o&&(a.read=r,b=s)}if(void 0===o){if(void 0===m){if(f.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");m=b}if(l===g.Type.BMPSTRING)for(o="";m>0;m-=2)d(a,b,2),o+=String.fromCharCode(a.getInt16()),b-=2;else o=a.getBytes(m)}var z=void 0===p?null:{bitStringContents:p};return g.create(k,l,q,o,z)}var f=c(0);c(1),c(6);var g=a.exports=f.asn1=f.asn1||{};g.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192},g.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30},g.create=function(a,b,c,d,e){if(f.util.isArray(d)){for(var h=[],i=0;i<d.length;++i)void 0!==d[i]&&h.push(d[i]);d=h}var j={tagClass:a,type:b,constructed:c,composed:c||f.util.isArray(d),value:d};return e&&"bitStringContents"in e&&(j.bitStringContents=e.bitStringContents,j.original=g.copy(j)),j},g.copy=function(a,b){var c;if(f.util.isArray(a)){c=[];for(var d=0;d<a.length;++d)c.push(g.copy(a[d],b));return c}return"string"==typeof a?a:(c={tagClass:a.tagClass,type:a.type,constructed:a.constructed,composed:a.composed,value:g.copy(a.value,b)},b&&!b.excludeBitStringContents&&(c.bitStringContents=a.bitStringContents),c)},g.equals=function(a,b,c){if(f.util.isArray(a)){if(!f.util.isArray(b))return!1;if(a.length!==b.length)return!1;for(var d=0;d<a.length;++d)return g.equals(a[d],b[d])?!0:!1}if(typeof a!=typeof b)return!1;if("string"==typeof a)return a===b;var e=a.tagClass===b.tagClass&&a.type===b.type&&a.constructed===b.constructed&&a.composed===b.composed&&g.equals(a.value,b.value);return c&&c.includeBitStringContents&&(e=e&&a.bitStringContents===b.bitStringContents),e},g.getBerValueLength=function(a){var b=a.getByte();if(128===b)return void 0;var c,d=128&b;return c=d?a.getInt((127&b)<<3):b};var h=function(a,b){var c=a.getByte();if(b--,128===c)return void 0;var e,f=128&c;if(f){var g=127&c;d(a,b,g),e=a.getInt(g<<3)}else e=c;if(0>e)throw new Error("Negative length: "+e);return e};g.fromDer=function(a,b){return void 0===b&&(b={strict:!0,decodeBitStrings:!0}),"boolean"==typeof b&&(b={strict:b,decodeBitStrings:!0}),"strict"in b||(b.strict=!0),"decodeBitStrings"in b||(b.decodeBitStrings=!0),"string"==typeof a&&(a=f.util.createBuffer(a)),e(a,a.length(),0,b)},g.toDer=function(a){var b=f.util.createBuffer(),c=a.tagClass|a.type,d=f.util.createBuffer(),e=!1;if("bitStringContents"in a&&(e=!0,a.original&&(e=g.equals(a,a.original))),e)d.putBytes(a.bitStringContents);else if(a.composed){a.constructed?c|=32:d.putByte(0);for(var h=0;h<a.value.length;++h)void 0!==a.value[h]&&d.putBuffer(g.toDer(a.value[h]))}else if(a.type===g.Type.BMPSTRING)for(var h=0;h<a.value.length;++h)d.putInt16(a.value.charCodeAt(h));else a.type===g.Type.INTEGER&&a.value.length>1&&(0===a.value.charCodeAt(0)&&0===(128&a.value.charCodeAt(1))||255===a.value.charCodeAt(0)&&128===(128&a.value.charCodeAt(1)))?d.putBytes(a.value.substr(1)):d.putBytes(a.value);if(b.putByte(c),d.length()<=127)b.putByte(127&d.length());else{var i=d.length(),j="";do j+=String.fromCharCode(255&i),i>>>=8;while(i>0);b.putByte(128|j.length);for(var h=j.length-1;h>=0;--h)b.putByte(j.charCodeAt(h))}return b.putBuffer(d),b},g.oidToDer=function(a){var b=a.split("."),c=f.util.createBuffer();c.putByte(40*parseInt(b[0],10)+parseInt(b[1],10));for(var d,e,g,h,i=2;i<b.length;++i){d=!0,e=[],g=parseInt(b[i],10);do h=127&g,g>>>=7,d||(h|=128),e.push(h),d=!1;while(g>0);for(var j=e.length-1;j>=0;--j)c.putByte(e[j])}return c},g.derToOid=function(a){var b;"string"==typeof a&&(a=f.util.createBuffer(a));var c=a.getByte();b=Math.floor(c/40)+"."+c%40;for(var d=0;a.length()>0;)c=a.getByte(),d<<=7,128&c?d+=127&c:(b+="."+(d+c),d=0);return b},g.utcTimeToDate=function(a){var b=new Date,c=parseInt(a.substr(0,2),10);c=c>=50?1900+c:2e3+c;
var d=parseInt(a.substr(2,2),10)-1,e=parseInt(a.substr(4,2),10),f=parseInt(a.substr(6,2),10),g=parseInt(a.substr(8,2),10),h=0;if(a.length>11){var i=a.charAt(10),j=10;"+"!==i&&"-"!==i&&(h=parseInt(a.substr(10,2),10),j+=2)}if(b.setUTCFullYear(c,d,e),b.setUTCHours(f,g,h,0),j&&(i=a.charAt(j),"+"===i||"-"===i)){var k=parseInt(a.substr(j+1,2),10),l=parseInt(a.substr(j+4,2),10),m=60*k+l;m*=6e4,"+"===i?b.setTime(+b-m):b.setTime(+b+m)}return b},g.generalizedTimeToDate=function(a){var b=new Date,c=parseInt(a.substr(0,4),10),d=parseInt(a.substr(4,2),10)-1,e=parseInt(a.substr(6,2),10),f=parseInt(a.substr(8,2),10),g=parseInt(a.substr(10,2),10),h=parseInt(a.substr(12,2),10),i=0,j=0,k=!1;"Z"===a.charAt(a.length-1)&&(k=!0);var l=a.length-5,m=a.charAt(l);if("+"===m||"-"===m){var n=parseInt(a.substr(l+1,2),10),o=parseInt(a.substr(l+4,2),10);j=60*n+o,j*=6e4,"+"===m&&(j*=-1),k=!0}return"."===a.charAt(14)&&(i=1e3*parseFloat(a.substr(14),10)),k?(b.setUTCFullYear(c,d,e),b.setUTCHours(f,g,h,i),b.setTime(+b+j)):(b.setFullYear(c,d,e),b.setHours(f,g,h,i)),b},g.dateToUtcTime=function(a){if("string"==typeof a)return a;var b="",c=[];c.push((""+a.getUTCFullYear()).substr(2)),c.push(""+(a.getUTCMonth()+1)),c.push(""+a.getUTCDate()),c.push(""+a.getUTCHours()),c.push(""+a.getUTCMinutes()),c.push(""+a.getUTCSeconds());for(var d=0;d<c.length;++d)c[d].length<2&&(b+="0"),b+=c[d];return b+="Z"},g.dateToGeneralizedTime=function(a){if("string"==typeof a)return a;var b="",c=[];c.push(""+a.getUTCFullYear()),c.push(""+(a.getUTCMonth()+1)),c.push(""+a.getUTCDate()),c.push(""+a.getUTCHours()),c.push(""+a.getUTCMinutes()),c.push(""+a.getUTCSeconds());for(var d=0;d<c.length;++d)c[d].length<2&&(b+="0"),b+=c[d];return b+="Z"},g.integerToDer=function(a){var b=f.util.createBuffer();if(a>=-128&&128>a)return b.putSignedInt(a,8);if(a>=-32768&&32768>a)return b.putSignedInt(a,16);if(a>=-8388608&&8388608>a)return b.putSignedInt(a,24);if(a>=-2147483648&&2147483648>a)return b.putSignedInt(a,32);var c=new Error("Integer too large; max is 32-bits.");throw c.integer=a,c},g.derToInteger=function(a){"string"==typeof a&&(a=f.util.createBuffer(a));var b=8*a.length();if(b>32)throw new Error("Integer too large; max is 32-bits.");return a.getSignedInt(b)},g.validate=function(a,b,c,d){var e=!1;if(a.tagClass!==b.tagClass&&"undefined"!=typeof b.tagClass||a.type!==b.type&&"undefined"!=typeof b.type)d&&(a.tagClass!==b.tagClass&&d.push("["+b.name+'] Expected tag class "'+b.tagClass+'", got "'+a.tagClass+'"'),a.type!==b.type&&d.push("["+b.name+'] Expected type "'+b.type+'", got "'+a.type+'"'));else if(a.constructed===b.constructed||"undefined"==typeof b.constructed){if(e=!0,b.value&&f.util.isArray(b.value))for(var h=0,i=0;e&&i<b.value.length;++i)e=b.value[i].optional||!1,a.value[h]&&(e=g.validate(a.value[h],b.value[i],c,d),e?++h:b.value[i].optional&&(e=!0)),!e&&d&&d.push("["+b.name+'] Tag class "'+b.tagClass+'", type "'+b.type+'" expected value length "'+b.value.length+'", got "'+a.value.length+'"');if(e&&c&&(b.capture&&(c[b.capture]=a.value),b.captureAsn1&&(c[b.captureAsn1]=a),b.captureBitStringContents&&"bitStringContents"in a&&(c[b.captureBitStringContents]=a.bitStringContents),b.captureBitStringValue&&"bitStringContents"in a)){if(a.bitStringContents.length<2)c[b.captureBitStringValue]="";else{var j=a.bitStringContents.charCodeAt(0);if(0!==j)throw new Error("captureBitStringValue only supported for zero unused bits");c[b.captureBitStringValue]=a.bitStringContents.slice(1)}}}else d&&d.push("["+b.name+'] Expected constructed "'+b.constructed+'", got "'+a.constructed+'"');return e};var i=/[^\\u0000-\\u00ff]/;g.prettyPrint=function(a,b,c){var d="";b=b||0,c=c||2,b>0&&(d+="\n");for(var e="",h=0;b*c>h;++h)e+=" ";switch(d+=e+"Tag: ",a.tagClass){case g.Class.UNIVERSAL:d+="Universal:";break;case g.Class.APPLICATION:d+="Application:";break;case g.Class.CONTEXT_SPECIFIC:d+="Context-Specific:";break;case g.Class.PRIVATE:d+="Private:"}if(a.tagClass===g.Class.UNIVERSAL)switch(d+=a.type,a.type){case g.Type.NONE:d+=" (None)";break;case g.Type.BOOLEAN:d+=" (Boolean)";break;case g.Type.INTEGER:d+=" (Integer)";break;case g.Type.BITSTRING:d+=" (Bit string)";break;case g.Type.OCTETSTRING:d+=" (Octet string)";break;case g.Type.NULL:d+=" (Null)";break;case g.Type.OID:d+=" (Object Identifier)";break;case g.Type.ODESC:d+=" (Object Descriptor)";break;case g.Type.EXTERNAL:d+=" (External or Instance of)";break;case g.Type.REAL:d+=" (Real)";break;case g.Type.ENUMERATED:d+=" (Enumerated)";break;case g.Type.EMBEDDED:d+=" (Embedded PDV)";break;case g.Type.UTF8:d+=" (UTF8)";break;case g.Type.ROID:d+=" (Relative Object Identifier)";break;case g.Type.SEQUENCE:d+=" (Sequence)";break;case g.Type.SET:d+=" (Set)";break;case g.Type.PRINTABLESTRING:d+=" (Printable String)";break;case g.Type.IA5String:d+=" (IA5String (ASCII))";break;case g.Type.UTCTIME:d+=" (UTC time)";break;case g.Type.GENERALIZEDTIME:d+=" (Generalized time)";break;case g.Type.BMPSTRING:d+=" (BMP String)"}else d+=a.type;if(d+="\n",d+=e+"Constructed: "+a.constructed+"\n",a.composed){for(var j=0,k="",h=0;h<a.value.length;++h)void 0!==a.value[h]&&(j+=1,k+=g.prettyPrint(a.value[h],b+1,c),h+1<a.value.length&&(k+=","));d+=e+"Sub values: "+j+k}else{if(d+=e+"Value: ",a.type===g.Type.OID){var l=g.derToOid(a.value);d+=l,f.pki&&f.pki.oids&&l in f.pki.oids&&(d+=" ("+f.pki.oids[l]+") ")}if(a.type===g.Type.INTEGER)try{d+=g.derToInteger(a.value)}catch(m){d+="0x"+f.util.bytesToHex(a.value)}else if(a.type===g.Type.BITSTRING){if(d+=a.value.length>1?"0x"+f.util.bytesToHex(a.value.slice(1)):"(none)",a.value.length>0){var n=a.value.charCodeAt(0);1==n?d+=" (1 unused bit shown)":n>1&&(d+=" ("+n+" unused bits shown)")}}else a.type===g.Type.OCTETSTRING?(i.test(a.value)||(d+="("+a.value+") "),d+="0x"+f.util.bytesToHex(a.value)):d+=a.type===g.Type.UTF8?f.util.decodeUtf8(a.value):a.type===g.Type.PRINTABLESTRING||a.type===g.Type.IA5String?a.value:i.test(a.value)?"0x"+f.util.bytesToHex(a.value):0===a.value.length?"[null]":a.value}return d}},function(a,b,c){var d=c(0);a.exports=d.md=d.md||{},d.md.algorithms=d.md.algorithms||{}},function(a,b,c){function d(a,b){var c=function(){return new i.aes.Algorithm(a,b)};i.cipher.registerAlgorithm(a,c)}function e(){o=!0,l=[0,1,2,4,8,16,32,64,128,27,54];for(var a=new Array(256),b=0;128>b;++b)a[b]=b<<1,a[b+128]=b+128<<1^283;j=new Array(256),k=new Array(256),m=new Array(4),n=new Array(4);for(var b=0;4>b;++b)m[b]=new Array(256),n[b]=new Array(256);for(var c,d,e,f,g,h,i,p=0,q=0,b=0;256>b;++b){f=q^q<<1^q<<2^q<<3^q<<4,f=f>>8^255&f^99,j[p]=f,k[f]=p,g=a[f],c=a[p],d=a[c],e=a[d],h=g<<24^f<<16^f<<8^(f^g),i=(c^d^e)<<24^(p^e)<<16^(p^d^e)<<8^(p^c^e);for(var r=0;4>r;++r)m[r][p]=h,n[r][f]=i,h=h<<24|h>>>8,i=i<<24|i>>>8;0===p?p=q=1:(p=c^a[a[a[c^e]]],q^=a[a[q]])}}function f(a,b){for(var c,d=a.slice(0),e=1,f=d.length,g=f+6+1,h=p*g,i=f;h>i;++i)c=d[i-1],i%f===0?(c=j[c>>>16&255]<<24^j[c>>>8&255]<<16^j[255&c]<<8^j[c>>>24]^l[e]<<24,e++):f>6&&i%f===4&&(c=j[c>>>24]<<24^j[c>>>16&255]<<16^j[c>>>8&255]<<8^j[255&c]),d[i]=d[i-f]^c;if(b){var k,m=n[0],o=n[1],q=n[2],r=n[3],s=d.slice(0);h=d.length;for(var i=0,t=h-p;h>i;i+=p,t-=p)if(0===i||i===h-p)s[i]=d[t],s[i+1]=d[t+3],s[i+2]=d[t+2],s[i+3]=d[t+1];else for(var u=0;p>u;++u)k=d[t+u],s[i+(3&-u)]=m[j[k>>>24]]^o[j[k>>>16&255]]^q[j[k>>>8&255]]^r[j[255&k]];d=s}return d}function g(a,b,c,d){var e,f,g,h,i,l=a.length/4-1;d?(e=n[0],f=n[1],g=n[2],h=n[3],i=k):(e=m[0],f=m[1],g=m[2],h=m[3],i=j);var o,p,q,r,s,t,u;o=b[0]^a[0],p=b[d?3:1]^a[1],q=b[2]^a[2],r=b[d?1:3]^a[3];for(var v=3,w=1;l>w;++w)s=e[o>>>24]^f[p>>>16&255]^g[q>>>8&255]^h[255&r]^a[++v],t=e[p>>>24]^f[q>>>16&255]^g[r>>>8&255]^h[255&o]^a[++v],u=e[q>>>24]^f[r>>>16&255]^g[o>>>8&255]^h[255&p]^a[++v],r=e[r>>>24]^f[o>>>16&255]^g[p>>>8&255]^h[255&q]^a[++v],o=s,p=t,q=u;c[0]=i[o>>>24]<<24^i[p>>>16&255]<<16^i[q>>>8&255]<<8^i[255&r]^a[++v],c[d?3:1]=i[p>>>24]<<24^i[q>>>16&255]<<16^i[r>>>8&255]<<8^i[255&o]^a[++v],c[2]=i[q>>>24]<<24^i[r>>>16&255]<<16^i[o>>>8&255]<<8^i[255&p]^a[++v],c[d?1:3]=i[r>>>24]<<24^i[o>>>16&255]<<16^i[p>>>8&255]<<8^i[255&q]^a[++v]}function h(a){a=a||{};var b,c=(a.mode||"CBC").toUpperCase(),d="AES-"+c;b=a.decrypt?i.cipher.createDecipher(d,a.key):i.cipher.createCipher(d,a.key);var e=b.start;return b.start=function(a,c){var d=null;c instanceof i.util.ByteBuffer&&(d=c,c={}),c=c||{},c.output=d,c.iv=a,e.call(b,c)},b}var i=c(0);c(12),c(18),c(1),a.exports=i.aes=i.aes||{},i.aes.startEncrypting=function(a,b,c,d){var e=h({key:a,output:c,decrypt:!1,mode:d});return e.start(b),e},i.aes.createEncryptionCipher=function(a,b){return h({key:a,output:null,decrypt:!1,mode:b})},i.aes.startDecrypting=function(a,b,c,d){var e=h({key:a,output:c,decrypt:!0,mode:d});return e.start(b),e},i.aes.createDecryptionCipher=function(a,b){return h({key:a,output:null,decrypt:!0,mode:b})},i.aes.Algorithm=function(a,b){o||e();var c=this;c.name=a,c.mode=new b({blockSize:16,cipher:{encrypt:function(a,b){return g(c._w,a,b,!1)},decrypt:function(a,b){return g(c._w,a,b,!0)}}}),c._init=!1},i.aes.Algorithm.prototype.initialize=function(a){if(!this._init){var b,c=a.key;if("string"!=typeof c||16!==c.length&&24!==c.length&&32!==c.length){if(i.util.isArray(c)&&(16===c.length||24===c.length||32===c.length)){b=c,c=i.util.createBuffer();for(var d=0;d<b.length;++d)c.putByte(b[d])}}else c=i.util.createBuffer(c);if(!i.util.isArray(c)){b=c,c=[];var e=b.length();if(16===e||24===e||32===e){e>>>=2;for(var d=0;e>d;++d)c.push(b.getInt32())}}if(!i.util.isArray(c)||4!==c.length&&6!==c.length&&8!==c.length)throw new Error("Invalid key parameter.");var g=this.mode.name,h=-1!==["CFB","OFB","CTR","GCM"].indexOf(g);this._w=f(c,a.decrypt&&!h),this._init=!0}},i.aes._expandKey=function(a,b){return o||e(),f(a,b)},i.aes._updateBlock=g,d("AES-ECB",i.cipher.modes.ecb),d("AES-CBC",i.cipher.modes.cbc),d("AES-CFB",i.cipher.modes.cfb),d("AES-OFB",i.cipher.modes.ofb),d("AES-CTR",i.cipher.modes.ctr),d("AES-GCM",i.cipher.modes.gcm);var j,k,l,m,n,o=!1,p=4},function(a,b,c){function d(a,b){g[a]=b,g[b]=a}function e(a,b){g[a]=b}var f=c(0);f.pki=f.pki||{};var g=a.exports=f.pki.oids=f.oids=f.oids||{};d("1.2.840.113549.1.1.1","rsaEncryption"),d("1.2.840.113549.1.1.4","md5WithRSAEncryption"),d("1.2.840.113549.1.1.5","sha1WithRSAEncryption"),d("1.2.840.113549.1.1.7","RSAES-OAEP"),d("1.2.840.113549.1.1.8","mgf1"),d("1.2.840.113549.1.1.9","pSpecified"),d("1.2.840.113549.1.1.10","RSASSA-PSS"),d("1.2.840.113549.1.1.11","sha256WithRSAEncryption"),d("1.2.840.113549.1.1.12","sha384WithRSAEncryption"),d("1.2.840.113549.1.1.13","sha512WithRSAEncryption"),d("1.3.14.3.2.7","desCBC"),d("1.3.14.3.2.26","sha1"),d("2.16.840.1.101.3.4.2.1","sha256"),d("2.16.840.1.101.3.4.2.2","sha384"),d("2.16.840.1.101.3.4.2.3","sha512"),d("1.2.840.113549.2.5","md5"),d("1.2.840.113549.1.7.1","data"),d("1.2.840.113549.1.7.2","signedData"),d("1.2.840.113549.1.7.3","envelopedData"),d("1.2.840.113549.1.7.4","signedAndEnvelopedData"),d("1.2.840.113549.1.7.5","digestedData"),d("1.2.840.113549.1.7.6","encryptedData"),d("1.2.840.113549.1.9.1","emailAddress"),d("1.2.840.113549.1.9.2","unstructuredName"),d("1.2.840.113549.1.9.3","contentType"),d("1.2.840.113549.1.9.4","messageDigest"),d("1.2.840.113549.1.9.5","signingTime"),d("1.2.840.113549.1.9.6","counterSignature"),d("1.2.840.113549.1.9.7","challengePassword"),d("1.2.840.113549.1.9.8","unstructuredAddress"),d("1.2.840.113549.1.9.14","extensionRequest"),d("1.2.840.113549.1.9.20","friendlyName"),d("1.2.840.113549.1.9.21","localKeyId"),d("1.2.840.113549.1.9.22.1","x509Certificate"),d("1.2.840.113549.1.12.10.1.1","keyBag"),d("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag"),d("1.2.840.113549.1.12.10.1.3","certBag"),d("1.2.840.113549.1.12.10.1.4","crlBag"),d("1.2.840.113549.1.12.10.1.5","secretBag"),d("1.2.840.113549.1.12.10.1.6","safeContentsBag"),d("1.2.840.113549.1.5.13","pkcs5PBES2"),d("1.2.840.113549.1.5.12","pkcs5PBKDF2"),d("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4"),d("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4"),d("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC"),d("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC"),d("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC"),d("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC"),d("1.2.840.113549.2.7","hmacWithSHA1"),d("1.2.840.113549.2.8","hmacWithSHA224"),d("1.2.840.113549.2.9","hmacWithSHA256"),d("1.2.840.113549.2.10","hmacWithSHA384"),d("1.2.840.113549.2.11","hmacWithSHA512"),d("1.2.840.113549.3.7","des-EDE3-CBC"),d("2.16.840.1.101.3.4.1.2","aes128-CBC"),d("2.16.840.1.101.3.4.1.22","aes192-CBC"),d("2.16.840.1.101.3.4.1.42","aes256-CBC"),d("2.5.4.3","commonName"),d("2.5.4.5","serialName"),d("2.5.4.6","countryName"),d("2.5.4.7","localityName"),d("2.5.4.8","stateOrProvinceName"),d("2.5.4.10","organizationName"),d("2.5.4.11","organizationalUnitName"),d("2.16.840.1.113730.1.1","nsCertType"),e("2.5.29.1","authorityKeyIdentifier"),e("2.5.29.2","keyAttributes"),e("2.5.29.3","certificatePolicies"),e("2.5.29.4","keyUsageRestriction"),e("2.5.29.5","policyMapping"),e("2.5.29.6","subtreesConstraint"),e("2.5.29.7","subjectAltName"),e("2.5.29.8","issuerAltName"),e("2.5.29.9","subjectDirectoryAttributes"),e("2.5.29.10","basicConstraints"),e("2.5.29.11","nameConstraints"),e("2.5.29.12","policyConstraints"),e("2.5.29.13","basicConstraints"),d("2.5.29.14","subjectKeyIdentifier"),d("2.5.29.15","keyUsage"),e("2.5.29.16","privateKeyUsagePeriod"),d("2.5.29.17","subjectAltName"),d("2.5.29.18","issuerAltName"),d("2.5.29.19","basicConstraints"),e("2.5.29.20","cRLNumber"),e("2.5.29.21","cRLReason"),e("2.5.29.22","expirationDate"),e("2.5.29.23","instructionCode"),e("2.5.29.24","invalidityDate"),e("2.5.29.25","cRLDistributionPoints"),e("2.5.29.26","issuingDistributionPoint"),e("2.5.29.27","deltaCRLIndicator"),e("2.5.29.28","issuingDistributionPoint"),e("2.5.29.29","certificateIssuer"),e("2.5.29.30","nameConstraints"),d("2.5.29.31","cRLDistributionPoints"),d("2.5.29.32","certificatePolicies"),e("2.5.29.33","policyMappings"),e("2.5.29.34","policyConstraints"),d("2.5.29.35","authorityKeyIdentifier"),e("2.5.29.36","policyConstraints"),d("2.5.29.37","extKeyUsage"),e("2.5.29.46","freshestCRL"),e("2.5.29.54","inhibitAnyPolicy"),d("1.3.6.1.4.1.11129.2.4.2","timestampList"),d("1.3.6.1.5.5.7.1.1","authorityInfoAccess"),d("1.3.6.1.5.5.7.3.1","serverAuth"),d("1.3.6.1.5.5.7.3.2","clientAuth"),d("1.3.6.1.5.5.7.3.3","codeSigning"),d("1.3.6.1.5.5.7.3.4","emailProtection"),d("1.3.6.1.5.5.7.3.8","timeStamping")},function(a,b,c){function d(a){for(var b=a.name+": ",c=[],d=function(a,b){return" "+b},e=0;e<a.values.length;++e)c.push(a.values[e].replace(/^(\S+\r\n)/,d));b+=c.join(",")+"\r\n";for(var f=0,g=-1,e=0;e<b.length;++e,++f)if(f>65&&-1!==g){var h=b[g];","===h?(++g,b=b.substr(0,g)+"\r\n "+b.substr(g)):b=b.substr(0,g)+"\r\n"+h+b.substr(g+1),f=e-g-1,g=-1,++e}else(" "===b[e]||"	"===b[e]||","===b[e])&&(g=e);return b}function e(a){return a.replace(/^\s+/,"")}var f=c(0);c(1);var g=a.exports=f.pem=f.pem||{};g.encode=function(a,b){b=b||{};var c,e="-----BEGIN "+a.type+"-----\r\n";if(a.procType&&(c={name:"Proc-Type",values:[String(a.procType.version),a.procType.type]},e+=d(c)),a.contentDomain&&(c={name:"Content-Domain",values:[a.contentDomain]},e+=d(c)),a.dekInfo&&(c={name:"DEK-Info",values:[a.dekInfo.algorithm]},a.dekInfo.parameters&&c.values.push(a.dekInfo.parameters),e+=d(c)),a.headers)for(var g=0;g<a.headers.length;++g)e+=d(a.headers[g]);return a.procType&&(e+="\r\n"),e+=f.util.encode64(a.body,b.maxline||64)+"\r\n",e+="-----END "+a.type+"-----\r\n"},g.decode=function(a){for(var b,c=[],d=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,g=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,h=/\r?\n/;;){if(b=d.exec(a),!b)break;var i={type:b[1],procType:null,contentDomain:null,dekInfo:null,headers:[],body:f.util.decode64(b[3])};if(c.push(i),b[2]){for(var j=b[2].split(h),k=0;b&&k<j.length;){for(var l=j[k].replace(/\s+$/,""),m=k+1;m<j.length;++m){var n=j[m];if(!/\s/.test(n[0]))break;l+=n,k=m}if(b=l.match(g)){for(var o={name:b[1],values:[]},p=b[2].split(","),q=0;q<p.length;++q)o.values.push(e(p[q]));if(i.procType)if(i.contentDomain||"Content-Domain"!==o.name)if(i.dekInfo||"DEK-Info"!==o.name)i.headers.push(o);else{if(0===o.values.length)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');i.dekInfo={algorithm:p[0],parameters:p[1]||null}}else i.contentDomain=p[0]||"";else{if("Proc-Type"!==o.name)throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(2!==o.values.length)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');i.procType={version:p[0],type:p[1]}}}++k}if("ENCRYPTED"===i.procType&&!i.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(0===c.length)throw new Error("Invalid PEM formatted message.");return c}},function(a,b,c){var d=c(0);c(4),c(1);var e=a.exports=d.hmac=d.hmac||{};e.create=function(){var a=null,b=null,c=null,e=null,f={};return f.start=function(f,g){if(null!==f)if("string"==typeof f){if(f=f.toLowerCase(),!(f in d.md.algorithms))throw new Error('Unknown hash algorithm "'+f+'"');b=d.md.algorithms[f].create()}else b=f;if(null===g)g=a;else{if("string"==typeof g)g=d.util.createBuffer(g);else if(d.util.isArray(g)){var h=g;g=d.util.createBuffer();for(var i=0;i<h.length;++i)g.putByte(h[i])}var j=g.length();j>b.blockLength&&(b.start(),b.update(g.bytes()),g=b.digest()),c=d.util.createBuffer(),e=d.util.createBuffer(),j=g.length();for(var i=0;j>i;++i){var h=g.at(i);c.putByte(54^h),e.putByte(92^h)}if(j<b.blockLength)for(var h=b.blockLength-j,i=0;h>i;++i)c.putByte(54),e.putByte(92);a=g,c=c.bytes(),e=e.bytes()}b.start(),b.update(c)},f.update=function(a){b.update(a)},f.getMac=function(){var a=b.digest().bytes();return b.start(),b.update(e),b.update(a),b.digest()},f.digest=f.getMac,f}},function(a,b,c){function d(){h=String.fromCharCode(128),h+=f.util.fillString(String.fromCharCode(0),64),i=!0}function e(a,b,c){for(var d,e,f,g,h,i,j,k,l=c.length();l>=64;){for(e=a.h0,f=a.h1,g=a.h2,h=a.h3,i=a.h4,k=0;16>k;++k)d=c.getInt32(),b[k]=d,j=h^f&(g^h),d=(e<<5|e>>>27)+j+i+1518500249+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;for(;20>k;++k)d=b[k-3]^b[k-8]^b[k-14]^b[k-16],d=d<<1|d>>>31,b[k]=d,j=h^f&(g^h),d=(e<<5|e>>>27)+j+i+1518500249+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;for(;32>k;++k)d=b[k-3]^b[k-8]^b[k-14]^b[k-16],d=d<<1|d>>>31,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+1859775393+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;for(;40>k;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+1859775393+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;for(;60>k;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f&g|h&(f^g),d=(e<<5|e>>>27)+j+i+2400959708+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;for(;80>k;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+3395469782+d,i=h,h=g,g=(f<<30|f>>>2)>>>0,f=e,e=d;a.h0=a.h0+e|0,a.h1=a.h1+f|0,a.h2=a.h2+g|0,a.h3=a.h3+h|0,a.h4=a.h4+i|0,l-=64}}var f=c(0);c(4),c(1);var g=a.exports=f.sha1=f.sha1||{};f.md.sha1=f.md.algorithms.sha1=g,g.create=function(){i||d();var a=null,b=f.util.createBuffer(),c=new Array(80),g={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return g.start=function(){g.messageLength=0,g.fullMessageLength=g.messageLength64=[];for(var c=g.messageLengthSize/4,d=0;c>d;++d)g.fullMessageLength.push(0);return b=f.util.createBuffer(),a={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},g},g.start(),g.update=function(d,h){"utf8"===h&&(d=f.util.encodeUtf8(d));var i=d.length;g.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var j=g.fullMessageLength.length-1;j>=0;--j)g.fullMessageLength[j]+=i[1],i[1]=i[0]+(g.fullMessageLength[j]/4294967296>>>0),g.fullMessageLength[j]=g.fullMessageLength[j]>>>0,i[0]=i[1]/4294967296>>>0;return b.putBytes(d),e(a,c,b),(b.read>2048||0===b.length())&&b.compact(),g},g.digest=function(){var d=f.util.createBuffer();d.putBytes(b.bytes());var i=g.fullMessageLength[g.fullMessageLength.length-1]+g.messageLengthSize,j=i&g.blockLength-1;d.putBytes(h.substr(0,g.blockLength-j));for(var k,l,m=8*g.fullMessageLength[0],n=0;n<g.fullMessageLength.length-1;++n)k=8*g.fullMessageLength[n+1],l=k/4294967296>>>0,m+=l,d.putInt32(m>>>0),m=k>>>0;d.putInt32(m);var o={h0:a.h0,h1:a.h1,h2:a.h2,h3:a.h3,h4:a.h4};e(o,c,d);var p=f.util.createBuffer();return p.putInt32(o.h0),p.putInt32(o.h1),p.putInt32(o.h2),p.putInt32(o.h3),p.putInt32(o.h4),p},g};var h=null,i=!1},function(a,b,c){function d(a,b){var c=function(){return new h.des.Algorithm(a,b)};h.cipher.registerAlgorithm(a,c)}function e(a){for(var b,c=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],d=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],e=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],f=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],g=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],h=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],i=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],j=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],k=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],l=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],m=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],n=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],o=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],p=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],q=a.length()>8?3:1,r=[],s=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],t=0,u=0;q>u;u++){var v=a.getInt32(),w=a.getInt32();b=252645135&(v>>>4^w),w^=b,v^=b<<4,b=65535&(w>>>-16^v),v^=b,w^=b<<-16,b=858993459&(v>>>2^w),w^=b,v^=b<<2,b=65535&(w>>>-16^v),v^=b,w^=b<<-16,b=1431655765&(v>>>1^w),w^=b,v^=b<<1,b=16711935&(w>>>8^v),v^=b,w^=b<<8,b=1431655765&(v>>>1^w),w^=b,v^=b<<1,b=v<<8|w>>>20&240,v=w<<24|w<<8&16711680|w>>>8&65280|w>>>24&240,w=b;for(var x=0;x<s.length;++x){s[x]?(v=v<<2|v>>>26,w=w<<2|w>>>26):(v=v<<1|v>>>27,w=w<<1|w>>>27),v&=-15,w&=-15;var y=c[v>>>28]|d[v>>>24&15]|e[v>>>20&15]|f[v>>>16&15]|g[v>>>12&15]|h[v>>>8&15]|i[v>>>4&15],z=j[w>>>28]|k[w>>>24&15]|l[w>>>20&15]|m[w>>>16&15]|n[w>>>12&15]|o[w>>>8&15]|p[w>>>4&15];b=65535&(z>>>16^y),r[t++]=y^b,r[t++]=z^b<<16}}return r}function f(a,b,c,d){var e,f=32===a.length?3:9;e=3===f?d?[30,-2,-2]:[0,32,2]:d?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var g,h=b[0],q=b[1];g=252645135&(h>>>4^q),q^=g,h^=g<<4,g=65535&(h>>>16^q),q^=g,h^=g<<16,g=858993459&(q>>>2^h),h^=g,q^=g<<2,g=16711935&(q>>>8^h),h^=g,q^=g<<8,g=1431655765&(h>>>1^q),q^=g,h^=g<<1,h=h<<1|h>>>31,q=q<<1|q>>>31;for(var r=0;f>r;r+=3){for(var s=e[r+1],t=e[r+2],u=e[r];u!=s;u+=t){var v=q^a[u],w=(q>>>4|q<<28)^a[u+1];g=h,h=q,q=g^(j[v>>>24&63]|l[v>>>16&63]|n[v>>>8&63]|p[63&v]|i[w>>>24&63]|k[w>>>16&63]|m[w>>>8&63]|o[63&w])}g=h,h=q,q=g}h=h>>>1|h<<31,q=q>>>1|q<<31,g=1431655765&(h>>>1^q),q^=g,h^=g<<1,g=16711935&(q>>>8^h),h^=g,q^=g<<8,g=858993459&(q>>>2^h),h^=g,q^=g<<2,g=65535&(h>>>16^q),q^=g,h^=g<<16,g=252645135&(h>>>4^q),q^=g,h^=g<<4,c[0]=h,c[1]=q}function g(a){a=a||{};var b,c=(a.mode||"CBC").toUpperCase(),d="DES-"+c;b=a.decrypt?h.cipher.createDecipher(d,a.key):h.cipher.createCipher(d,a.key);var e=b.start;return b.start=function(a,c){var d=null;c instanceof h.util.ByteBuffer&&(d=c,c={}),c=c||{},c.output=d,c.iv=a,e.call(b,c)},b}var h=c(0);c(12),c(18),c(1),a.exports=h.des=h.des||{},h.des.startEncrypting=function(a,b,c,d){var e=g({key:a,output:c,decrypt:!1,mode:d||(null===b?"ECB":"CBC")});return e.start(b),e},h.des.createEncryptionCipher=function(a,b){return g({key:a,output:null,decrypt:!1,mode:b})},h.des.startDecrypting=function(a,b,c,d){var e=g({key:a,output:c,decrypt:!0,mode:d||(null===b?"ECB":"CBC")});return e.start(b),e},h.des.createDecryptionCipher=function(a,b){return g({key:a,output:null,decrypt:!0,mode:b})},h.des.Algorithm=function(a,b){var c=this;c.name=a,c.mode=new b({blockSize:8,cipher:{encrypt:function(a,b){return f(c._keys,a,b,!1)},decrypt:function(a,b){return f(c._keys,a,b,!0)}}}),c._init=!1},h.des.Algorithm.prototype.initialize=function(a){if(!this._init){var b=h.util.createBuffer(a.key);if(0===this.name.indexOf("3DES")&&24!==b.length())throw new Error("Invalid Triple-DES key size: "+8*b.length());this._keys=e(b),this._init=!0}},d("DES-ECB",h.cipher.modes.ecb),d("DES-CBC",h.cipher.modes.cbc),d("DES-CFB",h.cipher.modes.cfb),d("DES-OFB",h.cipher.modes.ofb),d("DES-CTR",h.cipher.modes.ctr),d("3DES-ECB",h.cipher.modes.ecb),d("3DES-CBC",h.cipher.modes.cbc),d("3DES-CFB",h.cipher.modes.cfb),d("3DES-OFB",h.cipher.modes.ofb),d("3DES-CTR",h.cipher.modes.ctr);var i=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],j=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],k=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],l=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],m=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],n=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],o=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],p=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696]},function(a,b,c){function d(a,b,c){var d=l.util.createBuffer(),e=Math.ceil(b.n.bitLength()/8);if(a.length>e-11){var f=new Error("Message is too long for PKCS#1 v1.5 padding.");throw f.length=a.length,f.max=e-11,f}d.putByte(0),d.putByte(c);var g,h=e-3-a.length;if(0===c||1===c){g=0===c?0:255;for(var i=0;h>i;++i)d.putByte(g)}else for(;h>0;){for(var j=0,k=l.random.getBytes(h),i=0;h>i;++i)g=k.charCodeAt(i),0===g?++j:d.putByte(g);h=j}return d.putByte(0),d.putBytes(a),d}function e(a,b,c,d){var e=Math.ceil(b.n.bitLength()/8),f=l.util.createBuffer(a),g=f.getByte(),h=f.getByte();if(0!==g||c&&0!==h&&1!==h||!c&&2!=h||c&&0===h&&"undefined"==typeof d)throw new Error("Encryption block is invalid.");var i=0;if(0===h){i=e-3-d;for(var j=0;i>j;++j)if(0!==f.getByte())throw new Error("Encryption block is invalid.")}else if(1===h)for(i=0;f.length()>1;){if(255!==f.getByte()){--f.read;break}++i}else if(2===h)for(i=0;f.length()>1;){if(0===f.getByte()){--f.read;break}++i}var k=f.getByte();if(0!==k||i!==e-3-f.length())throw new Error("Encryption block is invalid.");return f.getBytes()}function f(a,b,c){function d(){e(a.pBits,function(b,d){return b?c(b):(a.p=d,null!==a.q?f(b,a.q):void e(a.qBits,f))})}function e(a,b){l.prime.generateProbablePrime(a,g,b)}function f(b,g){if(b)return c(b);if(a.q=g,a.p.compareTo(a.q)<0){var h=a.p;a.p=a.q,a.q=h}if(0!==a.p.subtract(m.ONE).gcd(a.e).compareTo(m.ONE))return a.p=null,void d();if(0!==a.q.subtract(m.ONE).gcd(a.e).compareTo(m.ONE))return a.q=null,void e(a.qBits,f);if(a.p1=a.p.subtract(m.ONE),a.q1=a.q.subtract(m.ONE),a.phi=a.p1.multiply(a.q1),0!==a.phi.gcd(a.e).compareTo(m.ONE))return a.p=a.q=null,void d();if(a.n=a.p.multiply(a.q),a.n.bitLength()!==a.bits)return a.q=null,void e(a.qBits,f);var i=a.e.modInverse(a.phi);a.keys={privateKey:o.rsa.setPrivateKey(a.n,a.e,i,a.p,a.q,i.mod(a.p1),i.mod(a.q1),a.q.modInverse(a.p)),publicKey:o.rsa.setPublicKey(a.n,a.e)},c(null,a.keys)}"function"==typeof b&&(c=b,b={}),b=b||{};var g={algorithm:{name:b.algorithm||"PRIMEINC",options:{workers:b.workers||2,workLoad:b.workLoad||100,workerScript:b.workerScript}}};"prng"in b&&(g.prng=b.prng),d()}function g(a){var b=a.toString(16);b[0]>="8"&&(b="00"+b);var c=l.util.hexToBytes(b);return c.length>1&&(0===c.charCodeAt(0)&&0===(128&c.charCodeAt(1))||255===c.charCodeAt(0)&&128===(128&c.charCodeAt(1)))?c.substr(1):c}function h(a){return 100>=a?27:150>=a?18:200>=a?15:250>=a?12:300>=a?9:350>=a?8:400>=a?7:500>=a?6:600>=a?5:800>=a?4:1250>=a?3:2}function i(a){return"undefined"!=typeof window&&"object"==typeof window.crypto&&"object"==typeof window.crypto.subtle&&"function"==typeof window.crypto.subtle[a]}function j(a){return"undefined"!=typeof window&&"object"==typeof window.msCrypto&&"object"==typeof window.msCrypto.subtle&&"function"==typeof window.msCrypto.subtle[a];
}function k(a){for(var b=l.util.hexToBytes(a.toString(16)),c=new Uint8Array(b.length),d=0;d<b.length;++d)c[d]=b.charCodeAt(d);return c}var l=c(0);if(c(3),c(13),c(6),c(23),c(27),c(2),c(1),"undefined"==typeof m)var m=l.jsbn.BigInteger;var n=l.asn1;l.pki=l.pki||{},a.exports=l.pki.rsa=l.rsa=l.rsa||{};var o=l.pki,p=[6,4,2,4,2,4,6,2],q={name:"PrivateKeyInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},r={name:"RSAPrivateKey",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},s={name:"RSAPublicKey",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:n.Class.UNIVERSAL,type:n.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},t=l.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:n.Class.UNIVERSAL,type:n.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:n.Class.UNIVERSAL,type:n.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:n.Class.UNIVERSAL,type:n.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},u=function(a){var b;if(!(a.algorithm in o.oids)){var c=new Error("Unknown message digest algorithm.");throw c.algorithm=a.algorithm,c}b=o.oids[a.algorithm];var d=n.oidToDer(b).getBytes(),e=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]),f=n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[]);f.value.push(n.create(n.Class.UNIVERSAL,n.Type.OID,!1,d)),f.value.push(n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,""));var g=n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,a.digest().getBytes());return e.value.push(f),e.value.push(g),n.toDer(e).getBytes()},v=function(a,b,c){if(c)return a.modPow(b.e,b.n);if(!b.p||!b.q)return a.modPow(b.d,b.n);b.dP||(b.dP=b.d.mod(b.p.subtract(m.ONE))),b.dQ||(b.dQ=b.d.mod(b.q.subtract(m.ONE))),b.qInv||(b.qInv=b.q.modInverse(b.p));var d;do d=new m(l.util.bytesToHex(l.random.getBytes(b.n.bitLength()/8)),16);while(d.compareTo(b.n)>=0||!d.gcd(b.n).equals(m.ONE));a=a.multiply(d.modPow(b.e,b.n)).mod(b.n);for(var e=a.mod(b.p).modPow(b.dP,b.p),f=a.mod(b.q).modPow(b.dQ,b.q);e.compareTo(f)<0;)e=e.add(b.p);var g=e.subtract(f).multiply(b.qInv).mod(b.p).multiply(b.q).add(f);return g=g.multiply(d.modInverse(b.n)).mod(b.n)};o.rsa.encrypt=function(a,b,c){var e,f=c,g=Math.ceil(b.n.bitLength()/8);c!==!1&&c!==!0?(f=2===c,e=d(a,b,c)):(e=l.util.createBuffer(),e.putBytes(a));for(var h=new m(e.toHex(),16),i=v(h,b,f),j=i.toString(16),k=l.util.createBuffer(),n=g-Math.ceil(j.length/2);n>0;)k.putByte(0),--n;return k.putBytes(l.util.hexToBytes(j)),k.getBytes()},o.rsa.decrypt=function(a,b,c,d){var f=Math.ceil(b.n.bitLength()/8);if(a.length!==f){var g=new Error("Encrypted message length is invalid.");throw g.length=a.length,g.expected=f,g}var h=new m(l.util.createBuffer(a).toHex(),16);if(h.compareTo(b.n)>=0)throw new Error("Encrypted message is invalid.");for(var i=v(h,b,c),j=i.toString(16),k=l.util.createBuffer(),n=f-Math.ceil(j.length/2);n>0;)k.putByte(0),--n;return k.putBytes(l.util.hexToBytes(j)),d!==!1?e(k.getBytes(),b,c):k.getBytes()},o.rsa.createKeyPairGenerationState=function(a,b,c){"string"==typeof a&&(a=parseInt(a,10)),a=a||2048,c=c||{};var d,e=c.prng||l.random,f={nextBytes:function(a){for(var b=e.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=b.charCodeAt(c)}},g=c.algorithm||"PRIMEINC";if("PRIMEINC"!==g)throw new Error("Invalid key generation algorithm: "+g);return d={algorithm:g,state:0,bits:a,rng:f,eInt:b||65537,e:new m(null),p:null,q:null,qBits:a>>1,pBits:a-(a>>1),pqState:0,num:null,keys:null},d.e.fromInt(d.eInt),d},o.rsa.stepKeyPairGenerationState=function(a,b){"algorithm"in a||(a.algorithm="PRIMEINC");var c=new m(null);c.fromInt(30);for(var d,e=0,f=function(a,b){return a|b},g=+new Date,i=0;null===a.keys&&(0>=b||b>i);){if(0===a.state){var j=null===a.p?a.pBits:a.qBits,k=j-1;0===a.pqState?(a.num=new m(j,a.rng),a.num.testBit(k)||a.num.bitwiseTo(m.ONE.shiftLeft(k),f,a.num),a.num.dAddOffset(31-a.num.mod(c).byteValue(),0),e=0,++a.pqState):1===a.pqState?a.num.bitLength()>j?a.pqState=0:a.num.isProbablePrime(h(a.num.bitLength()))?++a.pqState:a.num.dAddOffset(p[e++%8],0):2===a.pqState?a.pqState=0===a.num.subtract(m.ONE).gcd(a.e).compareTo(m.ONE)?3:0:3===a.pqState&&(a.pqState=0,null===a.p?a.p=a.num:a.q=a.num,null!==a.p&&null!==a.q&&++a.state,a.num=null)}else if(1===a.state)a.p.compareTo(a.q)<0&&(a.num=a.p,a.p=a.q,a.q=a.num),++a.state;else if(2===a.state)a.p1=a.p.subtract(m.ONE),a.q1=a.q.subtract(m.ONE),a.phi=a.p1.multiply(a.q1),++a.state;else if(3===a.state)0===a.phi.gcd(a.e).compareTo(m.ONE)?++a.state:(a.p=null,a.q=null,a.state=0);else if(4===a.state)a.n=a.p.multiply(a.q),a.n.bitLength()===a.bits?++a.state:(a.q=null,a.state=0);else if(5===a.state){var l=a.e.modInverse(a.phi);a.keys={privateKey:o.rsa.setPrivateKey(a.n,a.e,l,a.p,a.q,l.mod(a.p1),l.mod(a.q1),a.q.modInverse(a.p)),publicKey:o.rsa.setPublicKey(a.n,a.e)}}d=+new Date,i+=d-g,g=d}return null!==a.keys},o.rsa.generateKeyPair=function(a,b,c,d){if(1===arguments.length?"object"==typeof a?(c=a,a=void 0):"function"==typeof a&&(d=a,a=void 0):2===arguments.length?"number"==typeof a?"function"==typeof b?(d=b,b=void 0):"number"!=typeof b&&(c=b,b=void 0):(c=a,d=b,a=void 0,b=void 0):3===arguments.length&&("number"==typeof b?"function"==typeof c&&(d=c,c=void 0):(d=c,c=b,b=void 0)),c=c||{},void 0===a&&(a=c.bits||2048),void 0===b&&(b=c.e||65537),!l.options.usePureJavaScript&&d&&a>=256&&16384>=a&&(65537===b||3===b)){if(i("generateKey")&&i("exportKey"))return window.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:a,publicExponent:k(b),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(a){return window.crypto.subtle.exportKey("pkcs8",a.privateKey)}).then(void 0,function(a){d(a)}).then(function(a){if(a){var b=o.privateKeyFromAsn1(n.fromDer(l.util.createBuffer(a)));d(null,{privateKey:b,publicKey:o.setRsaPublicKey(b.n,b.e)})}});if(j("generateKey")&&j("exportKey")){var e=window.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:a,publicExponent:k(b),hash:{name:"SHA-256"}},!0,["sign","verify"]);return e.oncomplete=function(a){var b=a.target.result,c=window.msCrypto.subtle.exportKey("pkcs8",b.privateKey);c.oncomplete=function(a){var b=a.target.result,c=o.privateKeyFromAsn1(n.fromDer(l.util.createBuffer(b)));d(null,{privateKey:c,publicKey:o.setRsaPublicKey(c.n,c.e)})},c.onerror=function(a){d(a)}},void(e.onerror=function(a){d(a)})}}var g=o.rsa.createKeyPairGenerationState(a,b,c);return d?void f(g,c,d):(o.rsa.stepKeyPairGenerationState(g,0),g.keys)},o.setRsaPublicKey=o.rsa.setPublicKey=function(a,b){var c={n:a,e:b};return c.encrypt=function(a,b,e){if("string"==typeof b?b=b.toUpperCase():void 0===b&&(b="RSAES-PKCS1-V1_5"),"RSAES-PKCS1-V1_5"===b)b={encode:function(a,b,c){return d(a,b,2).getBytes()}};else if("RSA-OAEP"===b||"RSAES-OAEP"===b)b={encode:function(a,b){return l.pkcs1.encode_rsa_oaep(b,a,e)}};else if(-1!==["RAW","NONE","NULL",null].indexOf(b))b={encode:function(a){return a}};else if("string"==typeof b)throw new Error('Unsupported encryption scheme: "'+b+'".');var f=b.encode(a,c,!0);return o.rsa.encrypt(f,c,!0)},c.verify=function(a,b,d){"string"==typeof d?d=d.toUpperCase():void 0===d&&(d="RSASSA-PKCS1-V1_5"),"RSASSA-PKCS1-V1_5"===d?d={verify:function(a,b){b=e(b,c,!0);var d=n.fromDer(b);return a===d.value[1].value}}:("NONE"===d||"NULL"===d||null===d)&&(d={verify:function(a,b){return b=e(b,c,!0),a===b}});var f=o.rsa.decrypt(b,c,!0,!1);return d.verify(a,f,c.n.bitLength())},c},o.setRsaPrivateKey=o.rsa.setPrivateKey=function(a,b,c,d,f,g,h,i){var j={n:a,e:b,d:c,p:d,q:f,dP:g,dQ:h,qInv:i};return j.decrypt=function(a,b,c){"string"==typeof b?b=b.toUpperCase():void 0===b&&(b="RSAES-PKCS1-V1_5");var d=o.rsa.decrypt(a,j,!1,!1);if("RSAES-PKCS1-V1_5"===b)b={decode:e};else if("RSA-OAEP"===b||"RSAES-OAEP"===b)b={decode:function(a,b){return l.pkcs1.decode_rsa_oaep(b,a,c)}};else{if(-1===["RAW","NONE","NULL",null].indexOf(b))throw new Error('Unsupported encryption scheme: "'+b+'".');b={decode:function(a){return a}}}return b.decode(d,j,!1)},j.sign=function(a,b){var c=!1;"string"==typeof b&&(b=b.toUpperCase()),void 0===b||"RSASSA-PKCS1-V1_5"===b?(b={encode:u},c=1):("NONE"===b||"NULL"===b||null===b)&&(b={encode:function(){return a}},c=1);var d=b.encode(a,j.n.bitLength());return o.rsa.encrypt(d,j,c)},j},o.wrapRsaPrivateKey=function(a){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(0).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(o.oids.rsaEncryption).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]),n.create(n.Class.UNIVERSAL,n.Type.OCTETSTRING,!1,n.toDer(a).getBytes())])},o.privateKeyFromAsn1=function(a){var b={},c=[];if(n.validate(a,q,b,c)&&(a=n.fromDer(l.util.createBuffer(b.privateKey))),b={},c=[],!n.validate(a,r,b,c)){var d=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw d.errors=c,d}var e,f,g,h,i,j,k,p;return e=l.util.createBuffer(b.privateKeyModulus).toHex(),f=l.util.createBuffer(b.privateKeyPublicExponent).toHex(),g=l.util.createBuffer(b.privateKeyPrivateExponent).toHex(),h=l.util.createBuffer(b.privateKeyPrime1).toHex(),i=l.util.createBuffer(b.privateKeyPrime2).toHex(),j=l.util.createBuffer(b.privateKeyExponent1).toHex(),k=l.util.createBuffer(b.privateKeyExponent2).toHex(),p=l.util.createBuffer(b.privateKeyCoefficient).toHex(),o.setRsaPrivateKey(new m(e,16),new m(f,16),new m(g,16),new m(h,16),new m(i,16),new m(j,16),new m(k,16),new m(p,16))},o.privateKeyToAsn1=o.privateKeyToRSAPrivateKey=function(a){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,n.integerToDer(0).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,g(a.n)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,g(a.e)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,g(a.d)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,g(a.p)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,g(a.q)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,g(a.dP)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,g(a.dQ)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,g(a.qInv))])},o.publicKeyFromAsn1=function(a){var b={},c=[];if(n.validate(a,t,b,c)){var d=n.derToOid(b.publicKeyOid);if(d!==o.oids.rsaEncryption){var e=new Error("Cannot read public key. Unknown OID.");throw e.oid=d,e}a=b.rsaPublicKey}if(c=[],!n.validate(a,s,b,c)){var e=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw e.errors=c,e}var f=l.util.createBuffer(b.publicKeyModulus).toHex(),g=l.util.createBuffer(b.publicKeyExponent).toHex();return o.setRsaPublicKey(new m(f,16),new m(g,16))},o.publicKeyToAsn1=o.publicKeyToSubjectPublicKeyInfo=function(a){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.OID,!1,n.oidToDer(o.oids.rsaEncryption).getBytes()),n.create(n.Class.UNIVERSAL,n.Type.NULL,!1,"")]),n.create(n.Class.UNIVERSAL,n.Type.BITSTRING,!1,[o.publicKeyToRSAPublicKey(a)])])},o.publicKeyToRSAPublicKey=function(a){return n.create(n.Class.UNIVERSAL,n.Type.SEQUENCE,!0,[n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,g(a.n)),n.create(n.Class.UNIVERSAL,n.Type.INTEGER,!1,g(a.e))])}},function(a,b,c){var d=c(0);c(1),a.exports=d.cipher=d.cipher||{},d.cipher.algorithms=d.cipher.algorithms||{},d.cipher.createCipher=function(a,b){var c=a;if("string"==typeof c&&(c=d.cipher.getAlgorithm(c),c&&(c=c())),!c)throw new Error("Unsupported algorithm: "+a);return new d.cipher.BlockCipher({algorithm:c,key:b,decrypt:!1})},d.cipher.createDecipher=function(a,b){var c=a;if("string"==typeof c&&(c=d.cipher.getAlgorithm(c),c&&(c=c())),!c)throw new Error("Unsupported algorithm: "+a);return new d.cipher.BlockCipher({algorithm:c,key:b,decrypt:!0})},d.cipher.registerAlgorithm=function(a,b){a=a.toUpperCase(),d.cipher.algorithms[a]=b},d.cipher.getAlgorithm=function(a){return a=a.toUpperCase(),a in d.cipher.algorithms?d.cipher.algorithms[a]:null};var e=d.cipher.BlockCipher=function(a){this.algorithm=a.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=a.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=a.decrypt,this.algorithm.initialize(a)};e.prototype.start=function(a){a=a||{};var b={};for(var c in a)b[c]=a[c];b.decrypt=this._decrypt,this._finish=!1,this._input=d.util.createBuffer(),this.output=a.output||d.util.createBuffer(),this.mode.start(b)},e.prototype.update=function(a){for(a&&this._input.putBuffer(a);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()},e.prototype.finish=function(a){!a||"ECB"!==this.mode.name&&"CBC"!==this.mode.name||(this.mode.pad=function(b){return a(this.blockSize,b,!1)},this.mode.unpad=function(b){return a(this.blockSize,b,!0)});var b={};return b.decrypt=this._decrypt,b.overflow=this._input.length()%this.blockSize,this._decrypt||!this.mode.pad||this.mode.pad(this._input,b)?(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,b)?!1:this.mode.afterFinish&&!this.mode.afterFinish(this.output,b)?!1:!0):!1}},function(a,b,c){function d(a,b,c){this.data=[],null!=a&&("number"==typeof a?this.fromNumber(a,b,c):null==b&&"string"!=typeof a?this.fromString(a,256):this.fromString(a,b))}function e(){return new d(null)}function f(a,b,c,d,e,f){for(;--f>=0;){var g=b*this.data[a++]+c.data[d]+e;e=Math.floor(g/67108864),c.data[d++]=67108863&g}return e}function g(a,b,c,d,e,f){for(var g=32767&b,h=b>>15;--f>=0;){var i=32767&this.data[a],j=this.data[a++]>>15,k=h*i+j*g;i=g*i+((32767&k)<<15)+c.data[d]+(1073741823&e),e=(i>>>30)+(k>>>15)+h*j+(e>>>30),c.data[d++]=1073741823&i}return e}function h(a,b,c,d,e,f){for(var g=16383&b,h=b>>14;--f>=0;){var i=16383&this.data[a],j=this.data[a++]>>14,k=h*i+j*g;i=g*i+((16383&k)<<14)+c.data[d]+e,e=(i>>28)+(k>>14)+h*j,c.data[d++]=268435455&i}return e}function i(a){return ib.charAt(a)}function j(a,b){var c=jb[a.charCodeAt(b)];return null==c?-1:c}function k(a){for(var b=this.t-1;b>=0;--b)a.data[b]=this.data[b];a.t=this.t,a.s=this.s}function l(a){this.t=1,this.s=0>a?-1:0,a>0?this.data[0]=a:-1>a?this.data[0]=a+this.DV:this.t=0}function m(a){var b=e();return b.fromInt(a),b}function n(a,b){var c;if(16==b)c=4;else if(8==b)c=3;else if(256==b)c=8;else if(2==b)c=1;else if(32==b)c=5;else{if(4!=b)return void this.fromRadix(a,b);c=2}this.t=0,this.s=0;for(var e=a.length,f=!1,g=0;--e>=0;){var h=8==c?255&a[e]:j(a,e);0>h?"-"==a.charAt(e)&&(f=!0):(f=!1,0==g?this.data[this.t++]=h:g+c>this.DB?(this.data[this.t-1]|=(h&(1<<this.DB-g)-1)<<g,this.data[this.t++]=h>>this.DB-g):this.data[this.t-1]|=h<<g,g+=c,g>=this.DB&&(g-=this.DB))}8==c&&0!=(128&a[0])&&(this.s=-1,g>0&&(this.data[this.t-1]|=(1<<this.DB-g)-1<<g)),this.clamp(),f&&d.ZERO.subTo(this,this)}function o(){for(var a=this.s&this.DM;this.t>0&&this.data[this.t-1]==a;)--this.t}function p(a){if(this.s<0)return"-"+this.negate().toString(a);var b;if(16==a)b=4;else if(8==a)b=3;else if(2==a)b=1;else if(32==a)b=5;else{if(4!=a)return this.toRadix(a);b=2}var c,d=(1<<b)-1,e=!1,f="",g=this.t,h=this.DB-g*this.DB%b;if(g-->0)for(h<this.DB&&(c=this.data[g]>>h)>0&&(e=!0,f=i(c));g>=0;)b>h?(c=(this.data[g]&(1<<h)-1)<<b-h,c|=this.data[--g]>>(h+=this.DB-b)):(c=this.data[g]>>(h-=b)&d,0>=h&&(h+=this.DB,--g)),c>0&&(e=!0),e&&(f+=i(c));return e?f:"0"}function q(){var a=e();return d.ZERO.subTo(this,a),a}function r(){return this.s<0?this.negate():this}function s(a){var b=this.s-a.s;if(0!=b)return b;var c=this.t;if(b=c-a.t,0!=b)return this.s<0?-b:b;for(;--c>=0;)if(0!=(b=this.data[c]-a.data[c]))return b;return 0}function t(a){var b,c=1;return 0!=(b=a>>>16)&&(a=b,c+=16),0!=(b=a>>8)&&(a=b,c+=8),0!=(b=a>>4)&&(a=b,c+=4),0!=(b=a>>2)&&(a=b,c+=2),0!=(b=a>>1)&&(a=b,c+=1),c}function u(){return this.t<=0?0:this.DB*(this.t-1)+t(this.data[this.t-1]^this.s&this.DM)}function v(a,b){var c;for(c=this.t-1;c>=0;--c)b.data[c+a]=this.data[c];for(c=a-1;c>=0;--c)b.data[c]=0;b.t=this.t+a,b.s=this.s}function w(a,b){for(var c=a;c<this.t;++c)b.data[c-a]=this.data[c];b.t=Math.max(this.t-a,0),b.s=this.s}function x(a,b){var c,d=a%this.DB,e=this.DB-d,f=(1<<e)-1,g=Math.floor(a/this.DB),h=this.s<<d&this.DM;for(c=this.t-1;c>=0;--c)b.data[c+g+1]=this.data[c]>>e|h,h=(this.data[c]&f)<<d;for(c=g-1;c>=0;--c)b.data[c]=0;b.data[g]=h,b.t=this.t+g+1,b.s=this.s,b.clamp()}function y(a,b){b.s=this.s;var c=Math.floor(a/this.DB);if(c>=this.t)return void(b.t=0);var d=a%this.DB,e=this.DB-d,f=(1<<d)-1;b.data[0]=this.data[c]>>d;for(var g=c+1;g<this.t;++g)b.data[g-c-1]|=(this.data[g]&f)<<e,b.data[g-c]=this.data[g]>>d;d>0&&(b.data[this.t-c-1]|=(this.s&f)<<e),b.t=this.t-c,b.clamp()}function z(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this.data[c]-a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d-=a.s;c<this.t;)d+=this.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d-=a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d-=a.s}b.s=0>d?-1:0,-1>d?b.data[c++]=this.DV+d:d>0&&(b.data[c++]=d),b.t=c,b.clamp()}function A(a,b){var c=this.abs(),e=a.abs(),f=c.t;for(b.t=f+e.t;--f>=0;)b.data[f]=0;for(f=0;f<e.t;++f)b.data[f+c.t]=c.am(0,e.data[f],b,f,0,c.t);b.s=0,b.clamp(),this.s!=a.s&&d.ZERO.subTo(b,b)}function B(a){for(var b=this.abs(),c=a.t=2*b.t;--c>=0;)a.data[c]=0;for(c=0;c<b.t-1;++c){var d=b.am(c,b.data[c],a,2*c,0,1);(a.data[c+b.t]+=b.am(c+1,2*b.data[c],a,2*c+1,d,b.t-c-1))>=b.DV&&(a.data[c+b.t]-=b.DV,a.data[c+b.t+1]=1)}a.t>0&&(a.data[a.t-1]+=b.am(c,b.data[c],a,2*c,0,1)),a.s=0,a.clamp()}function C(a,b,c){var f=a.abs();if(!(f.t<=0)){var g=this.abs();if(g.t<f.t)return null!=b&&b.fromInt(0),void(null!=c&&this.copyTo(c));null==c&&(c=e());var h=e(),i=this.s,j=a.s,k=this.DB-t(f.data[f.t-1]);k>0?(f.lShiftTo(k,h),g.lShiftTo(k,c)):(f.copyTo(h),g.copyTo(c));var l=h.t,m=h.data[l-1];if(0!=m){var n=m*(1<<this.F1)+(l>1?h.data[l-2]>>this.F2:0),o=this.FV/n,p=(1<<this.F1)/n,q=1<<this.F2,r=c.t,s=r-l,u=null==b?e():b;for(h.dlShiftTo(s,u),c.compareTo(u)>=0&&(c.data[c.t++]=1,c.subTo(u,c)),d.ONE.dlShiftTo(l,u),u.subTo(h,h);h.t<l;)h.data[h.t++]=0;for(;--s>=0;){var v=c.data[--r]==m?this.DM:Math.floor(c.data[r]*o+(c.data[r-1]+q)*p);if((c.data[r]+=h.am(0,v,c,s,0,l))<v)for(h.dlShiftTo(s,u),c.subTo(u,c);c.data[r]<--v;)c.subTo(u,c)}null!=b&&(c.drShiftTo(l,b),i!=j&&d.ZERO.subTo(b,b)),c.t=l,c.clamp(),k>0&&c.rShiftTo(k,c),0>i&&d.ZERO.subTo(c,c)}}}function D(a){var b=e();return this.abs().divRemTo(a,null,b),this.s<0&&b.compareTo(d.ZERO)>0&&a.subTo(b,b),b}function E(a){this.m=a}function F(a){return a.s<0||a.compareTo(this.m)>=0?a.mod(this.m):a}function G(a){return a}function H(a){a.divRemTo(this.m,null,a)}function I(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function J(a,b){a.squareTo(b),this.reduce(b)}function K(){if(this.t<1)return 0;var a=this.data[0];if(0==(1&a))return 0;var b=3&a;return b=b*(2-(15&a)*b)&15,b=b*(2-(255&a)*b)&255,b=b*(2-((65535&a)*b&65535))&65535,b=b*(2-a*b%this.DV)%this.DV,b>0?this.DV-b:-b}function L(a){this.m=a,this.mp=a.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<a.DB-15)-1,this.mt2=2*a.t}function M(a){var b=e();return a.abs().dlShiftTo(this.m.t,b),b.divRemTo(this.m,null,b),a.s<0&&b.compareTo(d.ZERO)>0&&this.m.subTo(b,b),b}function N(a){var b=e();return a.copyTo(b),this.reduce(b),b}function O(a){for(;a.t<=this.mt2;)a.data[a.t++]=0;for(var b=0;b<this.m.t;++b){var c=32767&a.data[b],d=c*this.mpl+((c*this.mph+(a.data[b]>>15)*this.mpl&this.um)<<15)&a.DM;for(c=b+this.m.t,a.data[c]+=this.m.am(0,d,a,b,0,this.m.t);a.data[c]>=a.DV;)a.data[c]-=a.DV,a.data[++c]++}a.clamp(),a.drShiftTo(this.m.t,a),a.compareTo(this.m)>=0&&a.subTo(this.m,a)}function P(a,b){a.squareTo(b),this.reduce(b)}function Q(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function R(){return 0==(this.t>0?1&this.data[0]:this.s)}function S(a,b){if(a>4294967295||1>a)return d.ONE;var c=e(),f=e(),g=b.convert(this),h=t(a)-1;for(g.copyTo(c);--h>=0;)if(b.sqrTo(c,f),(a&1<<h)>0)b.mulTo(f,g,c);else{var i=c;c=f,f=i}return b.revert(c)}function T(a,b){var c;return c=256>a||b.isEven()?new E(b):new L(b),this.exp(a,c)}function U(){var a=e();return this.copyTo(a),a}function V(){if(this.s<0){if(1==this.t)return this.data[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this.data[0];if(0==this.t)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}function W(){return 0==this.t?this.s:this.data[0]<<24>>24}function X(){return 0==this.t?this.s:this.data[0]<<16>>16}function Y(a){return Math.floor(Math.LN2*this.DB/Math.log(a))}function Z(){return this.s<0?-1:this.t<=0||1==this.t&&this.data[0]<=0?0:1}function $(a){if(null==a&&(a=10),0==this.signum()||2>a||a>36)return"0";var b=this.chunkSize(a),c=Math.pow(a,b),d=m(c),f=e(),g=e(),h="";for(this.divRemTo(d,f,g);f.signum()>0;)h=(c+g.intValue()).toString(a).substr(1)+h,f.divRemTo(d,f,g);return g.intValue().toString(a)+h}function _(a,b){this.fromInt(0),null==b&&(b=10);for(var c=this.chunkSize(b),e=Math.pow(b,c),f=!1,g=0,h=0,i=0;i<a.length;++i){var k=j(a,i);0>k?"-"==a.charAt(i)&&0==this.signum()&&(f=!0):(h=b*h+k,++g>=c&&(this.dMultiply(e),this.dAddOffset(h,0),g=0,h=0))}g>0&&(this.dMultiply(Math.pow(b,g)),this.dAddOffset(h,0)),f&&d.ZERO.subTo(this,this)}function aa(a,b,c){if("number"==typeof b)if(2>a)this.fromInt(1);else for(this.fromNumber(a,c),this.testBit(a-1)||this.bitwiseTo(d.ONE.shiftLeft(a-1),ia,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(b);)this.dAddOffset(2,0),this.bitLength()>a&&this.subTo(d.ONE.shiftLeft(a-1),this);else{var e=new Array,f=7&a;e.length=(a>>3)+1,b.nextBytes(e),f>0?e[0]&=(1<<f)-1:e[0]=0,this.fromString(e,256)}}function ba(){var a=this.t,b=new Array;b[0]=this.s;var c,d=this.DB-a*this.DB%8,e=0;if(a-->0)for(d<this.DB&&(c=this.data[a]>>d)!=(this.s&this.DM)>>d&&(b[e++]=c|this.s<<this.DB-d);a>=0;)8>d?(c=(this.data[a]&(1<<d)-1)<<8-d,c|=this.data[--a]>>(d+=this.DB-8)):(c=this.data[a]>>(d-=8)&255,0>=d&&(d+=this.DB,--a)),0!=(128&c)&&(c|=-256),0==e&&(128&this.s)!=(128&c)&&++e,(e>0||c!=this.s)&&(b[e++]=c);return b}function ca(a){return 0==this.compareTo(a)}function da(a){return this.compareTo(a)<0?this:a}function ea(a){return this.compareTo(a)>0?this:a}function fa(a,b,c){var d,e,f=Math.min(a.t,this.t);for(d=0;f>d;++d)c.data[d]=b(this.data[d],a.data[d]);if(a.t<this.t){for(e=a.s&this.DM,d=f;d<this.t;++d)c.data[d]=b(this.data[d],e);c.t=this.t}else{for(e=this.s&this.DM,d=f;d<a.t;++d)c.data[d]=b(e,a.data[d]);c.t=a.t}c.s=b(this.s,a.s),c.clamp()}function ga(a,b){return a&b}function ha(a){var b=e();return this.bitwiseTo(a,ga,b),b}function ia(a,b){return a|b}function ja(a){var b=e();return this.bitwiseTo(a,ia,b),b}function ka(a,b){return a^b}function la(a){var b=e();return this.bitwiseTo(a,ka,b),b}function ma(a,b){return a&~b}function na(a){var b=e();return this.bitwiseTo(a,ma,b),b}function oa(){for(var a=e(),b=0;b<this.t;++b)a.data[b]=this.DM&~this.data[b];return a.t=this.t,a.s=~this.s,a}function pa(a){var b=e();return 0>a?this.rShiftTo(-a,b):this.lShiftTo(a,b),b}function qa(a){var b=e();return 0>a?this.lShiftTo(-a,b):this.rShiftTo(a,b),b}function ra(a){if(0==a)return-1;var b=0;return 0==(65535&a)&&(a>>=16,b+=16),0==(255&a)&&(a>>=8,b+=8),0==(15&a)&&(a>>=4,b+=4),0==(3&a)&&(a>>=2,b+=2),0==(1&a)&&++b,b}function sa(){for(var a=0;a<this.t;++a)if(0!=this.data[a])return a*this.DB+ra(this.data[a]);return this.s<0?this.t*this.DB:-1}function ta(a){for(var b=0;0!=a;)a&=a-1,++b;return b}function ua(){for(var a=0,b=this.s&this.DM,c=0;c<this.t;++c)a+=ta(this.data[c]^b);return a}function va(a){var b=Math.floor(a/this.DB);return b>=this.t?0!=this.s:0!=(this.data[b]&1<<a%this.DB)}function wa(a,b){var c=d.ONE.shiftLeft(a);return this.bitwiseTo(c,b,c),c}function xa(a){return this.changeBit(a,ia)}function ya(a){return this.changeBit(a,ma)}function za(a){return this.changeBit(a,ka)}function Aa(a,b){for(var c=0,d=0,e=Math.min(a.t,this.t);e>c;)d+=this.data[c]+a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;if(a.t<this.t){for(d+=a.s;c<this.t;)d+=this.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=this.s}else{for(d+=this.s;c<a.t;)d+=a.data[c],b.data[c++]=d&this.DM,d>>=this.DB;d+=a.s}b.s=0>d?-1:0,d>0?b.data[c++]=d:-1>d&&(b.data[c++]=this.DV+d),b.t=c,b.clamp()}function Ba(a){var b=e();return this.addTo(a,b),b}function Ca(a){var b=e();return this.subTo(a,b),b}function Da(a){var b=e();return this.multiplyTo(a,b),b}function Ea(a){var b=e();return this.divRemTo(a,b,null),b}function Fa(a){var b=e();return this.divRemTo(a,null,b),b}function Ga(a){var b=e(),c=e();return this.divRemTo(a,b,c),new Array(b,c)}function Ha(a){this.data[this.t]=this.am(0,a-1,this,0,0,this.t),++this.t,this.clamp()}function Ia(a,b){if(0!=a){for(;this.t<=b;)this.data[this.t++]=0;for(this.data[b]+=a;this.data[b]>=this.DV;)this.data[b]-=this.DV,++b>=this.t&&(this.data[this.t++]=0),++this.data[b]}}function Ja(){}function Ka(a){return a}function La(a,b,c){a.multiplyTo(b,c)}function Ma(a,b){a.squareTo(b)}function Na(a){return this.exp(a,new Ja)}function Oa(a,b,c){var d=Math.min(this.t+a.t,b);for(c.s=0,c.t=d;d>0;)c.data[--d]=0;var e;for(e=c.t-this.t;e>d;++d)c.data[d+this.t]=this.am(0,a.data[d],c,d,0,this.t);for(e=Math.min(a.t,b);e>d;++d)this.am(0,a.data[d],c,d,0,b-d);c.clamp()}function Pa(a,b,c){--b;var d=c.t=this.t+a.t-b;for(c.s=0;--d>=0;)c.data[d]=0;for(d=Math.max(b-this.t,0);d<a.t;++d)c.data[this.t+d-b]=this.am(b-d,a.data[d],c,0,0,this.t+d-b);c.clamp(),c.drShiftTo(1,c)}function Qa(a){this.r2=e(),this.q3=e(),d.ONE.dlShiftTo(2*a.t,this.r2),this.mu=this.r2.divide(a),this.m=a}function Ra(a){if(a.s<0||a.t>2*this.m.t)return a.mod(this.m);if(a.compareTo(this.m)<0)return a;var b=e();return a.copyTo(b),this.reduce(b),b}function Sa(a){return a}function Ta(a){for(a.drShiftTo(this.m.t-1,this.r2),a.t>this.m.t+1&&(a.t=this.m.t+1,a.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);a.compareTo(this.r2)<0;)a.dAddOffset(1,this.m.t+1);for(a.subTo(this.r2,a);a.compareTo(this.m)>=0;)a.subTo(this.m,a)}function Ua(a,b){a.squareTo(b),this.reduce(b)}function Va(a,b,c){a.multiplyTo(b,c),this.reduce(c)}function Wa(a,b){var c,d,f=a.bitLength(),g=m(1);if(0>=f)return g;c=18>f?1:48>f?3:144>f?4:768>f?5:6,d=8>f?new E(b):b.isEven()?new Qa(b):new L(b);var h=new Array,i=3,j=c-1,k=(1<<c)-1;if(h[1]=d.convert(this),c>1){var l=e();for(d.sqrTo(h[1],l);k>=i;)h[i]=e(),d.mulTo(l,h[i-2],h[i]),i+=2}var n,o,p=a.t-1,q=!0,r=e();for(f=t(a.data[p])-1;p>=0;){for(f>=j?n=a.data[p]>>f-j&k:(n=(a.data[p]&(1<<f+1)-1)<<j-f,p>0&&(n|=a.data[p-1]>>this.DB+f-j)),i=c;0==(1&n);)n>>=1,--i;if((f-=i)<0&&(f+=this.DB,--p),q)h[n].copyTo(g),q=!1;else{for(;i>1;)d.sqrTo(g,r),d.sqrTo(r,g),i-=2;i>0?d.sqrTo(g,r):(o=g,g=r,r=o),d.mulTo(r,h[n],g)}for(;p>=0&&0==(a.data[p]&1<<f);)d.sqrTo(g,r),o=g,g=r,r=o,--f<0&&(f=this.DB-1,--p)}return d.revert(g)}function Xa(a){var b=this.s<0?this.negate():this.clone(),c=a.s<0?a.negate():a.clone();if(b.compareTo(c)<0){var d=b;b=c,c=d}var e=b.getLowestSetBit(),f=c.getLowestSetBit();if(0>f)return b;for(f>e&&(f=e),f>0&&(b.rShiftTo(f,b),c.rShiftTo(f,c));b.signum()>0;)(e=b.getLowestSetBit())>0&&b.rShiftTo(e,b),(e=c.getLowestSetBit())>0&&c.rShiftTo(e,c),b.compareTo(c)>=0?(b.subTo(c,b),b.rShiftTo(1,b)):(c.subTo(b,c),c.rShiftTo(1,c));return f>0&&c.lShiftTo(f,c),c}function Ya(a){if(0>=a)return 0;var b=this.DV%a,c=this.s<0?a-1:0;if(this.t>0)if(0==b)c=this.data[0]%a;else for(var d=this.t-1;d>=0;--d)c=(b*c+this.data[d])%a;return c}function Za(a){var b=a.isEven();if(this.isEven()&&b||0==a.signum())return d.ZERO;for(var c=a.clone(),e=this.clone(),f=m(1),g=m(0),h=m(0),i=m(1);0!=c.signum();){for(;c.isEven();)c.rShiftTo(1,c),b?(f.isEven()&&g.isEven()||(f.addTo(this,f),g.subTo(a,g)),f.rShiftTo(1,f)):g.isEven()||g.subTo(a,g),g.rShiftTo(1,g);for(;e.isEven();)e.rShiftTo(1,e),b?(h.isEven()&&i.isEven()||(h.addTo(this,h),i.subTo(a,i)),h.rShiftTo(1,h)):i.isEven()||i.subTo(a,i),i.rShiftTo(1,i);c.compareTo(e)>=0?(c.subTo(e,c),b&&f.subTo(h,f),g.subTo(i,g)):(e.subTo(c,e),b&&h.subTo(f,h),i.subTo(g,i))}return 0!=e.compareTo(d.ONE)?d.ZERO:i.compareTo(a)>=0?i.subtract(a):i.signum()<0?(i.addTo(a,i),i.signum()<0?i.add(a):i):i}function $a(a){var b,c=this.abs();if(1==c.t&&c.data[0]<=kb[kb.length-1]){for(b=0;b<kb.length;++b)if(c.data[0]==kb[b])return!0;return!1}if(c.isEven())return!1;for(b=1;b<kb.length;){for(var d=kb[b],e=b+1;e<kb.length&&lb>d;)d*=kb[e++];for(d=c.modInt(d);e>b;)if(d%kb[b++]==0)return!1}return c.millerRabin(a)}function _a(a){var b=this.subtract(d.ONE),c=b.getLowestSetBit();if(0>=c)return!1;for(var e,f=b.shiftRight(c),g=ab(),h=0;a>h;++h){do e=new d(this.bitLength(),g);while(e.compareTo(d.ONE)<=0||e.compareTo(b)>=0);var i=e.modPow(f,this);if(0!=i.compareTo(d.ONE)&&0!=i.compareTo(b)){for(var j=1;j++<c&&0!=i.compareTo(b);)if(i=i.modPowInt(2,this),0==i.compareTo(d.ONE))return!1;if(0!=i.compareTo(b))return!1}}return!0}function ab(){return{nextBytes:function(a){for(var b=0;b<a.length;++b)a[b]=Math.floor(256*Math.random())}}}var bb=c(0);a.exports=bb.jsbn=bb.jsbn||{};var cb,db=0xdeadbeefcafe,eb=15715070==(16777215&db);bb.jsbn.BigInteger=d,"undefined"==typeof navigator?(d.prototype.am=h,cb=28):eb&&"Microsoft Internet Explorer"==navigator.appName?(d.prototype.am=g,cb=30):eb&&"Netscape"!=navigator.appName?(d.prototype.am=f,cb=26):(d.prototype.am=h,cb=28),d.prototype.DB=cb,d.prototype.DM=(1<<cb)-1,d.prototype.DV=1<<cb;var fb=52;d.prototype.FV=Math.pow(2,fb),d.prototype.F1=fb-cb,d.prototype.F2=2*cb-fb;var gb,hb,ib="0123456789abcdefghijklmnopqrstuvwxyz",jb=new Array;for(gb="0".charCodeAt(0),hb=0;9>=hb;++hb)jb[gb++]=hb;for(gb="a".charCodeAt(0),hb=10;36>hb;++hb)jb[gb++]=hb;for(gb="A".charCodeAt(0),hb=10;36>hb;++hb)jb[gb++]=hb;E.prototype.convert=F,E.prototype.revert=G,E.prototype.reduce=H,E.prototype.mulTo=I,E.prototype.sqrTo=J,L.prototype.convert=M,L.prototype.revert=N,L.prototype.reduce=O,L.prototype.mulTo=Q,L.prototype.sqrTo=P,d.prototype.copyTo=k,d.prototype.fromInt=l,d.prototype.fromString=n,d.prototype.clamp=o,d.prototype.dlShiftTo=v,d.prototype.drShiftTo=w,d.prototype.lShiftTo=x,d.prototype.rShiftTo=y,d.prototype.subTo=z,
d.prototype.multiplyTo=A,d.prototype.squareTo=B,d.prototype.divRemTo=C,d.prototype.invDigit=K,d.prototype.isEven=R,d.prototype.exp=S,d.prototype.toString=p,d.prototype.negate=q,d.prototype.abs=r,d.prototype.compareTo=s,d.prototype.bitLength=u,d.prototype.mod=D,d.prototype.modPowInt=T,d.ZERO=m(0),d.ONE=m(1),Ja.prototype.convert=Ka,Ja.prototype.revert=Ka,Ja.prototype.mulTo=La,Ja.prototype.sqrTo=Ma,Qa.prototype.convert=Ra,Qa.prototype.revert=Sa,Qa.prototype.reduce=Ta,Qa.prototype.mulTo=Va,Qa.prototype.sqrTo=Ua;var kb=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],lb=(1<<26)/kb[kb.length-1];d.prototype.chunkSize=Y,d.prototype.toRadix=$,d.prototype.fromRadix=_,d.prototype.fromNumber=aa,d.prototype.bitwiseTo=fa,d.prototype.changeBit=wa,d.prototype.addTo=Aa,d.prototype.dMultiply=Ha,d.prototype.dAddOffset=Ia,d.prototype.multiplyLowerTo=Oa,d.prototype.multiplyUpperTo=Pa,d.prototype.modInt=Ya,d.prototype.millerRabin=_a,d.prototype.clone=U,d.prototype.intValue=V,d.prototype.byteValue=W,d.prototype.shortValue=X,d.prototype.signum=Z,d.prototype.toByteArray=ba,d.prototype.equals=ca,d.prototype.min=da,d.prototype.max=ea,d.prototype.and=ha,d.prototype.or=ja,d.prototype.xor=la,d.prototype.andNot=na,d.prototype.not=oa,d.prototype.shiftLeft=pa,d.prototype.shiftRight=qa,d.prototype.getLowestSetBit=sa,d.prototype.bitCount=ua,d.prototype.testBit=va,d.prototype.setBit=xa,d.prototype.clearBit=ya,d.prototype.flipBit=za,d.prototype.add=Ba,d.prototype.subtract=Ca,d.prototype.multiply=Da,d.prototype.divide=Ea,d.prototype.remainder=Fa,d.prototype.divideAndRemainder=Ga,d.prototype.modPow=Wa,d.prototype.modInverse=Za,d.prototype.pow=Na,d.prototype.gcd=Xa,d.prototype.isProbablePrime=$a},function(a,b,c){function d(){h=String.fromCharCode(128),h+=f.util.fillString(String.fromCharCode(0),64),i=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],j=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],k=new Array(64);for(var a=0;64>a;++a)k[a]=Math.floor(4294967296*Math.abs(Math.sin(a+1)));l=!0}function e(a,b,c){for(var d,e,f,g,h,l,m,n,o=c.length();o>=64;){for(e=a.h0,f=a.h1,g=a.h2,h=a.h3,n=0;16>n;++n)b[n]=c.getInt32Le(),l=h^f&(g^h),d=e+l+k[n]+b[n],m=j[n],e=h,h=g,g=f,f+=d<<m|d>>>32-m;for(;32>n;++n)l=g^h&(f^g),d=e+l+k[n]+b[i[n]],m=j[n],e=h,h=g,g=f,f+=d<<m|d>>>32-m;for(;48>n;++n)l=f^g^h,d=e+l+k[n]+b[i[n]],m=j[n],e=h,h=g,g=f,f+=d<<m|d>>>32-m;for(;64>n;++n)l=g^(f|~h),d=e+l+k[n]+b[i[n]],m=j[n],e=h,h=g,g=f,f+=d<<m|d>>>32-m;a.h0=a.h0+e|0,a.h1=a.h1+f|0,a.h2=a.h2+g|0,a.h3=a.h3+h|0,o-=64}}var f=c(0);c(4),c(1);var g=a.exports=f.md5=f.md5||{};f.md.md5=f.md.algorithms.md5=g,g.create=function(){l||d();var a=null,b=f.util.createBuffer(),c=new Array(16),g={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return g.start=function(){g.messageLength=0,g.fullMessageLength=g.messageLength64=[];for(var c=g.messageLengthSize/4,d=0;c>d;++d)g.fullMessageLength.push(0);return b=f.util.createBuffer(),a={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},g},g.start(),g.update=function(d,h){"utf8"===h&&(d=f.util.encodeUtf8(d));var i=d.length;g.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var j=g.fullMessageLength.length-1;j>=0;--j)g.fullMessageLength[j]+=i[1],i[1]=i[0]+(g.fullMessageLength[j]/4294967296>>>0),g.fullMessageLength[j]=g.fullMessageLength[j]>>>0,i[0]=i[1]/4294967296>>>0;return b.putBytes(d),e(a,c,b),(b.read>2048||0===b.length())&&b.compact(),g},g.digest=function(){var d=f.util.createBuffer();d.putBytes(b.bytes());var i=g.fullMessageLength[g.fullMessageLength.length-1]+g.messageLengthSize,j=i&g.blockLength-1;d.putBytes(h.substr(0,g.blockLength-j));for(var k,l=0,m=g.fullMessageLength.length-1;m>=0;--m)k=8*g.fullMessageLength[m]+l,l=k/4294967296>>>0,d.putInt32Le(k>>>0);var n={h0:a.h0,h1:a.h1,h2:a.h2,h3:a.h3};e(n,c,d);var o=f.util.createBuffer();return o.putInt32Le(n.h0),o.putInt32Le(n.h1),o.putInt32Le(n.h2),o.putInt32Le(n.h3),o},g};var h=null,i=null,j=null,k=null,l=!1},function(a,b,c){var d=c(0);c(8),c(4),c(1);var e,f=d.pkcs5=d.pkcs5||{};d.util.isNodejs&&!d.options.usePureJavaScript&&(e=c(32)),a.exports=d.pbkdf2=f.pbkdf2=function(a,b,c,f,g,h){function i(){return t>m?h(null,s):(o.start(null,null),o.update(b),o.update(d.util.int32ToBytes(t)),p=r=o.digest().getBytes(),u=2,void j())}function j(){return c>=u?(o.start(null,null),o.update(r),q=o.digest().getBytes(),p=d.util.xorBytes(p,q,k),r=q,++u,d.util.setImmediate(j)):(s+=m>t?p:p.substr(0,n),++t,void i())}if("function"==typeof g&&(h=g,g=null),d.util.isNodejs&&!d.options.usePureJavaScript&&e.pbkdf2&&(null===g||"object"!=typeof g)&&(e.pbkdf2Sync.length>4||!g||"sha1"===g))return"string"!=typeof g&&(g="sha1"),a=new Buffer(a,"binary"),b=new Buffer(b,"binary"),h?4===e.pbkdf2Sync.length?e.pbkdf2(a,b,c,f,function(a,b){return a?h(a):void h(null,b.toString("binary"))}):e.pbkdf2(a,b,c,f,g,function(a,b){return a?h(a):void h(null,b.toString("binary"))}):4===e.pbkdf2Sync.length?e.pbkdf2Sync(a,b,c,f).toString("binary"):e.pbkdf2Sync(a,b,c,f,g).toString("binary");if(("undefined"==typeof g||null===g)&&(g="sha1"),"string"==typeof g){if(!(g in d.md.algorithms))throw new Error("Unknown hash algorithm: "+g);g=d.md[g].create()}var k=g.digestLength;if(f>4294967295*k){var l=new Error("Derived key is too long.");if(h)return h(l);throw l}var m=Math.ceil(f/k),n=f-(m-1)*k,o=d.hmac.create();o.start(g,a);var p,q,r,s="";if(!h){for(var t=1;m>=t;++t){o.start(null,null),o.update(b),o.update(d.util.int32ToBytes(t)),p=r=o.digest().getBytes();for(var u=2;c>=u;++u)o.start(null,null),o.update(r),q=o.digest().getBytes(),p=d.util.xorBytes(p,q,k),r=q;s+=m>t?p:p.substr(0,n)}return s}var u,t=1;i()}},function(a,b,c){var d=c(0);c(2),c(1);var e=a.exports=d.pss=d.pss||{};e.create=function(a){3===arguments.length&&(a={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var b=a.md,c=a.mgf,e=b.digestLength,f=a.salt||null;"string"==typeof f&&(f=d.util.createBuffer(f));var g;if("saltLength"in a)g=a.saltLength;else{if(null===f)throw new Error("Salt length not specified or specific salt not given.");g=f.length()}if(null!==f&&f.length()!==g)throw new Error("Given salt length does not match length of given salt.");var h=a.prng||d.random,i={};return i.encode=function(a,i){var j,k=i-1,l=Math.ceil(k/8),m=a.digest().getBytes();if(e+g+2>l)throw new Error("Message is too long to encrypt.");var n;n=null===f?h.getBytesSync(g):f.bytes();var o=new d.util.ByteBuffer;o.fillWithByte(0,8),o.putBytes(m),o.putBytes(n),b.start(),b.update(o.getBytes());var p=b.digest().getBytes(),q=new d.util.ByteBuffer;q.fillWithByte(0,l-g-e-2),q.putByte(1),q.putBytes(n);var r=q.getBytes(),s=l-e-1,t=c.generate(p,s),u="";for(j=0;s>j;j++)u+=String.fromCharCode(r.charCodeAt(j)^t.charCodeAt(j));var v=65280>>8*l-k&255;return u=String.fromCharCode(u.charCodeAt(0)&~v)+u.substr(1),u+p+String.fromCharCode(188)},i.verify=function(a,f,h){var i,j=h-1,k=Math.ceil(j/8);if(f=f.substr(-k),e+g+2>k)throw new Error("Inconsistent parameters to PSS signature verification.");if(188!==f.charCodeAt(k-1))throw new Error("Encoded message does not end in 0xBC.");var l=k-e-1,m=f.substr(0,l),n=f.substr(l,e),o=65280>>8*k-j&255;if(0!==(m.charCodeAt(0)&o))throw new Error("Bits beyond keysize not zero as expected.");var p=c.generate(n,l),q="";for(i=0;l>i;i++)q+=String.fromCharCode(m.charCodeAt(i)^p.charCodeAt(i));q=String.fromCharCode(q.charCodeAt(0)&~o)+q.substr(1);var r=k-e-g-2;for(i=0;r>i;i++)if(0!==q.charCodeAt(i))throw new Error("Leftmost octets not zero as expected");if(1!==q.charCodeAt(r))throw new Error("Inconsistent PSS signature, 0x01 marker not found");var s=q.substr(-g),t=new d.util.ByteBuffer;t.fillWithByte(0,8),t.putBytes(a),t.putBytes(s),b.start(),b.update(t.getBytes());var u=b.digest().getBytes();return n===u},i}},function(a,b,c){function d(a,b){"string"==typeof b&&(b={shortName:b});for(var c,d=null,e=0;null===d&&e<a.attributes.length;++e)c=a.attributes[e],b.type&&b.type===c.type?d=c:b.name&&b.name===c.name?d=c:b.shortName&&b.shortName===c.shortName&&(d=c);return d}function e(a){for(var b,c,d=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]),e=a.attributes,f=0;f<e.length;++f){b=e[f];var g=b.value,h=k.Type.PRINTABLESTRING;"valueTagClass"in b&&(h=b.valueTagClass,h===k.Type.UTF8&&(g=j.util.encodeUtf8(g))),c=k.create(k.Class.UNIVERSAL,k.Type.SET,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(b.type).getBytes()),k.create(k.Class.UNIVERSAL,h,!1,g)])]),d.value.push(c)}return d}function f(a){for(var b,c=0;c<a.length;++c){if(b=a[c],"undefined"==typeof b.name&&(b.type&&b.type in l.oids?b.name=l.oids[b.type]:b.shortName&&b.shortName in n&&(b.name=l.oids[n[b.shortName]])),"undefined"==typeof b.type){if(!(b.name&&b.name in l.oids)){var d=new Error("Attribute type not specified.");throw d.attribute=b,d}b.type=l.oids[b.name]}if("undefined"==typeof b.shortName&&b.name&&b.name in n&&(b.shortName=n[b.name]),b.type===m.extensionRequest&&(b.valueConstructed=!0,b.valueTagClass=k.Type.SEQUENCE,!b.value&&b.extensions)){b.value=[];for(var e=0;e<b.extensions.length;++e)b.value.push(l.certificateExtensionToAsn1(g(b.extensions[e])))}if("undefined"==typeof b.value){var d=new Error("Attribute value not specified.");throw d.attribute=b,d}}}function g(a,b){if(b=b||{},"undefined"==typeof a.name&&a.id&&a.id in l.oids&&(a.name=l.oids[a.id]),"undefined"==typeof a.id){if(!(a.name&&a.name in l.oids)){var c=new Error("Extension ID not specified.");throw c.extension=a,c}a.id=l.oids[a.name]}if("undefined"!=typeof a.value)return a;if("keyUsage"===a.name){var d=0,f=0,g=0;a.digitalSignature&&(f|=128,d=7),a.nonRepudiation&&(f|=64,d=6),a.keyEncipherment&&(f|=32,d=5),a.dataEncipherment&&(f|=16,d=4),a.keyAgreement&&(f|=8,d=3),a.keyCertSign&&(f|=4,d=2),a.cRLSign&&(f|=2,d=1),a.encipherOnly&&(f|=1,d=0),a.decipherOnly&&(g|=128,d=7);var h=String.fromCharCode(d);0!==g?h+=String.fromCharCode(f)+String.fromCharCode(g):0!==f&&(h+=String.fromCharCode(f)),a.value=k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,h)}else if("basicConstraints"===a.name)a.value=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]),a.cA&&a.value.value.push(k.create(k.Class.UNIVERSAL,k.Type.BOOLEAN,!1,String.fromCharCode(255))),"pathLenConstraint"in a&&a.value.value.push(k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(a.pathLenConstraint).getBytes()));else if("extKeyUsage"===a.name){a.value=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);var i=a.value.value;for(var n in a)a[n]===!0&&(n in m?i.push(k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(m[n]).getBytes())):-1!==n.indexOf(".")&&i.push(k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(n).getBytes())))}else if("nsCertType"===a.name){var d=0,f=0;a.client&&(f|=128,d=7),a.server&&(f|=64,d=6),a.email&&(f|=32,d=5),a.objsign&&(f|=16,d=4),a.reserved&&(f|=8,d=3),a.sslCA&&(f|=4,d=2),a.emailCA&&(f|=2,d=1),a.objCA&&(f|=1,d=0);var h=String.fromCharCode(d);0!==f&&(h+=String.fromCharCode(f)),a.value=k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,h)}else if("subjectAltName"===a.name||"issuerAltName"===a.name){a.value=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);for(var o,p=0;p<a.altNames.length;++p){o=a.altNames[p];var h=o.value;if(7===o.type&&o.ip){if(h=j.util.bytesFromIP(o.ip),null===h){var c=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw c.extension=a,c}}else 8===o.type&&(h=o.oid?k.oidToDer(k.oidToDer(o.oid)):k.oidToDer(h));a.value.value.push(k.create(k.Class.CONTEXT_SPECIFIC,o.type,!1,h))}}else if("subjectKeyIdentifier"===a.name&&b.cert){var q=b.cert.generateSubjectKeyIdentifier();a.subjectKeyIdentifier=q.toHex(),a.value=k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,q.getBytes())}else if("authorityKeyIdentifier"===a.name&&b.cert){a.value=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);var i=a.value.value;if(a.keyIdentifier){var r=a.keyIdentifier===!0?b.cert.generateSubjectKeyIdentifier().getBytes():a.keyIdentifier;i.push(k.create(k.Class.CONTEXT_SPECIFIC,0,!1,r))}if(a.authorityCertIssuer){var s=[k.create(k.Class.CONTEXT_SPECIFIC,4,!0,[e(a.authorityCertIssuer===!0?b.cert.issuer:a.authorityCertIssuer)])];i.push(k.create(k.Class.CONTEXT_SPECIFIC,1,!0,s))}if(a.serialNumber){var t=j.util.hexToBytes(a.serialNumber===!0?b.cert.serialNumber:a.serialNumber);i.push(k.create(k.Class.CONTEXT_SPECIFIC,2,!1,t))}}else if("cRLDistributionPoints"===a.name){a.value=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);for(var o,i=a.value.value,u=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]),v=k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[]),p=0;p<a.altNames.length;++p){o=a.altNames[p];var h=o.value;if(7===o.type&&o.ip){if(h=j.util.bytesFromIP(o.ip),null===h){var c=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw c.extension=a,c}}else 8===o.type&&(h=o.oid?k.oidToDer(k.oidToDer(o.oid)):k.oidToDer(h));v.value.push(k.create(k.Class.CONTEXT_SPECIFIC,o.type,!1,h))}u.value.push(k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[v])),i.push(u)}if("undefined"==typeof a.value){var c=new Error("Extension value not specified.");throw c.extension=a,c}return a}function h(a,b){switch(a){case m["RSASSA-PSS"]:var c=[];return void 0!==b.hash.algorithmOid&&c.push(k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(b.hash.algorithmOid).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")])])),void 0!==b.mgf.algorithmOid&&c.push(k.create(k.Class.CONTEXT_SPECIFIC,1,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(b.mgf.algorithmOid).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(b.mgf.hash.algorithmOid).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")])])])),void 0!==b.saltLength&&c.push(k.create(k.Class.CONTEXT_SPECIFIC,2,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(b.saltLength).getBytes())])),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,c);default:return k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")}}function i(a){var b=k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[]);if(0===a.attributes.length)return b;for(var c=a.attributes,d=0;d<c.length;++d){var e=c[d],f=e.value,g=k.Type.UTF8;"valueTagClass"in e&&(g=e.valueTagClass),g===k.Type.UTF8&&(f=j.util.encodeUtf8(f));var h=!1;"valueConstructed"in e&&(h=e.valueConstructed);var i=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(e.type).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SET,!0,[k.create(k.Class.UNIVERSAL,g,h,f)])]);b.value.push(i)}return b}var j=c(0);c(5),c(3),c(10),c(4),c(37),c(6),c(7),c(16),c(11),c(1);var k=j.asn1,l=a.exports=j.pki=j.pki||{},m=l.oids,n={};n.CN=m.commonName,n.commonName="CN",n.C=m.countryName,n.countryName="C",n.L=m.localityName,n.localityName="L",n.ST=m.stateOrProvinceName,n.stateOrProvinceName="ST",n.O=m.organizationName,n.organizationName="O",n.OU=m.organizationalUnitName,n.organizationalUnitName="OU",n.E=m.emailAddress,n.emailAddress="E";var o=j.pki.rsa.publicKeyValidator,p={name:"Certificate",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:k.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:k.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:k.Class.UNIVERSAL,type:k.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:k.Class.UNIVERSAL,type:k.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:k.Class.UNIVERSAL,type:k.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:k.Class.UNIVERSAL,type:k.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},o,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:k.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:k.Class.UNIVERSAL,type:k.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:k.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:k.Class.UNIVERSAL,type:k.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:k.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:k.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:k.Class.UNIVERSAL,type:k.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},q={name:"rsapss",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:k.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:k.Class.UNIVERSAL,type:k.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:k.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:k.Class.UNIVERSAL,type:k.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:k.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:k.Class.UNIVERSAL,type:k.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:k.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:k.Class.UNIVERSAL,type:k.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},r={name:"CertificationRequestInfo",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},o,{name:"CertificationRequestInfo.attributes",tagClass:k.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:k.Class.UNIVERSAL,type:k.Type.SET,constructed:!0}]}]}]},s={name:"CertificationRequest",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[r,{name:"CertificationRequest.signatureAlgorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:k.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:k.Class.UNIVERSAL,type:k.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};l.RDNAttributesAsArray=function(a,b){for(var c,d,e,f=[],g=0;g<a.value.length;++g){c=a.value[g];for(var h=0;h<c.value.length;++h)e={},d=c.value[h],e.type=k.derToOid(d.value[0].value),e.value=d.value[1].value,e.valueTagClass=d.value[1].type,e.type in m&&(e.name=m[e.type],e.name in n&&(e.shortName=n[e.name])),b&&(b.update(e.type),b.update(e.value)),f.push(e)}return f},l.CRIAttributesAsArray=function(a){for(var b=[],c=0;c<a.length;++c)for(var d=a[c],e=k.derToOid(d.value[0].value),f=d.value[1].value,g=0;g<f.length;++g){var h={};if(h.type=e,h.value=f[g].value,h.valueTagClass=f[g].type,h.type in m&&(h.name=m[h.type],h.name in n&&(h.shortName=n[h.name])),h.type===m.extensionRequest){h.extensions=[];for(var i=0;i<h.value.length;++i)h.extensions.push(l.certificateExtensionFromAsn1(h.value[i]))}b.push(h)}return b};var t=function(a,b,c){var d={};if(a!==m["RSASSA-PSS"])return d;c&&(d={hash:{algorithmOid:m.sha1},mgf:{algorithmOid:m.mgf1,hash:{algorithmOid:m.sha1}},saltLength:20});var e={},f=[];if(!k.validate(b,q,e,f)){var g=new Error("Cannot read RSASSA-PSS parameter block.");throw g.errors=f,g}return void 0!==e.hashOid&&(d.hash=d.hash||{},d.hash.algorithmOid=k.derToOid(e.hashOid)),void 0!==e.maskGenOid&&(d.mgf=d.mgf||{},d.mgf.algorithmOid=k.derToOid(e.maskGenOid),d.mgf.hash=d.mgf.hash||{},d.mgf.hash.algorithmOid=k.derToOid(e.maskGenHashOid)),void 0!==e.saltLength&&(d.saltLength=e.saltLength.charCodeAt(0)),d};l.certificateFromPem=function(a,b,c){var d=j.pem.decode(a)[0];if("CERTIFICATE"!==d.type&&"X509 CERTIFICATE"!==d.type&&"TRUSTED CERTIFICATE"!==d.type){var e=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw e.headerType=d.type,e}if(d.procType&&"ENCRYPTED"===d.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var f=k.fromDer(d.body,c);return l.certificateFromAsn1(f,b)},l.certificateToPem=function(a,b){var c={type:"CERTIFICATE",body:k.toDer(l.certificateToAsn1(a)).getBytes()};return j.pem.encode(c,{maxline:b})},l.publicKeyFromPem=function(a){var b=j.pem.decode(a)[0];if("PUBLIC KEY"!==b.type&&"RSA PUBLIC KEY"!==b.type){var c=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw c.headerType=b.type,c}if(b.procType&&"ENCRYPTED"===b.procType.type)throw new Error("Could not convert public key from PEM; PEM is encrypted.");var d=k.fromDer(b.body);return l.publicKeyFromAsn1(d)},l.publicKeyToPem=function(a,b){var c={type:"PUBLIC KEY",body:k.toDer(l.publicKeyToAsn1(a)).getBytes()};return j.pem.encode(c,{maxline:b})},l.publicKeyToRSAPublicKeyPem=function(a,b){var c={type:"RSA PUBLIC KEY",body:k.toDer(l.publicKeyToRSAPublicKey(a)).getBytes()};return j.pem.encode(c,{maxline:b})},l.getPublicKeyFingerprint=function(a,b){b=b||{};var c,d=b.md||j.md.sha1.create(),e=b.type||"RSAPublicKey";switch(e){case"RSAPublicKey":c=k.toDer(l.publicKeyToRSAPublicKey(a)).getBytes();break;case"SubjectPublicKeyInfo":c=k.toDer(l.publicKeyToAsn1(a)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+b.type+'".')}d.start(),d.update(c);var f=d.digest();if("hex"===b.encoding){var g=f.toHex();return b.delimiter?g.match(/.{2}/g).join(b.delimiter):g}if("binary"===b.encoding)return f.getBytes();if(b.encoding)throw new Error('Unknown encoding "'+b.encoding+'".');return f},l.certificationRequestFromPem=function(a,b,c){var d=j.pem.decode(a)[0];if("CERTIFICATE REQUEST"!==d.type){var e=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw e.headerType=d.type,e}if(d.procType&&"ENCRYPTED"===d.procType.type)throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var f=k.fromDer(d.body,c);return l.certificationRequestFromAsn1(f,b)},l.certificationRequestToPem=function(a,b){var c={type:"CERTIFICATE REQUEST",body:k.toDer(l.certificationRequestToAsn1(a)).getBytes()};return j.pem.encode(c,{maxline:b})},l.createCertificate=function(){var a={};return a.version=2,a.serialNumber="00",a.signatureOid=null,a.signature=null,a.siginfo={},a.siginfo.algorithmOid=null,a.validity={},a.validity.notBefore=new Date,a.validity.notAfter=new Date,a.issuer={},a.issuer.getField=function(b){return d(a.issuer,b)},a.issuer.addField=function(b){f([b]),a.issuer.attributes.push(b)},a.issuer.attributes=[],a.issuer.hash=null,a.subject={},a.subject.getField=function(b){return d(a.subject,b)},a.subject.addField=function(b){f([b]),a.subject.attributes.push(b)},a.subject.attributes=[],a.subject.hash=null,a.extensions=[],a.publicKey=null,a.md=null,a.setSubject=function(b,c){f(b),a.subject.attributes=b,delete a.subject.uniqueId,c&&(a.subject.uniqueId=c),a.subject.hash=null},a.setIssuer=function(b,c){f(b),a.issuer.attributes=b,delete a.issuer.uniqueId,c&&(a.issuer.uniqueId=c),a.issuer.hash=null},a.setExtensions=function(b){for(var c=0;c<b.length;++c)g(b[c],{cert:a});a.extensions=b},a.getExtension=function(b){"string"==typeof b&&(b={name:b});for(var c,d=null,e=0;null===d&&e<a.extensions.length;++e)c=a.extensions[e],b.id&&c.id===b.id?d=c:b.name&&c.name===b.name&&(d=c);return d},a.sign=function(b,c){a.md=c||j.md.sha1.create();var d=m[a.md.algorithm+"WithRSAEncryption"];if(!d){var e=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw e.algorithm=a.md.algorithm,e}a.signatureOid=a.siginfo.algorithmOid=d,a.tbsCertificate=l.getTBSCertificate(a);var f=k.toDer(a.tbsCertificate);a.md.update(f.getBytes()),a.signature=b.sign(a.md)},a.verify=function(b){var c=!1;if(!a.issued(b)){var d=b.issuer,e=a.subject,f=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw f.expectedIssuer=d.attributes,f.actualIssuer=e.attributes,f}var g=b.md;if(null===g){if(b.signatureOid in m){var h=m[b.signatureOid];switch(h){case"sha1WithRSAEncryption":g=j.md.sha1.create();break;case"md5WithRSAEncryption":g=j.md.md5.create();break;case"sha256WithRSAEncryption":g=j.md.sha256.create();break;case"sha512WithRSAEncryption":g=j.md.sha512.create();break;case"RSASSA-PSS":g=j.md.sha256.create()}}if(null===g){var f=new Error("Could not compute certificate digest. Unknown signature OID.");throw f.signatureOid=b.signatureOid,f}var i=b.tbsCertificate||l.getTBSCertificate(b),n=k.toDer(i);g.update(n.getBytes())}if(null!==g){var o;switch(b.signatureOid){case m.sha1WithRSAEncryption:o=void 0;break;case m["RSASSA-PSS"]:var p,q;if(p=m[b.signatureParameters.mgf.hash.algorithmOid],void 0===p||void 0===j.md[p]){var f=new Error("Unsupported MGF hash function.");throw f.oid=b.signatureParameters.mgf.hash.algorithmOid,f.name=p,f}if(q=m[b.signatureParameters.mgf.algorithmOid],void 0===q||void 0===j.mgf[q]){var f=new Error("Unsupported MGF function.");throw f.oid=b.signatureParameters.mgf.algorithmOid,f.name=q,f}if(q=j.mgf[q].create(j.md[p].create()),p=m[b.signatureParameters.hash.algorithmOid],void 0===p||void 0===j.md[p])throw{message:"Unsupported RSASSA-PSS hash function.",oid:b.signatureParameters.hash.algorithmOid,name:p};o=j.pss.create(j.md[p].create(),q,b.signatureParameters.saltLength)}c=a.publicKey.verify(g.digest().getBytes(),b.signature,o)}return c},a.isIssuer=function(b){var c=!1,d=a.issuer,e=b.subject;if(d.hash&&e.hash)c=d.hash===e.hash;else if(d.attributes.length===e.attributes.length){c=!0;for(var f,g,h=0;c&&h<d.attributes.length;++h)f=d.attributes[h],g=e.attributes[h],(f.type!==g.type||f.value!==g.value)&&(c=!1)}return c},a.issued=function(b){return b.isIssuer(a)},a.generateSubjectKeyIdentifier=function(){return l.getPublicKeyFingerprint(a.publicKey,{type:"RSAPublicKey"})},a.verifySubjectKeyIdentifier=function(){for(var b=m.subjectKeyIdentifier,c=0;c<a.extensions.length;++c){var d=a.extensions[c];if(d.id===b){var e=a.generateSubjectKeyIdentifier().getBytes();return j.util.hexToBytes(d.subjectKeyIdentifier)===e}}return!1},a},l.certificateFromAsn1=function(a,b){var c={},e=[];if(!k.validate(a,p,c,e)){var g=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw g.errors=e,g}var h=k.derToOid(c.publicKeyOid);if(h!==l.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var i=l.createCertificate();i.version=c.certVersion?c.certVersion.charCodeAt(0):0;var n=j.util.createBuffer(c.certSerialNumber);i.serialNumber=n.toHex(),i.signatureOid=j.asn1.derToOid(c.certSignatureOid),i.signatureParameters=t(i.signatureOid,c.certSignatureParams,!0),i.siginfo.algorithmOid=j.asn1.derToOid(c.certinfoSignatureOid),i.siginfo.parameters=t(i.siginfo.algorithmOid,c.certinfoSignatureParams,!1),i.signature=c.certSignature;var o=[];if(void 0!==c.certValidity1UTCTime&&o.push(k.utcTimeToDate(c.certValidity1UTCTime)),void 0!==c.certValidity2GeneralizedTime&&o.push(k.generalizedTimeToDate(c.certValidity2GeneralizedTime)),void 0!==c.certValidity3UTCTime&&o.push(k.utcTimeToDate(c.certValidity3UTCTime)),void 0!==c.certValidity4GeneralizedTime&&o.push(k.generalizedTimeToDate(c.certValidity4GeneralizedTime)),o.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(o.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(i.validity.notBefore=o[0],i.validity.notAfter=o[1],i.tbsCertificate=c.tbsCertificate,b){if(i.md=null,i.signatureOid in m){var h=m[i.signatureOid];switch(h){case"sha1WithRSAEncryption":i.md=j.md.sha1.create();break;case"md5WithRSAEncryption":i.md=j.md.md5.create();break;case"sha256WithRSAEncryption":i.md=j.md.sha256.create();break;case"sha512WithRSAEncryption":i.md=j.md.sha512.create();break;case"RSASSA-PSS":i.md=j.md.sha256.create()}}if(null===i.md){var g=new Error("Could not compute certificate digest. Unknown signature OID.");throw g.signatureOid=i.signatureOid,g}var q=k.toDer(i.tbsCertificate);i.md.update(q.getBytes());
}var r=j.md.sha1.create();i.issuer.getField=function(a){return d(i.issuer,a)},i.issuer.addField=function(a){f([a]),i.issuer.attributes.push(a)},i.issuer.attributes=l.RDNAttributesAsArray(c.certIssuer,r),c.certIssuerUniqueId&&(i.issuer.uniqueId=c.certIssuerUniqueId),i.issuer.hash=r.digest().toHex();var s=j.md.sha1.create();return i.subject.getField=function(a){return d(i.subject,a)},i.subject.addField=function(a){f([a]),i.subject.attributes.push(a)},i.subject.attributes=l.RDNAttributesAsArray(c.certSubject,s),c.certSubjectUniqueId&&(i.subject.uniqueId=c.certSubjectUniqueId),i.subject.hash=s.digest().toHex(),c.certExtensions?i.extensions=l.certificateExtensionsFromAsn1(c.certExtensions):i.extensions=[],i.publicKey=l.publicKeyFromAsn1(c.subjectPublicKeyInfo),i},l.certificateExtensionsFromAsn1=function(a){for(var b=[],c=0;c<a.value.length;++c)for(var d=a.value[c],e=0;e<d.value.length;++e)b.push(l.certificateExtensionFromAsn1(d.value[e]));return b},l.certificateExtensionFromAsn1=function(a){var b={};if(b.id=k.derToOid(a.value[0].value),b.critical=!1,a.value[1].type===k.Type.BOOLEAN?(b.critical=0!==a.value[1].value.charCodeAt(0),b.value=a.value[2].value):b.value=a.value[1].value,b.id in m)if(b.name=m[b.id],"keyUsage"===b.name){var c=k.fromDer(b.value),d=0,e=0;c.value.length>1&&(d=c.value.charCodeAt(1),e=c.value.length>2?c.value.charCodeAt(2):0),b.digitalSignature=128===(128&d),b.nonRepudiation=64===(64&d),b.keyEncipherment=32===(32&d),b.dataEncipherment=16===(16&d),b.keyAgreement=8===(8&d),b.keyCertSign=4===(4&d),b.cRLSign=2===(2&d),b.encipherOnly=1===(1&d),b.decipherOnly=128===(128&e)}else if("basicConstraints"===b.name){var c=k.fromDer(b.value);c.value.length>0&&c.value[0].type===k.Type.BOOLEAN?b.cA=0!==c.value[0].value.charCodeAt(0):b.cA=!1;var f=null;c.value.length>0&&c.value[0].type===k.Type.INTEGER?f=c.value[0].value:c.value.length>1&&(f=c.value[1].value),null!==f&&(b.pathLenConstraint=k.derToInteger(f))}else if("extKeyUsage"===b.name)for(var c=k.fromDer(b.value),g=0;g<c.value.length;++g){var h=k.derToOid(c.value[g].value);h in m?b[m[h]]=!0:b[h]=!0}else if("nsCertType"===b.name){var c=k.fromDer(b.value),d=0;c.value.length>1&&(d=c.value.charCodeAt(1)),b.client=128===(128&d),b.server=64===(64&d),b.email=32===(32&d),b.objsign=16===(16&d),b.reserved=8===(8&d),b.sslCA=4===(4&d),b.emailCA=2===(2&d),b.objCA=1===(1&d)}else if("subjectAltName"===b.name||"issuerAltName"===b.name){b.altNames=[];for(var i,c=k.fromDer(b.value),l=0;l<c.value.length;++l){i=c.value[l];var n={type:i.type,value:i.value};switch(b.altNames.push(n),i.type){case 1:case 2:case 6:break;case 7:n.ip=j.util.bytesToIP(i.value);break;case 8:n.oid=k.derToOid(i.value)}}}else if("subjectKeyIdentifier"===b.name){var c=k.fromDer(b.value);b.subjectKeyIdentifier=j.util.bytesToHex(c.value)}return b},l.certificationRequestFromAsn1=function(a,b){var c={},e=[];if(!k.validate(a,s,c,e)){var g=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw g.errors=e,g}var h=k.derToOid(c.publicKeyOid);if(h!==l.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var i=l.createCertificationRequest();if(i.version=c.csrVersion?c.csrVersion.charCodeAt(0):0,i.signatureOid=j.asn1.derToOid(c.csrSignatureOid),i.signatureParameters=t(i.signatureOid,c.csrSignatureParams,!0),i.siginfo.algorithmOid=j.asn1.derToOid(c.csrSignatureOid),i.siginfo.parameters=t(i.siginfo.algorithmOid,c.csrSignatureParams,!1),i.signature=c.csrSignature,i.certificationRequestInfo=c.certificationRequestInfo,b){if(i.md=null,i.signatureOid in m){var h=m[i.signatureOid];switch(h){case"sha1WithRSAEncryption":i.md=j.md.sha1.create();break;case"md5WithRSAEncryption":i.md=j.md.md5.create();break;case"sha256WithRSAEncryption":i.md=j.md.sha256.create();break;case"sha512WithRSAEncryption":i.md=j.md.sha512.create();break;case"RSASSA-PSS":i.md=j.md.sha256.create()}}if(null===i.md){var g=new Error("Could not compute certification request digest. Unknown signature OID.");throw g.signatureOid=i.signatureOid,g}var n=k.toDer(i.certificationRequestInfo);i.md.update(n.getBytes())}var o=j.md.sha1.create();return i.subject.getField=function(a){return d(i.subject,a)},i.subject.addField=function(a){f([a]),i.subject.attributes.push(a)},i.subject.attributes=l.RDNAttributesAsArray(c.certificationRequestInfoSubject,o),i.subject.hash=o.digest().toHex(),i.publicKey=l.publicKeyFromAsn1(c.subjectPublicKeyInfo),i.getAttribute=function(a){return d(i,a)},i.addAttribute=function(a){f([a]),i.attributes.push(a)},i.attributes=l.CRIAttributesAsArray(c.certificationRequestInfoAttributes||[]),i},l.createCertificationRequest=function(){var a={};return a.version=0,a.signatureOid=null,a.signature=null,a.siginfo={},a.siginfo.algorithmOid=null,a.subject={},a.subject.getField=function(b){return d(a.subject,b)},a.subject.addField=function(b){f([b]),a.subject.attributes.push(b)},a.subject.attributes=[],a.subject.hash=null,a.publicKey=null,a.attributes=[],a.getAttribute=function(b){return d(a,b)},a.addAttribute=function(b){f([b]),a.attributes.push(b)},a.md=null,a.setSubject=function(b){f(b),a.subject.attributes=b,a.subject.hash=null},a.setAttributes=function(b){f(b),a.attributes=b},a.sign=function(b,c){a.md=c||j.md.sha1.create();var d=m[a.md.algorithm+"WithRSAEncryption"];if(!d){var e=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw e.algorithm=a.md.algorithm,e}a.signatureOid=a.siginfo.algorithmOid=d,a.certificationRequestInfo=l.getCertificationRequestInfo(a);var f=k.toDer(a.certificationRequestInfo);a.md.update(f.getBytes()),a.signature=b.sign(a.md)},a.verify=function(){var b=!1,c=a.md;if(null===c){if(a.signatureOid in m){var d=m[a.signatureOid];switch(d){case"sha1WithRSAEncryption":c=j.md.sha1.create();break;case"md5WithRSAEncryption":c=j.md.md5.create();break;case"sha256WithRSAEncryption":c=j.md.sha256.create();break;case"sha512WithRSAEncryption":c=j.md.sha512.create();break;case"RSASSA-PSS":c=j.md.sha256.create()}}if(null===c){var e=new Error("Could not compute certification request digest. Unknown signature OID.");throw e.signatureOid=a.signatureOid,e}var f=a.certificationRequestInfo||l.getCertificationRequestInfo(a),g=k.toDer(f);c.update(g.getBytes())}if(null!==c){var h;switch(a.signatureOid){case m.sha1WithRSAEncryption:break;case m["RSASSA-PSS"]:var i,n;if(i=m[a.signatureParameters.mgf.hash.algorithmOid],void 0===i||void 0===j.md[i]){var e=new Error("Unsupported MGF hash function.");throw e.oid=a.signatureParameters.mgf.hash.algorithmOid,e.name=i,e}if(n=m[a.signatureParameters.mgf.algorithmOid],void 0===n||void 0===j.mgf[n]){var e=new Error("Unsupported MGF function.");throw e.oid=a.signatureParameters.mgf.algorithmOid,e.name=n,e}if(n=j.mgf[n].create(j.md[i].create()),i=m[a.signatureParameters.hash.algorithmOid],void 0===i||void 0===j.md[i]){var e=new Error("Unsupported RSASSA-PSS hash function.");throw e.oid=a.signatureParameters.hash.algorithmOid,e.name=i,e}h=j.pss.create(j.md[i].create(),n,a.signatureParameters.saltLength)}b=a.publicKey.verify(c.digest().getBytes(),a.signature,h)}return b},a},l.getTBSCertificate=function(a){var b=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(a.version).getBytes())]),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,j.util.hexToBytes(a.serialNumber)),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(a.siginfo.algorithmOid).getBytes()),h(a.siginfo.algorithmOid,a.siginfo.parameters)]),e(a.issuer),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.UTCTIME,!1,k.dateToUtcTime(a.validity.notBefore)),k.create(k.Class.UNIVERSAL,k.Type.UTCTIME,!1,k.dateToUtcTime(a.validity.notAfter))]),e(a.subject),l.publicKeyToAsn1(a.publicKey)]);return a.issuer.uniqueId&&b.value.push(k.create(k.Class.CONTEXT_SPECIFIC,1,!0,[k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,String.fromCharCode(0)+a.issuer.uniqueId)])),a.subject.uniqueId&&b.value.push(k.create(k.Class.CONTEXT_SPECIFIC,2,!0,[k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,String.fromCharCode(0)+a.subject.uniqueId)])),a.extensions.length>0&&b.value.push(l.certificateExtensionsToAsn1(a.extensions)),b},l.getCertificationRequestInfo=function(a){var b=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(a.version).getBytes()),e(a.subject),l.publicKeyToAsn1(a.publicKey),i(a)]);return b},l.distinguishedNameToAsn1=function(a){return e(a)},l.certificateToAsn1=function(a){var b=a.tbsCertificate||l.getTBSCertificate(a);return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[b,k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(a.signatureOid).getBytes()),h(a.signatureOid,a.signatureParameters)]),k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,String.fromCharCode(0)+a.signature)])},l.certificateExtensionsToAsn1=function(a){var b=k.create(k.Class.CONTEXT_SPECIFIC,3,!0,[]),c=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);b.value.push(c);for(var d=0;d<a.length;++d)c.value.push(l.certificateExtensionToAsn1(a[d]));return b},l.certificateExtensionToAsn1=function(a){var b=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[]);b.value.push(k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(a.id).getBytes())),a.critical&&b.value.push(k.create(k.Class.UNIVERSAL,k.Type.BOOLEAN,!1,String.fromCharCode(255)));var c=a.value;return"string"!=typeof a.value&&(c=k.toDer(c).getBytes()),b.value.push(k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,c)),b},l.certificationRequestToAsn1=function(a){var b=a.certificationRequestInfo||l.getCertificationRequestInfo(a);return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[b,k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(a.signatureOid).getBytes()),h(a.signatureOid,a.signatureParameters)]),k.create(k.Class.UNIVERSAL,k.Type.BITSTRING,!1,String.fromCharCode(0)+a.signature)])},l.createCaStore=function(a){function b(a){return c(a),d.certs[a.hash]||null}function c(a){if(!a.hash){var b=j.md.sha1.create();a.attributes=l.RDNAttributesAsArray(e(a),b),a.hash=b.digest().toHex()}}var d={certs:{}};if(d.getIssuer=function(a){var c=b(a.issuer);return c},d.addCertificate=function(a){if("string"==typeof a&&(a=j.pki.certificateFromPem(a)),c(a.subject),!d.hasCertificate(a))if(a.subject.hash in d.certs){var b=d.certs[a.subject.hash];j.util.isArray(b)||(b=[b]),b.push(a),d.certs[a.subject.hash]=b}else d.certs[a.subject.hash]=a},d.hasCertificate=function(a){"string"==typeof a&&(a=j.pki.certificateFromPem(a));var c=b(a.subject);if(!c)return!1;j.util.isArray(c)||(c=[c]);for(var d=k.toDer(l.certificateToAsn1(a)).getBytes(),e=0;e<c.length;++e){var f=k.toDer(l.certificateToAsn1(c[e])).getBytes();if(d===f)return!0}return!1},d.listAllCertificates=function(){var a=[];for(var b in d.certs)if(d.certs.hasOwnProperty(b)){var c=d.certs[b];if(j.util.isArray(c))for(var e=0;e<c.length;++e)a.push(c[e]);else a.push(c)}return a},d.removeCertificate=function(a){var e;if("string"==typeof a&&(a=j.pki.certificateFromPem(a)),c(a.subject),!d.hasCertificate(a))return null;var f=b(a.subject);if(!j.util.isArray(f))return e=d.certs[a.subject.hash],delete d.certs[a.subject.hash],e;for(var g=k.toDer(l.certificateToAsn1(a)).getBytes(),h=0;h<f.length;++h){var i=k.toDer(l.certificateToAsn1(f[h])).getBytes();g===i&&(e=f[h],f.splice(h,1))}return 0===f.length&&delete d.certs[a.subject.hash],e},a)for(var f=0;f<a.length;++f){var g=a[f];d.addCertificate(g)}return d},l.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"},l.verifyCertificateChain=function(a,b,c){b=b.slice(0);var d=b.slice(0),e=new Date,f=!0,g=null,h=0;do{var i=b.shift(),k=null,m=!1;if((e<i.validity.notBefore||e>i.validity.notAfter)&&(g={message:"Certificate is not valid yet or has expired.",error:l.certificateError.certificate_expired,notBefore:i.validity.notBefore,notAfter:i.validity.notAfter,now:e}),null===g){if(k=b[0]||a.getIssuer(i),null===k&&i.isIssuer(i)&&(m=!0,k=i),k){var n=k;j.util.isArray(n)||(n=[n]);for(var o=!1;!o&&n.length>0;){k=n.shift();try{o=k.verify(i)}catch(p){}}o||(g={message:"Certificate signature is invalid.",error:l.certificateError.bad_certificate})}null!==g||k&&!m||a.hasCertificate(i)||(g={message:"Certificate is not trusted.",error:l.certificateError.unknown_ca})}if(null===g&&k&&!i.isIssuer(k)&&(g={message:"Certificate issuer is invalid.",error:l.certificateError.bad_certificate}),null===g)for(var q={keyUsage:!0,basicConstraints:!0},r=0;null===g&&r<i.extensions.length;++r){var s=i.extensions[r];!s.critical||s.name in q||(g={message:"Certificate has an unsupported critical extension.",error:l.certificateError.unsupported_certificate})}if(null===g&&(!f||0===b.length&&(!k||m))){var t=i.getExtension("basicConstraints"),u=i.getExtension("keyUsage");if(null!==u&&(u.keyCertSign&&null!==t||(g={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:l.certificateError.bad_certificate})),null!==g||null===t||t.cA||(g={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:l.certificateError.bad_certificate}),null===g&&null!==u&&"pathLenConstraint"in t){var v=h-1;v>t.pathLenConstraint&&(g={message:"Certificate basicConstraints pathLenConstraint violated.",error:l.certificateError.bad_certificate})}}var w=null===g?!0:g.error,x=c?c(w,h,d):w;if(x!==!0)throw w===!0&&(g={message:"The application rejected the certificate.",error:l.certificateError.bad_certificate}),(x||0===x)&&("object"!=typeof x||j.util.isArray(x)?"string"==typeof x&&(g.error=x):(x.message&&(g.message=x.message),x.error&&(g.error=x.error))),g;g=null,f=!1,++h}while(b.length>0);return!0}},function(a,b,c){function d(a){if("string"==typeof a&&(a=g.util.createBuffer(a)),g.util.isArray(a)&&a.length>4){var b=a;a=g.util.createBuffer();for(var c=0;c<b.length;++c)a.putByte(b[c])}return g.util.isArray(a)||(a=[a.getInt32(),a.getInt32(),a.getInt32(),a.getInt32()]),a}function e(a){a[a.length-1]=a[a.length-1]+1&4294967295}function f(a){return[a/4294967296|0,4294967295&a]}var g=c(0);c(1),g.cipher=g.cipher||{};var h=a.exports=g.cipher.modes=g.cipher.modes||{};h.ecb=function(a){a=a||{},this.name="ECB",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},h.ecb.prototype.start=function(a){},h.ecb.prototype.encrypt=function(a,b,c){if(a.length()<this.blockSize&&!(c&&a.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=a.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)b.putInt32(this._outBlock[d])},h.ecb.prototype.decrypt=function(a,b,c){if(a.length()<this.blockSize&&!(c&&a.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=a.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)b.putInt32(this._outBlock[d])},h.ecb.prototype.pad=function(a,b){var c=a.length()===this.blockSize?this.blockSize:this.blockSize-a.length();return a.fillWithByte(c,c),!0},h.ecb.prototype.unpad=function(a,b){if(b.overflow>0)return!1;var c=a.length(),d=a.at(c-1);return d>this.blockSize<<2?!1:(a.truncate(d),!0)},h.cbc=function(a){a=a||{},this.name="CBC",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)},h.cbc.prototype.start=function(a){if(null===a.iv){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else{if(!("iv"in a))throw new Error("Invalid IV parameter.");this._iv=d(a.iv),this._prev=this._iv.slice(0)}},h.cbc.prototype.encrypt=function(a,b,c){if(a.length()<this.blockSize&&!(c&&a.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=this._prev[d]^a.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)b.putInt32(this._outBlock[d]);this._prev=this._outBlock},h.cbc.prototype.decrypt=function(a,b,c){if(a.length()<this.blockSize&&!(c&&a.length()>0))return!0;for(var d=0;d<this._ints;++d)this._inBlock[d]=a.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var d=0;d<this._ints;++d)b.putInt32(this._prev[d]^this._outBlock[d]);this._prev=this._inBlock.slice(0)},h.cbc.prototype.pad=function(a,b){var c=a.length()===this.blockSize?this.blockSize:this.blockSize-a.length();return a.fillWithByte(c,c),!0},h.cbc.prototype.unpad=function(a,b){if(b.overflow>0)return!1;var c=a.length(),d=a.at(c-1);return d>this.blockSize<<2?!1:(a.truncate(d),!0)},h.cfb=function(a){a=a||{},this.name="CFB",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=g.util.createBuffer(),this._partialBytes=0},h.cfb.prototype.start=function(a){if(!("iv"in a))throw new Error("Invalid IV parameter.");this._iv=d(a.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},h.cfb.prototype.encrypt=function(a,b,c){var d=a.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize)for(var e=0;e<this._ints;++e)this._inBlock[e]=a.getInt32()^this._outBlock[e],b.putInt32(this._inBlock[e]);else{var f=(this.blockSize-d)%this.blockSize;f>0&&(f=this.blockSize-f),this._partialOutput.clear();for(var e=0;e<this._ints;++e)this._partialBlock[e]=a.getInt32()^this._outBlock[e],this._partialOutput.putInt32(this._partialBlock[e]);if(f>0)a.read-=this.blockSize;else for(var e=0;e<this._ints;++e)this._inBlock[e]=this._partialBlock[e];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),f>0&&!c)return b.putBytes(this._partialOutput.getBytes(f-this._partialBytes)),this._partialBytes=f,!0;b.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}},h.cfb.prototype.decrypt=function(a,b,c){var d=a.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize)for(var e=0;e<this._ints;++e)this._inBlock[e]=a.getInt32(),b.putInt32(this._inBlock[e]^this._outBlock[e]);else{var f=(this.blockSize-d)%this.blockSize;f>0&&(f=this.blockSize-f),this._partialOutput.clear();for(var e=0;e<this._ints;++e)this._partialBlock[e]=a.getInt32(),this._partialOutput.putInt32(this._partialBlock[e]^this._outBlock[e]);if(f>0)a.read-=this.blockSize;else for(var e=0;e<this._ints;++e)this._inBlock[e]=this._partialBlock[e];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),f>0&&!c)return b.putBytes(this._partialOutput.getBytes(f-this._partialBytes)),this._partialBytes=f,!0;b.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}},h.ofb=function(a){a=a||{},this.name="OFB",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=g.util.createBuffer(),this._partialBytes=0},h.ofb.prototype.start=function(a){if(!("iv"in a))throw new Error("Invalid IV parameter.");this._iv=d(a.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},h.ofb.prototype.encrypt=function(a,b,c){var d=a.length();if(0===a.length())return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize)for(var e=0;e<this._ints;++e)b.putInt32(a.getInt32()^this._outBlock[e]),this._inBlock[e]=this._outBlock[e];else{var f=(this.blockSize-d)%this.blockSize;f>0&&(f=this.blockSize-f),this._partialOutput.clear();for(var e=0;e<this._ints;++e)this._partialOutput.putInt32(a.getInt32()^this._outBlock[e]);if(f>0)a.read-=this.blockSize;else for(var e=0;e<this._ints;++e)this._inBlock[e]=this._outBlock[e];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),f>0&&!c)return b.putBytes(this._partialOutput.getBytes(f-this._partialBytes)),this._partialBytes=f,!0;b.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}},h.ofb.prototype.decrypt=h.ofb.prototype.encrypt,h.ctr=function(a){a=a||{},this.name="CTR",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=g.util.createBuffer(),this._partialBytes=0},h.ctr.prototype.start=function(a){if(!("iv"in a))throw new Error("Invalid IV parameter.");this._iv=d(a.iv),this._inBlock=this._iv.slice(0),this._partialBytes=0},h.ctr.prototype.encrypt=function(a,b,c){var d=a.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize)for(var f=0;f<this._ints;++f)b.putInt32(a.getInt32()^this._outBlock[f]);else{var g=(this.blockSize-d)%this.blockSize;g>0&&(g=this.blockSize-g),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialOutput.putInt32(a.getInt32()^this._outBlock[f]);if(g>0&&(a.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),g>0&&!c)return b.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=g,!0;b.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}e(this._inBlock)},h.ctr.prototype.decrypt=h.ctr.prototype.encrypt,h.gcm=function(a){a=a||{},this.name="GCM",this.cipher=a.cipher,this.blockSize=a.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=g.util.createBuffer(),this._partialBytes=0,this._R=3774873600},h.gcm.prototype.start=function(a){if(!("iv"in a))throw new Error("Invalid IV parameter.");var b=g.util.createBuffer(a.iv);this._cipherLength=0;var c;if(c="additionalData"in a?g.util.createBuffer(a.additionalData):g.util.createBuffer(),"tagLength"in a?this._tagLength=a.tagLength:this._tagLength=128,this._tag=null,a.decrypt&&(this._tag=g.util.createBuffer(a.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var d=b.length();if(12===d)this._j0=[b.getInt32(),b.getInt32(),b.getInt32(),1];else{for(this._j0=[0,0,0,0];b.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[b.getInt32(),b.getInt32(),b.getInt32(),b.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(f(8*d)))}this._inBlock=this._j0.slice(0),e(this._inBlock),this._partialBytes=0,c=g.util.createBuffer(c),this._aDataLength=f(8*c.length());var h=c.length()%this.blockSize;for(h&&c.fillWithByte(0,this.blockSize-h),this._s=[0,0,0,0];c.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[c.getInt32(),c.getInt32(),c.getInt32(),c.getInt32()])},h.gcm.prototype.encrypt=function(a,b,c){var d=a.length();if(0===d)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),0===this._partialBytes&&d>=this.blockSize){for(var f=0;f<this._ints;++f)b.putInt32(this._outBlock[f]^=a.getInt32());this._cipherLength+=this.blockSize}else{var g=(this.blockSize-d)%this.blockSize;g>0&&(g=this.blockSize-g),this._partialOutput.clear();for(var f=0;f<this._ints;++f)this._partialOutput.putInt32(a.getInt32()^this._outBlock[f]);if(0===g||c){if(c){var h=d%this.blockSize;this._cipherLength+=h,this._partialOutput.truncate(this.blockSize-h)}else this._cipherLength+=this.blockSize;for(var f=0;f<this._ints;++f)this._outBlock[f]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),g>0&&!c)return a.read-=this.blockSize,b.putBytes(this._partialOutput.getBytes(g-this._partialBytes)),this._partialBytes=g,!0;b.putBytes(this._partialOutput.getBytes(d-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),e(this._inBlock)},h.gcm.prototype.decrypt=function(a,b,c){var d=a.length();if(d<this.blockSize&&!(c&&d>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),e(this._inBlock),this._hashBlock[0]=a.getInt32(),this._hashBlock[1]=a.getInt32(),this._hashBlock[2]=a.getInt32(),this._hashBlock[3]=a.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var f=0;f<this._ints;++f)b.putInt32(this._outBlock[f]^this._hashBlock[f]);d<this.blockSize?this._cipherLength+=d%this.blockSize:this._cipherLength+=this.blockSize},h.gcm.prototype.afterFinish=function(a,b){var c=!0;b.decrypt&&b.overflow&&a.truncate(this.blockSize-b.overflow),this.tag=g.util.createBuffer();var d=this._aDataLength.concat(f(8*this._cipherLength));this._s=this.ghash(this._hashSubkey,this._s,d);var e=[];this.cipher.encrypt(this._j0,e);for(var h=0;h<this._ints;++h)this.tag.putInt32(this._s[h]^e[h]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),b.decrypt&&this.tag.bytes()!==this._tag&&(c=!1),c},h.gcm.prototype.multiply=function(a,b){for(var c=[0,0,0,0],d=b.slice(0),e=0;128>e;++e){var f=a[e/32|0]&1<<31-e%32;f&&(c[0]^=d[0],c[1]^=d[1],c[2]^=d[2],c[3]^=d[3]),this.pow(d,d)}return c},h.gcm.prototype.pow=function(a,b){for(var c=1&a[3],d=3;d>0;--d)b[d]=a[d]>>>1|(1&a[d-1])<<31;b[0]=a[0]>>>1,c&&(b[0]^=this._R)},h.gcm.prototype.tableMultiply=function(a){for(var b=[0,0,0,0],c=0;32>c;++c){var d=c/8|0,e=a[d]>>>4*(7-c%8)&15,f=this._m[c][e];b[0]^=f[0],b[1]^=f[1],b[2]^=f[2],b[3]^=f[3]}return b},h.gcm.prototype.ghash=function(a,b,c){return b[0]^=c[0],b[1]^=c[1],b[2]^=c[2],b[3]^=c[3],this.tableMultiply(b)},h.gcm.prototype.generateHashTable=function(a,b){for(var c=8/b,d=4*c,e=16*c,f=new Array(e),g=0;e>g;++g){var h=[0,0,0,0],i=g/d|0,j=(d-1-g%d)*b;h[i]=1<<b-1<<j,f[g]=this.generateSubHashTable(this.multiply(h,a),b)}return f},h.gcm.prototype.generateSubHashTable=function(a,b){var c=1<<b,d=c>>>1,e=new Array(c);e[d]=a.slice(0);for(var f=d>>>1;f>0;)this.pow(e[2*f],e[f]=[]),f>>=1;for(f=2;d>f;){for(var g=1;f>g;++g){var h=e[f],i=e[g];e[f+g]=[h[0]^i[0],h[1]^i[1],h[2]^i[2],h[3]^i[3]]}f*=2}for(e[0]=[0,0,0,0],f=d+1;c>f;++f){var j=e[f^d];e[f]=[a[0]^j[0],a[1]^j[1],a[2]^j[2],a[3]^j[3]]}return e}},function(a,b,c){var d=c(0);a.exports=d.debug=d.debug||{},d.debug.storage={},d.debug.get=function(a,b){var c;return"undefined"==typeof a?c=d.debug.storage:a in d.debug.storage&&(c="undefined"==typeof b?d.debug.storage[a]:d.debug.storage[a][b]),c},d.debug.set=function(a,b,c){a in d.debug.storage||(d.debug.storage[a]={}),d.debug.storage[a][b]=c},d.debug.clear=function(a,b){"undefined"==typeof a?d.debug.storage={}:a in d.debug.storage&&("undefined"==typeof b?delete d.debug.storage[a]:delete d.debug.storage[a][b])}},function(a,b,c){var d=c(0);c(1),a.exports=d.log=d.log||{},d.log.levels=["none","error","warning","info","debug","verbose","max"];var e={},f=[],g=null;d.log.LEVEL_LOCKED=2,d.log.NO_LEVEL_CHECK=4,d.log.INTERPOLATE=8;for(var h=0;h<d.log.levels.length;++h){var i=d.log.levels[h];e[i]={index:h,name:i.toUpperCase()}}d.log.logMessage=function(a){for(var b=e[a.level].index,c=0;c<f.length;++c){var g=f[c];if(g.flags&d.log.NO_LEVEL_CHECK)g.f(a);else{var h=e[g.level].index;h>=b&&g.f(g,a)}}},d.log.prepareStandard=function(a){"standard"in a||(a.standard=e[a.level].name+" ["+a.category+"] "+a.message)},d.log.prepareFull=function(a){if(!("full"in a)){var b=[a.message];b=b.concat([]||a.arguments),a.full=d.util.format.apply(this,b)}},d.log.prepareStandardFull=function(a){"standardFull"in a||(d.log.prepareStandard(a),a.standardFull=a.standard)};for(var j=["error","warning","info","debug","verbose"],h=0;h<j.length;++h)!function(a){d.log[a]=function(b,c){var e=Array.prototype.slice.call(arguments).slice(2),f={timestamp:new Date,level:a,category:b,message:c,arguments:e};d.log.logMessage(f)}}(j[h]);if(d.log.makeLogger=function(a){var b={flags:0,f:a};return d.log.setLevel(b,"none"),b},d.log.setLevel=function(a,b){var c=!1;if(a&&!(a.flags&d.log.LEVEL_LOCKED))for(var e=0;e<d.log.levels.length;++e){var f=d.log.levels[e];if(b==f){a.level=b,c=!0;break}}return c},d.log.lock=function(a,b){"undefined"==typeof b||b?a.flags|=d.log.LEVEL_LOCKED:a.flags&=~d.log.LEVEL_LOCKED},d.log.addLogger=function(a){f.push(a)},"undefined"!=typeof console&&"log"in console){var k;if(console.error&&console.warn&&console.info&&console.debug){var l={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},m=function(a,b){d.log.prepareStandard(b);var c=l[b.level],e=[b.standard];e=e.concat(b.arguments.slice()),c.apply(console,e)};k=d.log.makeLogger(m)}else{var m=function(a,b){d.log.prepareStandardFull(b),console.log(b.standardFull)};k=d.log.makeLogger(m)}d.log.setLevel(k,"debug"),d.log.addLogger(k),g=k}else console={log:function(){}};if(null!==g){var n=d.util.getQueryVariables();if("console.level"in n&&d.log.setLevel(g,n["console.level"].slice(-1)[0]),"console.lock"in n){var o=n["console.lock"].slice(-1)[0];"true"==o&&d.log.lock(g)}}d.log.consoleLogger=g},function(a,b,c){var d=c(0);c(1),d.mgf=d.mgf||{};var e=a.exports=d.mgf.mgf1=d.mgf1=d.mgf1||{};e.create=function(a){var b={generate:function(b,c){for(var e=new d.util.ByteBuffer,f=Math.ceil(c/a.digestLength),g=0;f>g;g++){var h=new d.util.ByteBuffer;h.putInt32(g),a.start(),a.update(b+h.getBytes()),e.putBuffer(a.digest())}return e.truncate(e.length()-c),e.getBytes()}};return b}},function(a,b,c){function d(a,b){return a.start().update(b).digest().getBytes()}function e(a){var b;if(a){if(b=k.oids[j.derToOid(a)],!b){var c=new Error("Unsupported PRF OID.");throw c.oid=a,c.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],c}}else b="hmacWithSHA1";return f(b)}function f(a){var b=h.md;switch(a){case"hmacWithSHA224":b=h.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":a=a.substr(8).toLowerCase();break;default:var c=new Error("Unsupported PRF algorithm.");throw c.algorithm=a,c.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],c}if(!(b&&a in b))throw new Error("Unknown hash algorithm: "+a);return b[a].create()}function g(a,b,c,d){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,a),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,b.getBytes())]);return"hmacWithSHA1"!==d&&e.value.push(j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,h.util.hexToBytes(c.toString(16))),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(k.oids[d]).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])),e}var h=c(0);if(c(5),c(3),c(10),c(4),c(6),c(15),c(7),c(2),c(29),c(11),c(1),"undefined"==typeof i)var i=h.jsbn.BigInteger;var j=h.asn1,k=h.pki=h.pki||{};a.exports=k.pbe=h.pbe=h.pbe||{};var l=k.oids,m={name:"EncryptedPrivateKeyInfo",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},n={name:"PBES2Algorithms",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,
constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},o={name:"pkcs-12PbeParams",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:j.Class.UNIVERSAL,type:j.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"iterations"}]};k.encryptPrivateKeyInfo=function(a,b,c){c=c||{},c.saltSize=c.saltSize||8,c.count=c.count||2048,c.algorithm=c.algorithm||"aes128",c.prfAlgorithm=c.prfAlgorithm||"sha1";var d,e,i,m=h.random.getBytesSync(c.saltSize),n=c.count,o=j.integerToDer(n);if(0===c.algorithm.indexOf("aes")||"des"===c.algorithm){var p,q,r;switch(c.algorithm){case"aes128":d=16,p=16,q=l["aes128-CBC"],r=h.aes.createEncryptionCipher;break;case"aes192":d=24,p=16,q=l["aes192-CBC"],r=h.aes.createEncryptionCipher;break;case"aes256":d=32,p=16,q=l["aes256-CBC"],r=h.aes.createEncryptionCipher;break;case"des":d=8,p=8,q=l.desCBC,r=h.des.createEncryptionCipher;break;default:var s=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw s.algorithm=c.algorithm,s}var t="hmacWith"+c.prfAlgorithm.toUpperCase(),u=f(t),v=h.pkcs5.pbkdf2(b,m,n,d,u),w=h.random.getBytesSync(p),x=r(v);x.start(w),x.update(j.toDer(a)),x.finish(),i=x.output.getBytes();var y=g(m,o,d,t);e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(l.pkcs5PBES2).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(l.pkcs5PBKDF2).getBytes()),y]),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(q).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,w)])])])}else{if("3des"!==c.algorithm){var s=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw s.algorithm=c.algorithm,s}d=24;var z=new h.util.ByteBuffer(m),v=k.pbe.generatePkcs12Key(b,z,1,n,d),w=k.pbe.generatePkcs12Key(b,z,2,n,d),x=h.des.createEncryptionCipher(v);x.start(w),x.update(j.toDer(a)),x.finish(),i=x.output.getBytes(),e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(l["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,m),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,o.getBytes())])])}var A=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,i)]);return A},k.decryptPrivateKeyInfo=function(a,b){var c=null,d={},e=[];if(!j.validate(a,m,d,e)){var f=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw f.errors=e,f}var g=j.derToOid(d.encryptionOid),i=k.pbe.getCipher(g,d.encryptionParams,b),l=h.util.createBuffer(d.encryptedData);return i.update(l),i.finish()&&(c=j.fromDer(i.output)),c},k.encryptedPrivateKeyToPem=function(a,b){var c={type:"ENCRYPTED PRIVATE KEY",body:j.toDer(a).getBytes()};return h.pem.encode(c,{maxline:b})},k.encryptedPrivateKeyFromPem=function(a){var b=h.pem.decode(a)[0];if("ENCRYPTED PRIVATE KEY"!==b.type){var c=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw c.headerType=b.type,c}if(b.procType&&"ENCRYPTED"===b.procType.type)throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return j.fromDer(b.body)},k.encryptRsaPrivateKey=function(a,b,c){if(c=c||{},!c.legacy){var d=k.wrapRsaPrivateKey(k.privateKeyToAsn1(a));return d=k.encryptPrivateKeyInfo(d,b,c),k.encryptedPrivateKeyToPem(d)}var e,f,g,i;switch(c.algorithm){case"aes128":e="AES-128-CBC",g=16,f=h.random.getBytesSync(16),i=h.aes.createEncryptionCipher;break;case"aes192":e="AES-192-CBC",g=24,f=h.random.getBytesSync(16),i=h.aes.createEncryptionCipher;break;case"aes256":e="AES-256-CBC",g=32,f=h.random.getBytesSync(16),i=h.aes.createEncryptionCipher;break;case"3des":e="DES-EDE3-CBC",g=24,f=h.random.getBytesSync(8),i=h.des.createEncryptionCipher;break;case"des":e="DES-CBC",g=8,f=h.random.getBytesSync(8),i=h.des.createEncryptionCipher;break;default:var l=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+c.algorithm+'".');throw l.algorithm=c.algorithm,l}var m=h.pbe.opensslDeriveBytes(b,f.substr(0,8),g),n=i(m);n.start(f),n.update(j.toDer(k.privateKeyToAsn1(a))),n.finish();var o={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:e,parameters:h.util.bytesToHex(f).toUpperCase()},body:n.output.getBytes()};return h.pem.encode(o)},k.decryptRsaPrivateKey=function(a,b){var c=null,d=h.pem.decode(a)[0];if("ENCRYPTED PRIVATE KEY"!==d.type&&"PRIVATE KEY"!==d.type&&"RSA PRIVATE KEY"!==d.type){var e=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw e.headerType=e,e}if(d.procType&&"ENCRYPTED"===d.procType.type){var f,g;switch(d.dekInfo.algorithm){case"DES-CBC":f=8,g=h.des.createDecryptionCipher;break;case"DES-EDE3-CBC":f=24,g=h.des.createDecryptionCipher;break;case"AES-128-CBC":f=16,g=h.aes.createDecryptionCipher;break;case"AES-192-CBC":f=24,g=h.aes.createDecryptionCipher;break;case"AES-256-CBC":f=32,g=h.aes.createDecryptionCipher;break;case"RC2-40-CBC":f=5,g=function(a){return h.rc2.createDecryptionCipher(a,40)};break;case"RC2-64-CBC":f=8,g=function(a){return h.rc2.createDecryptionCipher(a,64)};break;case"RC2-128-CBC":f=16,g=function(a){return h.rc2.createDecryptionCipher(a,128)};break;default:var e=new Error('Could not decrypt private key; unsupported encryption algorithm "'+d.dekInfo.algorithm+'".');throw e.algorithm=d.dekInfo.algorithm,e}var i=h.util.hexToBytes(d.dekInfo.parameters),l=h.pbe.opensslDeriveBytes(b,i.substr(0,8),f),m=g(l);if(m.start(i),m.update(h.util.createBuffer(d.body)),!m.finish())return c;c=m.output.getBytes()}else c=d.body;return c="ENCRYPTED PRIVATE KEY"===d.type?k.decryptPrivateKeyInfo(j.fromDer(c),b):j.fromDer(c),null!==c&&(c=k.privateKeyFromAsn1(c)),c},k.pbe.generatePkcs12Key=function(a,b,c,d,e,f){var g,i;if("undefined"==typeof f||null===f){if(!("sha1"in h.md))throw new Error('"sha1" hash algorithm unavailable.');f=h.md.sha1.create()}var j=f.digestLength,k=f.blockLength,l=new h.util.ByteBuffer,m=new h.util.ByteBuffer;if(null!==a&&void 0!==a){for(i=0;i<a.length;i++)m.putInt16(a.charCodeAt(i));m.putInt16(0)}var n=m.length(),o=b.length(),p=new h.util.ByteBuffer;p.fillWithByte(c,k);var q=k*Math.ceil(o/k),r=new h.util.ByteBuffer;for(i=0;q>i;i++)r.putByte(b.at(i%o));var s=k*Math.ceil(n/k),t=new h.util.ByteBuffer;for(i=0;s>i;i++)t.putByte(m.at(i%n));var u=r;u.putBuffer(t);for(var v=Math.ceil(e/j),w=1;v>=w;w++){var x=new h.util.ByteBuffer;x.putBytes(p.bytes()),x.putBytes(u.bytes());for(var y=0;d>y;y++)f.start(),f.update(x.getBytes()),x=f.digest();var z=new h.util.ByteBuffer;for(i=0;k>i;i++)z.putByte(x.at(i%j));var A=Math.ceil(o/k)+Math.ceil(n/k),B=new h.util.ByteBuffer;for(g=0;A>g;g++){var C=new h.util.ByteBuffer(u.getBytes(k)),D=511;for(i=z.length()-1;i>=0;i--)D>>=8,D+=z.at(i)+C.at(i),C.setAt(i,255&D);B.putBuffer(C)}u=B,l.putBuffer(x)}return l.truncate(l.length()-e),l},k.pbe.getCipher=function(a,b,c){switch(a){case k.oids.pkcs5PBES2:return k.pbe.getCipherForPBES2(a,b,c);case k.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case k.oids["pbewithSHAAnd40BitRC2-CBC"]:return k.pbe.getCipherForPKCS12PBE(a,b,c);default:var d=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw d.oid=a,d.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],d}},k.pbe.getCipherForPBES2=function(a,b,c){var d={},f=[];if(!j.validate(b,n,d,f)){var g=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw g.errors=f,g}if(a=j.derToOid(d.kdfOid),a!==k.oids.pkcs5PBKDF2){var g=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw g.oid=a,g.supportedOids=["pkcs5PBKDF2"],g}if(a=j.derToOid(d.encOid),a!==k.oids["aes128-CBC"]&&a!==k.oids["aes192-CBC"]&&a!==k.oids["aes256-CBC"]&&a!==k.oids["des-EDE3-CBC"]&&a!==k.oids.desCBC){var g=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw g.oid=a,g.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],g}var i=d.kdfSalt,l=h.util.createBuffer(d.kdfIterationCount);l=l.getInt(l.length()<<3);var m,o;switch(k.oids[a]){case"aes128-CBC":m=16,o=h.aes.createDecryptionCipher;break;case"aes192-CBC":m=24,o=h.aes.createDecryptionCipher;break;case"aes256-CBC":m=32,o=h.aes.createDecryptionCipher;break;case"des-EDE3-CBC":m=24,o=h.des.createDecryptionCipher;break;case"desCBC":m=8,o=h.des.createDecryptionCipher}var p=e(d.prfOid),q=h.pkcs5.pbkdf2(c,i,l,m,p),r=d.encIv,s=o(q);return s.start(r),s},k.pbe.getCipherForPKCS12PBE=function(a,b,c){var d={},f=[];if(!j.validate(b,o,d,f)){var g=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw g.errors=f,g}var i=h.util.createBuffer(d.salt),l=h.util.createBuffer(d.iterations);l=l.getInt(l.length()<<3);var m,n,p;switch(a){case k.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:m=24,n=8,p=h.des.startDecrypting;break;case k.oids["pbewithSHAAnd40BitRC2-CBC"]:m=5,n=8,p=function(a,b){var c=h.rc2.createDecryptionCipher(a,40);return c.start(b,null),c};break;default:var g=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw g.oid=a,g}var q=e(d.prfOid),r=k.pbe.generatePkcs12Key(c,i,1,l,m,q);q.start();var s=k.pbe.generatePkcs12Key(c,i,2,l,n,q);return p(r,s)},k.pbe.opensslDeriveBytes=function(a,b,c,e){if("undefined"==typeof e||null===e){if(!("md5"in h.md))throw new Error('"md5" hash algorithm unavailable.');e=h.md.md5.create()}null===b&&(b="");for(var f=[d(e,a+b)],g=16,i=1;c>g;++i,g+=16)f.push(d(e,f[i-1]+a+b));return f.join("").substr(0,c)}},function(a,b,c){function d(a,b,c){c||(c=e.md.sha1.create());for(var d="",f=Math.ceil(b/c.digestLength),g=0;f>g;++g){var h=String.fromCharCode(g>>24&255,g>>16&255,g>>8&255,255&g);c.start(),c.update(a+h),d+=c.digest().getBytes()}return d.substring(0,b)}var e=c(0);c(1),c(2),c(9);var f=a.exports=e.pkcs1=e.pkcs1||{};f.encode_rsa_oaep=function(a,b,c){var f,g,h,i;"string"==typeof c?(f=c,g=arguments[3]||void 0,h=arguments[4]||void 0):c&&(f=c.label||void 0,g=c.seed||void 0,h=c.md||void 0,c.mgf1&&c.mgf1.md&&(i=c.mgf1.md)),h?h.start():h=e.md.sha1.create(),i||(i=h);var j=Math.ceil(a.n.bitLength()/8),k=j-2*h.digestLength-2;if(b.length>k){var l=new Error("RSAES-OAEP input message length is too long.");throw l.length=b.length,l.maxLength=k,l}f||(f=""),h.update(f,"raw");for(var m=h.digest(),n="",o=k-b.length,p=0;o>p;p++)n+="\x00";var q=m.getBytes()+n+""+b;if(g){if(g.length!==h.digestLength){var l=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw l.seedLength=g.length,l.digestLength=h.digestLength,l}}else g=e.random.getBytes(h.digestLength);var r=d(g,j-h.digestLength-1,i),s=e.util.xorBytes(q,r,q.length),t=d(s,h.digestLength,i),u=e.util.xorBytes(g,t,g.length);return"\x00"+u+s},f.decode_rsa_oaep=function(a,b,c){var f,g,h;"string"==typeof c?(f=c,g=arguments[3]||void 0):c&&(f=c.label||void 0,g=c.md||void 0,c.mgf1&&c.mgf1.md&&(h=c.mgf1.md));var i=Math.ceil(a.n.bitLength()/8);if(b.length!==i){var j=new Error("RSAES-OAEP encoded message length is invalid.");throw j.length=b.length,j.expectedLength=i,j}if(void 0===g?g=e.md.sha1.create():g.start(),h||(h=g),i<2*g.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");f||(f=""),g.update(f,"raw");for(var k=g.digest().getBytes(),l=b.charAt(0),m=b.substring(1,g.digestLength+1),n=b.substring(1+g.digestLength),o=d(n,g.digestLength,h),p=e.util.xorBytes(m,o,m.length),q=d(p,i-g.digestLength-1,h),r=e.util.xorBytes(n,q,n.length),s=r.substring(0,g.digestLength),j="\x00"!==l,t=0;t<g.digestLength;++t)j|=k.charAt(t)!==s.charAt(t);for(var u=1,v=g.digestLength,w=g.digestLength;w<r.length;w++){var x=r.charCodeAt(w),y=1&x^1,z=u?65534:0;j|=x&z,u&=y,v+=u}if(j||1!==r.charCodeAt(v))throw new Error("Invalid RSAES-OAEP padding.");return r.substring(v+1)}},function(a,b,c){function d(a,b,c,d){for(var e=[],f=0;f<a.length;f++)for(var g=0;g<a[f].safeBags.length;g++){var h=a[f].safeBags[g];(void 0===d||h.type===d)&&(null!==b?void 0!==h.attributes[b]&&h.attributes[b].indexOf(c)>=0&&e.push(h):e.push(h))}return e}function e(a){if(a.composed||a.constructed){for(var b=j.util.createBuffer(),c=0;c<a.value.length;++c)b.putBytes(a.value[c].value);a.composed=a.constructed=!1,a.value=b.getBytes()}return a}function f(a,b,c,d){if(b=k.fromDer(b,c),b.tagClass!==k.Class.UNIVERSAL||b.type!==k.Type.SEQUENCE||b.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var f=0;f<b.value.length;f++){var i=b.value[f],j={},m=[];if(!k.validate(i,n,j,m)){var o=new Error("Cannot read ContentInfo.");throw o.errors=m,o}var p={encrypted:!1},q=null,r=j.content.value[0];switch(k.derToOid(j.contentType)){case l.oids.data:if(r.tagClass!==k.Class.UNIVERSAL||r.type!==k.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");q=e(r).value;break;case l.oids.encryptedData:q=g(r,d),p.encrypted=!0;break;default:var o=new Error("Unsupported PKCS#12 contentType.");throw o.contentType=k.derToOid(j.contentType),o}p.safeBags=h(q,c,d),a.safeContents.push(p)}}function g(a,b){var c={},d=[];if(!k.validate(a,j.pkcs7.asn1.encryptedDataValidator,c,d)){var f=new Error("Cannot read EncryptedContentInfo.");throw f.errors=d,f}var g=k.derToOid(c.contentType);if(g!==l.oids.data){var f=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw f.oid=g,f}g=k.derToOid(c.encAlgorithm);var h=l.pbe.getCipher(g,c.encParameter,b),i=e(c.encryptedContentAsn1),m=j.util.createBuffer(i.value);if(h.update(m),!h.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return h.output.getBytes()}function h(a,b,c){if(!b&&0===a.length)return[];if(a=k.fromDer(a,b),a.tagClass!==k.Class.UNIVERSAL||a.type!==k.Type.SEQUENCE||a.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var d=[],e=0;e<a.value.length;e++){var f=a.value[e],g={},h=[];if(!k.validate(f,p,g,h)){var j=new Error("Cannot read SafeBag.");throw j.errors=h,j}var m={type:k.derToOid(g.bagId),attributes:i(g.bagAttributes)};d.push(m);var n,o,q=g.bagValue.value[0];switch(m.type){case l.oids.pkcs8ShroudedKeyBag:if(q=l.decryptPrivateKeyInfo(q,c),null===q)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case l.oids.keyBag:try{m.key=l.privateKeyFromAsn1(q)}catch(s){m.key=null,m.asn1=q}continue;case l.oids.certBag:n=r,o=function(){if(k.derToOid(g.certId)!==l.oids.x509Certificate){var a=new Error("Unsupported certificate type, only X.509 supported.");throw a.oid=k.derToOid(g.certId),a}var c=k.fromDer(g.cert,b);try{m.cert=l.certificateFromAsn1(c,!0)}catch(d){m.cert=null,m.asn1=c}};break;default:var j=new Error("Unsupported PKCS#12 SafeBag type.");throw j.oid=m.type,j}if(void 0!==n&&!k.validate(q,n,g,h)){var j=new Error("Cannot read PKCS#12 "+n.name);throw j.errors=h,j}o()}return d}function i(a){var b={};if(void 0!==a)for(var c=0;c<a.length;++c){var d={},e=[];if(!k.validate(a[c],q,d,e)){var f=new Error("Cannot read PKCS#12 BagAttribute.");throw f.errors=e,f}var g=k.derToOid(d.oid);if(void 0!==l.oids[g]){b[l.oids[g]]=[];for(var h=0;h<d.values.length;++h)b[l.oids[g]].push(d.values[h].value)}}return b}var j=c(0);c(3),c(8),c(6),c(25),c(22),c(2),c(11),c(9),c(1),c(17);var k=j.asn1,l=j.pki,m=a.exports=j.pkcs12=j.pkcs12||{},n={name:"ContentInfo",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:k.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},o={name:"PFX",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,capture:"version"},n,{name:"PFX.macData",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:k.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:k.Class.UNIVERSAL,type:k.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:k.Class.UNIVERSAL,type:k.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:k.Class.UNIVERSAL,type:k.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},p={name:"SafeBag",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:k.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:k.Class.UNIVERSAL,type:k.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},q={name:"Attribute",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:k.Class.UNIVERSAL,type:k.Type.SET,constructed:!0,capture:"values"}]},r={name:"CertBag",tagClass:k.Class.UNIVERSAL,type:k.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:k.Class.UNIVERSAL,type:k.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:k.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:k.Class.UNIVERSAL,type:k.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};m.pkcs12FromAsn1=function(a,b,c){"string"==typeof b?(c=b,b=!0):void 0===b&&(b=!0);var g={},h=[];if(!k.validate(a,o,g,h)){var i=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw i.errors=i,i}var n={version:g.version.charCodeAt(0),safeContents:[],getBags:function(a){var b,c={};return"localKeyId"in a?b=a.localKeyId:"localKeyIdHex"in a&&(b=j.util.hexToBytes(a.localKeyIdHex)),void 0===b&&!("friendlyName"in a)&&"bagType"in a&&(c[a.bagType]=d(n.safeContents,null,null,a.bagType)),void 0!==b&&(c.localKeyId=d(n.safeContents,"localKeyId",b,a.bagType)),"friendlyName"in a&&(c.friendlyName=d(n.safeContents,"friendlyName",a.friendlyName,a.bagType)),c},getBagsByFriendlyName:function(a,b){return d(n.safeContents,"friendlyName",a,b)},getBagsByLocalKeyId:function(a,b){return d(n.safeContents,"localKeyId",a,b)}};if(3!==g.version.charCodeAt(0)){var i=new Error("PKCS#12 PFX of version other than 3 not supported.");throw i.version=g.version.charCodeAt(0),i}if(k.derToOid(g.contentType)!==l.oids.data){var i=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw i.oid=k.derToOid(g.contentType),i}var p=g.content.value[0];if(p.tagClass!==k.Class.UNIVERSAL||p.type!==k.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(p=e(p),g.mac){var q=null,r=0,s=k.derToOid(g.macAlgorithm);switch(s){case l.oids.sha1:q=j.md.sha1.create(),r=20;break;case l.oids.sha256:q=j.md.sha256.create(),r=32;break;case l.oids.sha384:q=j.md.sha384.create(),r=48;break;case l.oids.sha512:q=j.md.sha512.create(),r=64;break;case l.oids.md5:q=j.md.md5.create(),r=16}if(null===q)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+s);var t=new j.util.ByteBuffer(g.macSalt),u="macIterations"in g?parseInt(j.util.bytesToHex(g.macIterations),16):1,v=m.generateKey(c,t,3,u,r,q),w=j.hmac.create();w.start(q,v),w.update(p.value);var x=w.getMac();if(x.getBytes()!==g.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return f(n,p.value,b,c),n},m.toPkcs12Asn1=function(a,b,c,d){d=d||{},d.saltSize=d.saltSize||8,d.count=d.count||2048,d.algorithm=d.algorithm||d.encAlgorithm||"aes128","useMac"in d||(d.useMac=!0),"localKeyId"in d||(d.localKeyId=null),"generateLocalKeyId"in d||(d.generateLocalKeyId=!0);var e,f=d.localKeyId;if(null!==f)f=j.util.hexToBytes(f);else if(d.generateLocalKeyId)if(b){var g=j.util.isArray(b)?b[0]:b;"string"==typeof g&&(g=l.certificateFromPem(g));var h=j.md.sha1.create();h.update(k.toDer(l.certificateToAsn1(g)).getBytes()),f=h.digest().getBytes()}else f=j.random.getBytes(20);var i=[];null!==f&&i.push(k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(l.oids.localKeyId).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SET,!0,[k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,f)])])),"friendlyName"in d&&i.push(k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(l.oids.friendlyName).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SET,!0,[k.create(k.Class.UNIVERSAL,k.Type.BMPSTRING,!1,d.friendlyName)])])),i.length>0&&(e=k.create(k.Class.UNIVERSAL,k.Type.SET,!0,i));var n=[],o=[];null!==b&&(o=j.util.isArray(b)?b:[b]);for(var p=[],q=0;q<o.length;++q){b=o[q],"string"==typeof b&&(b=l.certificateFromPem(b));var r=0===q?e:void 0,s=l.certificateToAsn1(b),t=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(l.oids.certBag).getBytes()),k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(l.oids.x509Certificate).getBytes()),k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,k.toDer(s).getBytes())])])]),r]);p.push(t)}if(p.length>0){var u=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,p),v=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(l.oids.data).getBytes()),k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,k.toDer(u).getBytes())])]);n.push(v)}var w=null;if(null!==a){var x=l.wrapRsaPrivateKey(l.privateKeyToAsn1(a));w=null===c?k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(l.oids.keyBag).getBytes()),k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[x]),e]):k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(l.oids.pkcs8ShroudedKeyBag).getBytes()),k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[l.encryptPrivateKeyInfo(x,c,d)]),e]);var y=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[w]),z=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(l.oids.data).getBytes()),k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,k.toDer(y).getBytes())])]);n.push(z)}var A,B=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,n);if(d.useMac){var h=j.md.sha1.create(),C=new j.util.ByteBuffer(j.random.getBytes(d.saltSize)),D=d.count,a=m.generateKey(c,C,3,D,20),E=j.hmac.create();E.start(h,a),E.update(k.toDer(B).getBytes());var F=E.getMac();A=k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(l.oids.sha1).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.NULL,!1,"")]),k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,F.getBytes())]),k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,C.getBytes()),k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(D).getBytes())])}return k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.INTEGER,!1,k.integerToDer(3).getBytes()),k.create(k.Class.UNIVERSAL,k.Type.SEQUENCE,!0,[k.create(k.Class.UNIVERSAL,k.Type.OID,!1,k.oidToDer(l.oids.data).getBytes()),k.create(k.Class.CONTEXT_SPECIFIC,0,!0,[k.create(k.Class.UNIVERSAL,k.Type.OCTETSTRING,!1,k.toDer(B).getBytes())])]),A])},m.generateKey=j.pbe.generatePkcs12Key},function(a,b,c){var d=c(0);c(3),c(1);var e=d.asn1,f=a.exports=d.pkcs7asn1=d.pkcs7asn1||{};d.pkcs7=d.pkcs7||{},d.pkcs7.asn1=f;var g={name:"ContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};f.contentInfoValidator=g;var h={name:"EncryptedContentInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};f.envelopedDataValidator={name:"EnvelopedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(h)},f.encryptedDataValidator={name:"EncryptedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"}].concat(h)};var i={name:"SignerInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};f.signedDataValidator={name:"SignedData",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},g,{name:"SignedData.Certificates",tagClass:e.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:e.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:e.Class.UNIVERSAL,type:e.Type.SET,capture:"signerInfos",optional:!0,value:[i]}]},f.recipientInfoValidator={name:"RecipientInfo",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:e.Class.UNIVERSAL,type:e.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:e.Class.UNIVERSAL,type:e.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:e.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter"}]},{name:"RecipientInfo.encryptedKey",tagClass:e.Class.UNIVERSAL,type:e.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}},function(a,b,c){var d=c(0);c(3),c(6),c(22),c(7),c(15),c(24),c(16),c(11),c(1),c(17);var e=d.asn1,f=a.exports=d.pki=d.pki||{};f.pemToDer=function(a){var b=d.pem.decode(a)[0];if(b.procType&&"ENCRYPTED"===b.procType.type)throw new Error("Could not convert PEM to DER; PEM is encrypted.");return d.util.createBuffer(b.body)},f.privateKeyFromPem=function(a){var b=d.pem.decode(a)[0];if("PRIVATE KEY"!==b.type&&"RSA PRIVATE KEY"!==b.type){var c=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw c.headerType=b.type,c}if(b.procType&&"ENCRYPTED"===b.procType.type)throw new Error("Could not convert private key from PEM; PEM is encrypted.");var g=e.fromDer(b.body);return f.privateKeyFromAsn1(g)},f.privateKeyToPem=function(a,b){var c={type:"RSA PRIVATE KEY",body:e.toDer(f.privateKeyToAsn1(a)).getBytes()};return d.pem.encode(c,{maxline:b})},f.privateKeyInfoToPem=function(a,b){var c={type:"PRIVATE KEY",body:e.toDer(a).getBytes()};return d.pem.encode(c,{maxline:b})}},function(a,b,c){var d=c(0);c(1),c(13),c(2),function(){function b(a,b,d,e){return"workers"in d?f(a,b,d,e):c(a,b,d,e)}function c(a,b,c,d){var f=g(a,b),i=0,j=h(f.bitLength());"millerRabinTests"in c&&(j=c.millerRabinTests);var k=10;"maxBlockTime"in c&&(k=c.maxBlockTime),e(f,a,b,i,j,k,d)}function e(a,b,c,f,h,i,j){
var l=+new Date;do{if(a.bitLength()>b&&(a=g(b,c)),a.isProbablePrime(h))return j(null,a);a.dAddOffset(k[f++%8],0)}while(0>i||+new Date-l<i);d.util.setImmediate(function(){e(a,b,c,f,h,i,j)})}function f(a,b,e,f){function h(){function c(c){if(!o){--h;var e=c.data;if(e.found){for(var k=0;k<d.length;++k)d[k].terminate();return o=!0,f(null,new j(e.prime,16))}i.bitLength()>a&&(i=g(a,b));var n=i.toString(16);c.target.postMessage({hex:n,workLoad:l}),i.dAddOffset(m,0)}}k=Math.max(1,k);for(var d=[],e=0;k>e;++e)d[e]=new Worker(n);for(var h=k,e=0;k>e;++e)d[e].addEventListener("message",c);var o=!1}if("undefined"==typeof Worker)return c(a,b,e,f);var i=g(a,b),k=e.workers,l=e.workLoad||100,m=30*l/8,n=e.workerScript||"forge/prime.worker.js";return-1===k?d.util.estimateCores(function(a,b){a&&(b=2),k=b-1,h()}):void h()}function g(a,b){var c=new j(a,b),d=a-1;return c.testBit(d)||c.bitwiseTo(j.ONE.shiftLeft(d),m,c),c.dAddOffset(31-c.mod(l).byteValue(),0),c}function h(a){return 100>=a?27:150>=a?18:200>=a?15:250>=a?12:300>=a?9:350>=a?8:400>=a?7:500>=a?6:600>=a?5:800>=a?4:1250>=a?3:2}if(d.prime)return void(a.exports=d.prime);var i=a.exports=d.prime=d.prime||{},j=d.jsbn.BigInteger,k=[6,4,2,4,2,4,6,2],l=new j(null);l.fromInt(30);var m=function(a,b){return a|b};i.generateProbablePrime=function(a,c,e){"function"==typeof c&&(e=c,c={}),c=c||{};var f=c.algorithm||"PRIMEINC";"string"==typeof f&&(f={name:f}),f.options=f.options||{};var g=c.prng||d.random,h={nextBytes:function(a){for(var b=g.getBytesSync(a.length),c=0;c<a.length;++c)a[c]=b.charCodeAt(c)}};if("PRIMEINC"===f.name)return b(a,h,f.options,e);throw new Error("Invalid prime generation algorithm: "+f.name)}}()},function(a,b,c){var d=c(0);c(1);var e=null;!d.util.isNodejs||d.options.usePureJavaScript||process.versions["node-webkit"]||(e=c(32));var f=a.exports=d.prng=d.prng||{};f.create=function(a){function b(a){if(h.pools[0].messageLength>=32)return f(),a();var b=32-h.pools[0].messageLength<<5;h.seedFile(b,function(b,c){return b?a(b):(h.collect(c),f(),void a())})}function c(){if(h.pools[0].messageLength>=32)return f();var a=32-h.pools[0].messageLength<<5;h.collect(h.seedFileSync(a)),f()}function f(){var a=h.plugin.md.create();a.update(h.pools[0].digest().getBytes()),h.pools[0].start();for(var b=1,c=1;32>c;++c)b=31===b?2147483648:b<<2,b%h.reseeds===0&&(a.update(h.pools[c].digest().getBytes()),h.pools[c].start());var d=a.digest().getBytes();a.start(),a.update(d);var e=a.digest().getBytes();h.key=h.plugin.formatKey(d),h.seed=h.plugin.formatSeed(e),h.reseeds=4294967295===h.reseeds?0:h.reseeds+1,h.generated=0}function g(a){var b=null;if("undefined"!=typeof window){var c=window.crypto||window.msCrypto;c&&c.getRandomValues&&(b=function(a){return c.getRandomValues(a)})}var e=d.util.createBuffer();if(b)for(;e.length()<a;){var f=Math.max(1,Math.min(a-e.length(),65536)/4),g=new Uint32Array(Math.floor(f));try{b(g);for(var h=0;h<g.length;++h)e.putInt32(g[h])}catch(i){if(!("undefined"!=typeof QuotaExceededError&&i instanceof QuotaExceededError))throw i}}if(e.length()<a)for(var j,k,l,m=Math.floor(65536*Math.random());e.length()<a;){k=16807*(65535&m),j=16807*(m>>16),k+=(32767&j)<<16,k+=j>>15,k=(2147483647&k)+(k>>31),m=4294967295&k;for(var h=0;3>h;++h)l=m>>>(h<<3),l^=Math.floor(256*Math.random()),e.putByte(String.fromCharCode(255&l))}return e.getBytes(a)}for(var h={plugin:a,key:null,seed:null,time:null,reseeds:0,generated:0},i=a.md,j=new Array(32),k=0;32>k;++k)j[k]=i.create();return h.pools=j,h.pool=0,h.generate=function(a,c){function e(l){if(l)return c(l);if(k.length()>=a)return c(null,k.getBytes(a));if(h.generated>1048575&&(h.key=null),null===h.key)return d.util.nextTick(function(){b(e)});var m=f(h.key,h.seed);h.generated+=m.length,k.putBytes(m),h.key=i(f(h.key,g(h.seed))),h.seed=j(f(h.key,h.seed)),d.util.setImmediate(e)}if(!c)return h.generateSync(a);var f=h.plugin.cipher,g=h.plugin.increment,i=h.plugin.formatKey,j=h.plugin.formatSeed,k=d.util.createBuffer();h.key=null,e()},h.generateSync=function(a){var b=h.plugin.cipher,e=h.plugin.increment,f=h.plugin.formatKey,g=h.plugin.formatSeed;h.key=null;for(var i=d.util.createBuffer();i.length()<a;){h.generated>1048575&&(h.key=null),null===h.key&&c();var j=b(h.key,h.seed);h.generated+=j.length,i.putBytes(j),h.key=f(b(h.key,e(h.seed))),h.seed=g(b(h.key,h.seed))}return i.getBytes(a)},e?(h.seedFile=function(a,b){e.randomBytes(a,function(a,c){return a?b(a):void b(null,c.toString())})},h.seedFileSync=function(a){return e.randomBytes(a).toString()}):(h.seedFile=function(a,b){try{b(null,g(a))}catch(c){b(c)}},h.seedFileSync=g),h.collect=function(a){for(var b=a.length,c=0;b>c;++c)h.pools[h.pool].update(a.substr(c,1)),h.pool=31===h.pool?0:h.pool+1},h.collectInt=function(a,b){for(var c="",d=0;b>d;d+=8)c+=String.fromCharCode(a>>d&255);h.collect(c)},h.registerWorker=function(a){if(a===self)h.seedFile=function(a,b){function c(a){var d=a.data;d.forge&&d.forge.prng&&(self.removeEventListener("message",c),b(d.forge.prng.err,d.forge.prng.bytes))}self.addEventListener("message",c),self.postMessage({forge:{prng:{needed:a}}})};else{var b=function(b){var c=b.data;c.forge&&c.forge.prng&&h.seedFile(c.forge.prng.needed,function(b,c){a.postMessage({forge:{prng:{err:b,bytes:c}}})})};a.addEventListener("message",b)}},h}},function(a,b,c){var d=c(0);c(1);var e=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],f=[1,2,3,5],g=function(a,b){return a<<b&65535|(65535&a)>>16-b},h=function(a,b){return(65535&a)>>b|a<<16-b&65535};a.exports=d.rc2=d.rc2||{},d.rc2.expandKey=function(a,b){"string"==typeof a&&(a=d.util.createBuffer(a)),b=b||128;var c,f=a,g=a.length(),h=b,i=Math.ceil(h/8),j=255>>(7&h);for(c=g;128>c;c++)f.putByte(e[f.at(c-1)+f.at(c-g)&255]);for(f.setAt(128-i,e[f.at(128-i)&j]),c=127-i;c>=0;c--)f.setAt(c,e[f.at(c+1)^f.at(c+i)]);return f};var i=function(a,b,c){var e,i,j,k,l=!1,m=null,n=null,o=null,p=[];for(a=d.rc2.expandKey(a,b),j=0;64>j;j++)p.push(a.getInt16Le());c?(e=function(a){for(j=0;4>j;j++)a[j]+=p[k]+(a[(j+3)%4]&a[(j+2)%4])+(~a[(j+3)%4]&a[(j+1)%4]),a[j]=g(a[j],f[j]),k++},i=function(a){for(j=0;4>j;j++)a[j]+=p[63&a[(j+3)%4]]}):(e=function(a){for(j=3;j>=0;j--)a[j]=h(a[j],f[j]),a[j]-=p[k]+(a[(j+3)%4]&a[(j+2)%4])+(~a[(j+3)%4]&a[(j+1)%4]),k--},i=function(a){for(j=3;j>=0;j--)a[j]-=p[63&a[(j+3)%4]]});var q=function(a){var b=[];for(j=0;4>j;j++){var d=m.getInt16Le();null!==o&&(c?d^=o.getInt16Le():o.putInt16Le(d)),b.push(65535&d)}k=c?0:63;for(var e=0;e<a.length;e++)for(var f=0;f<a[e][0];f++)a[e][1](b);for(j=0;4>j;j++)null!==o&&(c?o.putInt16Le(b[j]):b[j]^=o.getInt16Le()),n.putInt16Le(b[j])},r=null;return r={start:function(a,b){a&&"string"==typeof a&&(a=d.util.createBuffer(a)),l=!1,m=d.util.createBuffer(),n=b||new d.util.createBuffer,o=a,r.output=n},update:function(a){for(l||m.putBuffer(a);m.length()>=8;)q([[5,e],[1,i],[6,e],[1,i],[5,e]])},finish:function(a){var b=!0;if(c)if(a)b=a(8,m,!c);else{var d=8===m.length()?8:8-m.length();m.fillWithByte(d,d)}if(b&&(l=!0,r.update()),!c&&(b=0===m.length()))if(a)b=a(8,n,!c);else{var e=n.length(),f=n.at(e-1);f>e?b=!1:n.truncate(f)}return b}}};d.rc2.startEncrypting=function(a,b,c){var e=d.rc2.createEncryptionCipher(a,128);return e.start(b,c),e},d.rc2.createEncryptionCipher=function(a,b){return i(a,b,!0)},d.rc2.startDecrypting=function(a,b,c){var e=d.rc2.createDecryptionCipher(a,128);return e.start(b,c),e},d.rc2.createDecryptionCipher=function(a,b){return i(a,b,!1)}},function(a,b,c){function d(){h=String.fromCharCode(128),h+=f.util.fillString(String.fromCharCode(0),64),j=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],i=!0}function e(a,b,c){for(var d,e,f,g,h,i,k,l,m,n,o,p,q,r,s,t=c.length();t>=64;){for(k=0;16>k;++k)b[k]=c.getInt32();for(;64>k;++k)d=b[k-2],d=(d>>>17|d<<15)^(d>>>19|d<<13)^d>>>10,e=b[k-15],e=(e>>>7|e<<25)^(e>>>18|e<<14)^e>>>3,b[k]=d+b[k-7]+e+b[k-16]|0;for(l=a.h0,m=a.h1,n=a.h2,o=a.h3,p=a.h4,q=a.h5,r=a.h6,s=a.h7,k=0;64>k;++k)g=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7),h=r^p&(q^r),f=(l>>>2|l<<30)^(l>>>13|l<<19)^(l>>>22|l<<10),i=l&m|n&(l^m),d=s+g+h+j[k]+b[k],e=f+i,s=r,r=q,q=p,p=o+d>>>0,o=n,n=m,m=l,l=d+e>>>0;a.h0=a.h0+l|0,a.h1=a.h1+m|0,a.h2=a.h2+n|0,a.h3=a.h3+o|0,a.h4=a.h4+p|0,a.h5=a.h5+q|0,a.h6=a.h6+r|0,a.h7=a.h7+s|0,t-=64}}var f=c(0);c(4),c(1);var g=a.exports=f.sha256=f.sha256||{};f.md.sha256=f.md.algorithms.sha256=g,g.create=function(){i||d();var a=null,b=f.util.createBuffer(),c=new Array(64),g={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return g.start=function(){g.messageLength=0,g.fullMessageLength=g.messageLength64=[];for(var c=g.messageLengthSize/4,d=0;c>d;++d)g.fullMessageLength.push(0);return b=f.util.createBuffer(),a={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},g},g.start(),g.update=function(d,h){"utf8"===h&&(d=f.util.encodeUtf8(d));var i=d.length;g.messageLength+=i,i=[i/4294967296>>>0,i>>>0];for(var j=g.fullMessageLength.length-1;j>=0;--j)g.fullMessageLength[j]+=i[1],i[1]=i[0]+(g.fullMessageLength[j]/4294967296>>>0),g.fullMessageLength[j]=g.fullMessageLength[j]>>>0,i[0]=i[1]/4294967296>>>0;return b.putBytes(d),e(a,c,b),(b.read>2048||0===b.length())&&b.compact(),g},g.digest=function(){var d=f.util.createBuffer();d.putBytes(b.bytes());var i=g.fullMessageLength[g.fullMessageLength.length-1]+g.messageLengthSize,j=i&g.blockLength-1;d.putBytes(h.substr(0,g.blockLength-j));for(var k,l,m=8*g.fullMessageLength[0],n=0;n<g.fullMessageLength.length-1;++n)k=8*g.fullMessageLength[n+1],l=k/4294967296>>>0,m+=l,d.putInt32(m>>>0),m=k>>>0;d.putInt32(m);var o={h0:a.h0,h1:a.h1,h2:a.h2,h3:a.h3,h4:a.h4,h5:a.h5,h6:a.h6,h7:a.h7};e(o,c,d);var p=f.util.createBuffer();return p.putInt32(o.h0),p.putInt32(o.h1),p.putInt32(o.h2),p.putInt32(o.h3),p.putInt32(o.h4),p.putInt32(o.h5),p.putInt32(o.h6),p.putInt32(o.h7),p},g};var h=null,i=!1,j=null},function(a,b,c){var d=c(0);c(3),c(8),c(14),c(7),c(26),c(2),c(9),c(1);var e=function(a,b,c,e){var f=d.util.createBuffer(),g=a.length>>1,h=g+(1&a.length),i=a.substr(0,h),j=a.substr(g,h),k=d.util.createBuffer(),l=d.hmac.create();c=b+c;var m=Math.ceil(e/16),n=Math.ceil(e/20);l.start("MD5",i);var o=d.util.createBuffer();k.putBytes(c);for(var p=0;m>p;++p)l.start(null,null),l.update(k.getBytes()),k.putBuffer(l.digest()),l.start(null,null),l.update(k.bytes()+c),o.putBuffer(l.digest());l.start("SHA1",j);var q=d.util.createBuffer();k.clear(),k.putBytes(c);for(var p=0;n>p;++p)l.start(null,null),l.update(k.getBytes()),k.putBuffer(l.digest()),l.start(null,null),l.update(k.bytes()+c),q.putBuffer(l.digest());return f.putBytes(d.util.xorBytes(o.getBytes(),q.getBytes(),e)),f},f=function(a,b,c){var e=d.hmac.create();e.start("SHA1",a);var f=d.util.createBuffer();return f.putInt32(b[0]),f.putInt32(b[1]),f.putByte(c.type),f.putByte(c.version.major),f.putByte(c.version.minor),f.putInt16(c.length),f.putBytes(c.fragment.bytes()),e.update(f.getBytes()),e.digest().getBytes()},g=function(a,b,c){var e=!1;try{var f=a.deflate(b.fragment.getBytes());b.fragment=d.util.createBuffer(f),b.length=f.length,e=!0}catch(g){}return e},h=function(a,b,c){var e=!1;try{var f=a.inflate(b.fragment.getBytes());b.fragment=d.util.createBuffer(f),b.length=f.length,e=!0}catch(g){}return e},i=function(a,b){var c=0;switch(b){case 1:c=a.getByte();break;case 2:c=a.getInt16();break;case 3:c=a.getInt24();break;case 4:c=a.getInt32()}return d.util.createBuffer(a.getBytes(c))},j=function(a,b,c){a.putInt(c.length(),b<<3),a.putBuffer(c)},k={};k.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}},k.SupportedVersions=[k.Versions.TLS_1_1,k.Versions.TLS_1_0],k.Version=k.SupportedVersions[0],k.MaxFragment=15360,k.ConnectionEnd={server:0,client:1},k.PRFAlgorithm={tls_prf_sha256:0},k.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2},k.CipherType={stream:0,block:1,aead:2},k.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4},k.CompressionMethod={none:0,deflate:1},k.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24},k.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20},k.Alert={},k.Alert.Level={warning:1,fatal:2},k.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100},k.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2},k.CipherSuites={},k.getCipherSuite=function(a){var b=null;for(var c in k.CipherSuites){var d=k.CipherSuites[c];if(d.id[0]===a.charCodeAt(0)&&d.id[1]===a.charCodeAt(1)){b=d;break}}return b},k.handleUnexpected=function(a,b){var c=!a.open&&a.entity===k.ConnectionEnd.client;c||a.error(a,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.unexpected_message}})},k.handleHelloRequest=function(a,b,c){!a.handshaking&&a.handshakes>0&&(k.queue(a,k.createAlert(a,{level:k.Alert.Level.warning,description:k.Alert.Description.no_renegotiation})),k.flush(a)),a.process()},k.parseHelloMessage=function(a,b,c){var e=null,f=a.entity===k.ConnectionEnd.client;if(38>c)a.error(a,{message:f?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}});else{var g=b.fragment,h=g.length();if(e={version:{major:g.getByte(),minor:g.getByte()},random:d.util.createBuffer(g.getBytes(32)),session_id:i(g,1),extensions:[]},f?(e.cipher_suite=g.getBytes(2),e.compression_method=g.getByte()):(e.cipher_suites=i(g,2),e.compression_methods=i(g,1)),h=c-(h-g.length()),h>0){for(var j=i(g,2);j.length()>0;)e.extensions.push({type:[j.getByte(),j.getByte()],data:i(j,2)});if(!f)for(var l=0;l<e.extensions.length;++l){var m=e.extensions[l];if(0===m.type[0]&&0===m.type[1])for(var n=i(m.data,2);n.length()>0;){var o=n.getByte();if(0!==o)break;a.session.extensions.server_name.serverNameList.push(i(n,2).getBytes())}}}if(a.session.version&&(e.version.major!==a.session.version.major||e.version.minor!==a.session.version.minor))return a.error(a,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.protocol_version}});if(f)a.session.cipherSuite=k.getCipherSuite(e.cipher_suite);else for(var p=d.util.createBuffer(e.cipher_suites.bytes());p.length()>0&&(a.session.cipherSuite=k.getCipherSuite(p.getBytes(2)),null===a.session.cipherSuite););if(null===a.session.cipherSuite)return a.error(a,{message:"No cipher suites in common.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.handshake_failure},cipherSuite:d.util.bytesToHex(e.cipher_suite)});f?a.session.compressionMethod=e.compression_method:a.session.compressionMethod=k.CompressionMethod.none}return e},k.createSecurityParameters=function(a,b){var c=a.entity===k.ConnectionEnd.client,d=b.random.bytes(),e=c?a.session.sp.client_random:d,f=c?d:k.createRandom().getBytes();a.session.sp={entity:a.entity,prf_algorithm:k.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:a.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:e,server_random:f}},k.handleServerHello=function(a,b,c){var d=k.parseHelloMessage(a,b,c);if(!a.fail){if(!(d.version.minor<=a.version.minor))return a.error(a,{message:"Incompatible TLS version.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.protocol_version}});a.version.minor=d.version.minor,a.session.version=a.version;var e=d.session_id.bytes();e.length>0&&e===a.session.id?(a.expect=q,a.session.resuming=!0,a.session.sp.server_random=d.random.bytes()):(a.expect=m,a.session.resuming=!1,k.createSecurityParameters(a,d)),a.session.id=e,a.process()}},k.handleClientHello=function(a,b,c){var e=k.parseHelloMessage(a,b,c);if(!a.fail){var f=e.session_id.bytes(),g=null;if(a.sessionCache&&(g=a.sessionCache.getSession(f),null===g?f="":(g.version.major!==e.version.major||g.version.minor>e.version.minor)&&(g=null,f="")),0===f.length&&(f=d.random.getBytes(32)),a.session.id=f,a.session.clientHelloVersion=e.version,a.session.sp={},g)a.version=a.session.version=g.version,a.session.sp=g.sp;else{for(var h,i=1;i<k.SupportedVersions.length&&(h=k.SupportedVersions[i],!(h.minor<=e.version.minor));++i);a.version={major:h.major,minor:h.minor},a.session.version=a.version}null!==g?(a.expect=y,a.session.resuming=!0,a.session.sp.client_random=e.random.bytes()):(a.expect=a.verifyClient!==!1?v:w,a.session.resuming=!1,k.createSecurityParameters(a,e)),a.open=!0,k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createServerHello(a)})),a.session.resuming?(k.queue(a,k.createRecord(a,{type:k.ContentType.change_cipher_spec,data:k.createChangeCipherSpec()})),a.state.pending=k.createConnectionState(a),a.state.current.write=a.state.pending.write,k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createFinished(a)}))):(k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createCertificate(a)})),a.fail||(k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createServerKeyExchange(a)})),a.verifyClient!==!1&&k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createCertificateRequest(a)})),k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createServerHelloDone(a)})))),k.flush(a),a.process()}},k.handleCertificate=function(a,b,c){if(3>c)return a.error(a,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}});var e,f,g=b.fragment,h={certificate_list:i(g,3)},j=[];try{for(;h.certificate_list.length()>0;)e=i(h.certificate_list,3),f=d.asn1.fromDer(e),e=d.pki.certificateFromAsn1(f,!0),j.push(e)}catch(l){return a.error(a,{message:"Could not parse certificate list.",cause:l,send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.bad_certificate}})}var m=a.entity===k.ConnectionEnd.client;!m&&a.verifyClient!==!0||0!==j.length?0===j.length?a.expect=m?n:w:(m?a.session.serverCertificate=j[0]:a.session.clientCertificate=j[0],k.verifyCertificateChain(a,j)&&(a.expect=m?n:w)):a.error(a,{message:m?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}}),a.process()},k.handleServerKeyExchange=function(a,b,c){return c>0?a.error(a,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.unsupported_certificate}}):(a.expect=o,void a.process())},k.handleClientKeyExchange=function(a,b,c){if(48>c)return a.error(a,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.unsupported_certificate}});var e=b.fragment,f={enc_pre_master_secret:i(e,2).getBytes()},g=null;if(a.getPrivateKey)try{g=a.getPrivateKey(a,a.session.serverCertificate),g=d.pki.privateKeyFromPem(g)}catch(h){a.error(a,{message:"Could not get private key.",cause:h,send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}})}if(null===g)return a.error(a,{message:"No private key set.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}});try{var j=a.session.sp;j.pre_master_secret=g.decrypt(f.enc_pre_master_secret);var l=a.session.clientHelloVersion;if(l.major!==j.pre_master_secret.charCodeAt(0)||l.minor!==j.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch(h){j.pre_master_secret=d.random.getBytes(48)}a.expect=y,null!==a.session.clientCertificate&&(a.expect=x),a.process()},k.handleCertificateRequest=function(a,b,c){if(3>c)return a.error(a,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}});var d=b.fragment,e={certificate_types:i(d,1),certificate_authorities:i(d,2)};a.session.certificateRequest=e,a.expect=p,a.process()},k.handleCertificateVerify=function(a,b,c){if(2>c)return a.error(a,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}});var e=b.fragment;e.read-=4;var f=e.bytes();e.read+=4;var g={signature:i(e,2).getBytes()},h=d.util.createBuffer();h.putBuffer(a.session.md5.digest()),h.putBuffer(a.session.sha1.digest()),h=h.getBytes();try{var j=a.session.clientCertificate;if(!j.publicKey.verify(h,g.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");a.session.md5.update(f),a.session.sha1.update(f)}catch(l){return a.error(a,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.handshake_failure}})}a.expect=y,a.process()},k.handleServerHelloDone=function(a,b,c){if(c>0)return a.error(a,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.record_overflow}});if(null===a.serverCertificate){var e={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.insufficient_security}},f=0,g=a.verify(a,e.alert.description,f,[]);if(g!==!0)return(g||0===g)&&("object"!=typeof g||d.util.isArray(g)?"number"==typeof g&&(e.alert.description=g):(g.message&&(e.message=g.message),g.alert&&(e.alert.description=g.alert))),a.error(a,e)}null!==a.session.certificateRequest&&(b=k.createRecord(a,{type:k.ContentType.handshake,data:k.createCertificate(a)}),k.queue(a,b)),b=k.createRecord(a,{type:k.ContentType.handshake,data:k.createClientKeyExchange(a)}),k.queue(a,b),a.expect=t;var h=function(a,b){null!==a.session.certificateRequest&&null!==a.session.clientCertificate&&k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createCertificateVerify(a,b)})),k.queue(a,k.createRecord(a,{type:k.ContentType.change_cipher_spec,data:k.createChangeCipherSpec()})),a.state.pending=k.createConnectionState(a),a.state.current.write=a.state.pending.write,k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createFinished(a)})),a.expect=q,k.flush(a),a.process()};return null===a.session.certificateRequest||null===a.session.clientCertificate?h(a,null):void k.getClientSignature(a,h)},k.handleChangeCipherSpec=function(a,b){if(1!==b.fragment.getByte())return a.error(a,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.illegal_parameter}});var c=a.entity===k.ConnectionEnd.client;(a.session.resuming&&c||!a.session.resuming&&!c)&&(a.state.pending=k.createConnectionState(a)),a.state.current.read=a.state.pending.read,(!a.session.resuming&&c||a.session.resuming&&!c)&&(a.state.pending=null),a.expect=c?r:z,a.process()},k.handleFinished=function(a,b,c){var f=b.fragment;f.read-=4;var g=f.bytes();f.read+=4;var h=b.fragment.getBytes();f=d.util.createBuffer(),f.putBuffer(a.session.md5.digest()),f.putBuffer(a.session.sha1.digest());var i=a.entity===k.ConnectionEnd.client,j=i?"server finished":"client finished",l=a.session.sp,m=12,n=e;return f=n(l.master_secret,j,f.getBytes(),m),f.getBytes()!==h?a.error(a,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.decrypt_error}}):(a.session.md5.update(g),a.session.sha1.update(g),(a.session.resuming&&i||!a.session.resuming&&!i)&&(k.queue(a,k.createRecord(a,{type:k.ContentType.change_cipher_spec,data:k.createChangeCipherSpec()})),a.state.current.write=a.state.pending.write,a.state.pending=null,k.queue(a,k.createRecord(a,{type:k.ContentType.handshake,data:k.createFinished(a)}))),a.expect=i?s:A,a.handshaking=!1,++a.handshakes,a.peerCertificate=i?a.session.serverCertificate:a.session.clientCertificate,k.flush(a),a.isConnected=!0,a.connected(a),void a.process())},k.handleAlert=function(a,b){var c,d=b.fragment,e={level:d.getByte(),description:d.getByte()};switch(e.description){case k.Alert.Description.close_notify:c="Connection closed.";break;case k.Alert.Description.unexpected_message:c="Unexpected message.";break;case k.Alert.Description.bad_record_mac:c="Bad record MAC.";break;case k.Alert.Description.decryption_failed:c="Decryption failed.";break;case k.Alert.Description.record_overflow:c="Record overflow.";break;case k.Alert.Description.decompression_failure:c="Decompression failed.";break;case k.Alert.Description.handshake_failure:c="Handshake failure.";break;case k.Alert.Description.bad_certificate:c="Bad certificate.";break;case k.Alert.Description.unsupported_certificate:c="Unsupported certificate.";break;case k.Alert.Description.certificate_revoked:c="Certificate revoked.";break;case k.Alert.Description.certificate_expired:c="Certificate expired.";break;case k.Alert.Description.certificate_unknown:c="Certificate unknown.";break;case k.Alert.Description.illegal_parameter:c="Illegal parameter.";break;case k.Alert.Description.unknown_ca:c="Unknown certificate authority.";break;case k.Alert.Description.access_denied:c="Access denied.";break;case k.Alert.Description.decode_error:c="Decode error.";break;case k.Alert.Description.decrypt_error:c="Decrypt error.";break;case k.Alert.Description.export_restriction:c="Export restriction.";break;case k.Alert.Description.protocol_version:c="Unsupported protocol version.";break;case k.Alert.Description.insufficient_security:c="Insufficient security.";break;case k.Alert.Description.internal_error:c="Internal error.";break;case k.Alert.Description.user_canceled:c="User canceled.";break;case k.Alert.Description.no_renegotiation:c="Renegotiation not supported.";break;default:c="Unknown error."}return e.description===k.Alert.Description.close_notify?a.close():(a.error(a,{message:c,send:!1,origin:a.entity===k.ConnectionEnd.client?"server":"client",alert:e}),void a.process())},k.handleHandshake=function(a,b){var c=b.fragment,e=c.getByte(),f=c.getInt24();if(f>c.length())return a.fragmented=b,b.fragment=d.util.createBuffer(),c.read-=4,a.process();a.fragmented=null,c.read-=4;var g=c.bytes(f+4);c.read+=4,e in P[a.entity][a.expect]?(a.entity!==k.ConnectionEnd.server||a.open||a.fail||(a.handshaking=!0,a.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:d.md.md5.create(),sha1:d.md.sha1.create()}),e!==k.HandshakeType.hello_request&&e!==k.HandshakeType.certificate_verify&&e!==k.HandshakeType.finished&&(a.session.md5.update(g),a.session.sha1.update(g)),P[a.entity][a.expect][e](a,b,f)):k.handleUnexpected(a,b)},k.handleApplicationData=function(a,b){a.data.putBuffer(b.fragment),a.dataReady(a),a.process()},k.handleHeartbeat=function(a,b){var c=b.fragment,e=c.getByte(),f=c.getInt16(),g=c.getBytes(f);if(e===k.HeartbeatMessageType.heartbeat_request){if(a.handshaking||f>g.length)return a.process();k.queue(a,k.createRecord(a,{type:k.ContentType.heartbeat,data:k.createHeartbeat(k.HeartbeatMessageType.heartbeat_response,g)})),k.flush(a)}else if(e===k.HeartbeatMessageType.heartbeat_response){if(g!==a.expectedHeartbeatPayload)return a.process();a.heartbeatReceived&&a.heartbeatReceived(a,d.util.createBuffer(g))}a.process()};var l=0,m=1,n=2,o=3,p=4,q=5,r=6,s=7,t=8,u=0,v=1,w=2,x=3,y=4,z=5,A=6,B=k.handleUnexpected,C=k.handleChangeCipherSpec,D=k.handleAlert,E=k.handleHandshake,F=k.handleApplicationData,G=k.handleHeartbeat,H=[];H[k.ConnectionEnd.client]=[[B,D,E,B,G],[B,D,E,B,G],[B,D,E,B,G],[B,D,E,B,G],[B,D,E,B,G],[C,D,B,B,G],[B,D,E,B,G],[B,D,E,F,G],[B,D,E,B,G]],H[k.ConnectionEnd.server]=[[B,D,E,B,G],[B,D,E,B,G],[B,D,E,B,G],[B,D,E,B,G],[C,D,B,B,G],[B,D,E,B,G],[B,D,E,F,G],[B,D,E,B,G]];var I=k.handleHelloRequest,J=k.handleServerHello,K=k.handleCertificate,L=k.handleServerKeyExchange,M=k.handleCertificateRequest,N=k.handleServerHelloDone,O=k.handleFinished,P=[];P[k.ConnectionEnd.client]=[[B,B,J,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[I,B,B,B,B,B,B,B,B,B,B,K,L,M,N,B,B,B,B,B,B],[I,B,B,B,B,B,B,B,B,B,B,B,L,M,N,B,B,B,B,B,B],[I,B,B,B,B,B,B,B,B,B,B,B,B,M,N,B,B,B,B,B,B],[I,B,B,B,B,B,B,B,B,B,B,B,B,B,N,B,B,B,B,B,B],[I,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[I,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O],[I,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[I,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B]];var Q=k.handleClientHello,R=k.handleClientKeyExchange,S=k.handleCertificateVerify;P[k.ConnectionEnd.server]=[[B,Q,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,K,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,R,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,S,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,O],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B],[B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B]],k.generateKeys=function(a,b){var c=e,d=b.client_random+b.server_random;a.session.resuming||(b.master_secret=c(b.pre_master_secret,"master secret",d,48).bytes(),b.pre_master_secret=null),d=b.server_random+b.client_random;var f=2*b.mac_key_length+2*b.enc_key_length,g=a.version.major===k.Versions.TLS_1_0.major&&a.version.minor===k.Versions.TLS_1_0.minor;g&&(f+=2*b.fixed_iv_length);var h=c(b.master_secret,"key expansion",d,f),i={client_write_MAC_key:h.getBytes(b.mac_key_length),server_write_MAC_key:h.getBytes(b.mac_key_length),client_write_key:h.getBytes(b.enc_key_length),server_write_key:h.getBytes(b.enc_key_length)};return g&&(i.client_write_IV=h.getBytes(b.fixed_iv_length),i.server_write_IV=h.getBytes(b.fixed_iv_length)),i},k.createConnectionState=function(a){var b=a.entity===k.ConnectionEnd.client,c=function(){var a={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:function(a){return!0},compressionState:null,compressFunction:function(a){return!0},updateSequenceNumber:function(){4294967295===a.sequenceNumber[1]?(a.sequenceNumber[1]=0,++a.sequenceNumber[0]):++a.sequenceNumber[1];
}};return a},d={read:c(),write:c()};if(d.read.update=function(a,b){return d.read.cipherFunction(b,d.read)?d.read.compressFunction(a,b,d.read)||a.error(a,{message:"Could not decompress record.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.decompression_failure}}):a.error(a,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.bad_record_mac}}),!a.fail},d.write.update=function(a,b){return d.write.compressFunction(a,b,d.write)?d.write.cipherFunction(b,d.write)||a.error(a,{message:"Could not encrypt record.",send:!1,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}}):a.error(a,{message:"Could not compress record.",send:!1,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}}),!a.fail},a.session){var e=a.session.sp;switch(a.session.cipherSuite.initSecurityParameters(e),e.keys=k.generateKeys(a,e),d.read.macKey=b?e.keys.server_write_MAC_key:e.keys.client_write_MAC_key,d.write.macKey=b?e.keys.client_write_MAC_key:e.keys.server_write_MAC_key,a.session.cipherSuite.initConnectionState(d,a,e),e.compression_algorithm){case k.CompressionMethod.none:break;case k.CompressionMethod.deflate:d.read.compressFunction=h,d.write.compressFunction=g;break;default:throw new Error("Unsupported compression algorithm.")}}return d},k.createRandom=function(){var a=new Date,b=+a+6e4*a.getTimezoneOffset(),c=d.util.createBuffer();return c.putInt32(b),c.putBytes(d.random.getBytes(28)),c},k.createRecord=function(a,b){if(!b.data)return null;var c={type:b.type,version:{major:a.version.major,minor:a.version.minor},length:b.data.length(),fragment:b.data};return c},k.createAlert=function(a,b){var c=d.util.createBuffer();return c.putByte(b.level),c.putByte(b.description),k.createRecord(a,{type:k.ContentType.alert,data:c})},k.createClientHello=function(a){a.session.clientHelloVersion={major:a.version.major,minor:a.version.minor};for(var b=d.util.createBuffer(),c=0;c<a.cipherSuites.length;++c){var e=a.cipherSuites[c];b.putByte(e.id[0]),b.putByte(e.id[1])}var f=b.length(),g=d.util.createBuffer();g.putByte(k.CompressionMethod.none);var h=g.length(),i=d.util.createBuffer();if(a.virtualHost){var l=d.util.createBuffer();l.putByte(0),l.putByte(0);var m=d.util.createBuffer();m.putByte(0),j(m,2,d.util.createBuffer(a.virtualHost));var n=d.util.createBuffer();j(n,2,m),j(l,2,n),i.putBuffer(l)}var o=i.length();o>0&&(o+=2);var p=a.session.id,q=p.length+1+2+4+28+2+f+1+h+o,r=d.util.createBuffer();return r.putByte(k.HandshakeType.client_hello),r.putInt24(q),r.putByte(a.version.major),r.putByte(a.version.minor),r.putBytes(a.session.sp.client_random),j(r,1,d.util.createBuffer(p)),j(r,2,b),j(r,1,g),o>0&&j(r,2,i),r},k.createServerHello=function(a){var b=a.session.id,c=b.length+1+2+4+28+2+1,e=d.util.createBuffer();return e.putByte(k.HandshakeType.server_hello),e.putInt24(c),e.putByte(a.version.major),e.putByte(a.version.minor),e.putBytes(a.session.sp.server_random),j(e,1,d.util.createBuffer(b)),e.putByte(a.session.cipherSuite.id[0]),e.putByte(a.session.cipherSuite.id[1]),e.putByte(a.session.compressionMethod),e},k.createCertificate=function(a){var b=a.entity===k.ConnectionEnd.client,c=null;if(a.getCertificate){var e;e=b?a.session.certificateRequest:a.session.extensions.server_name.serverNameList,c=a.getCertificate(a,e)}var f=d.util.createBuffer();if(null!==c)try{d.util.isArray(c)||(c=[c]);for(var g=null,h=0;h<c.length;++h){var i=d.pem.decode(c[h])[0];if("CERTIFICATE"!==i.type&&"X509 CERTIFICATE"!==i.type&&"TRUSTED CERTIFICATE"!==i.type){var l=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw l.headerType=i.type,l}if(i.procType&&"ENCRYPTED"===i.procType.type)throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var m=d.util.createBuffer(i.body);null===g&&(g=d.asn1.fromDer(m.bytes(),!1));var n=d.util.createBuffer();j(n,3,m),f.putBuffer(n)}c=d.pki.certificateFromAsn1(g),b?a.session.clientCertificate=c:a.session.serverCertificate=c}catch(o){return a.error(a,{message:"Could not send certificate list.",cause:o,send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.bad_certificate}})}var p=3+f.length(),q=d.util.createBuffer();return q.putByte(k.HandshakeType.certificate),q.putInt24(p),j(q,3,f),q},k.createClientKeyExchange=function(a){var b=d.util.createBuffer();b.putByte(a.session.clientHelloVersion.major),b.putByte(a.session.clientHelloVersion.minor),b.putBytes(d.random.getBytes(46));var c=a.session.sp;c.pre_master_secret=b.getBytes();var e=a.session.serverCertificate.publicKey;b=e.encrypt(c.pre_master_secret);var f=b.length+2,g=d.util.createBuffer();return g.putByte(k.HandshakeType.client_key_exchange),g.putInt24(f),g.putInt16(b.length),g.putBytes(b),g},k.createServerKeyExchange=function(a){var b=0,c=d.util.createBuffer();return b>0&&(c.putByte(k.HandshakeType.server_key_exchange),c.putInt24(b)),c},k.getClientSignature=function(a,b){var c=d.util.createBuffer();c.putBuffer(a.session.md5.digest()),c.putBuffer(a.session.sha1.digest()),c=c.getBytes(),a.getSignature=a.getSignature||function(a,b,c){var e=null;if(a.getPrivateKey)try{e=a.getPrivateKey(a,a.session.clientCertificate),e=d.pki.privateKeyFromPem(e)}catch(f){a.error(a,{message:"Could not get private key.",cause:f,send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}})}null===e?a.error(a,{message:"No private key set.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.internal_error}}):b=e.sign(b,null),c(a,b)},a.getSignature(a,c,b)},k.createCertificateVerify=function(a,b){var c=b.length+2,e=d.util.createBuffer();return e.putByte(k.HandshakeType.certificate_verify),e.putInt24(c),e.putInt16(b.length),e.putBytes(b),e},k.createCertificateRequest=function(a){var b=d.util.createBuffer();b.putByte(1);var c=d.util.createBuffer();for(var e in a.caStore.certs){var f=a.caStore.certs[e],g=d.pki.distinguishedNameToAsn1(f.subject),h=d.asn1.toDer(g);c.putInt16(h.length()),c.putBuffer(h)}var i=1+b.length()+2+c.length(),l=d.util.createBuffer();return l.putByte(k.HandshakeType.certificate_request),l.putInt24(i),j(l,1,b),j(l,2,c),l},k.createServerHelloDone=function(a){var b=d.util.createBuffer();return b.putByte(k.HandshakeType.server_hello_done),b.putInt24(0),b},k.createChangeCipherSpec=function(){var a=d.util.createBuffer();return a.putByte(1),a},k.createFinished=function(a){var b=d.util.createBuffer();b.putBuffer(a.session.md5.digest()),b.putBuffer(a.session.sha1.digest());var c=a.entity===k.ConnectionEnd.client,f=a.session.sp,g=12,h=e,i=c?"client finished":"server finished";b=h(f.master_secret,i,b.getBytes(),g);var j=d.util.createBuffer();return j.putByte(k.HandshakeType.finished),j.putInt24(b.length()),j.putBuffer(b),j},k.createHeartbeat=function(a,b,c){"undefined"==typeof c&&(c=b.length);var e=d.util.createBuffer();e.putByte(a),e.putInt16(c),e.putBytes(b);var f=e.length(),g=Math.max(16,f-c-3);return e.putBytes(d.random.getBytes(g)),e},k.queue=function(a,b){if(b&&(0!==b.fragment.length()||b.type!==k.ContentType.handshake&&b.type!==k.ContentType.alert&&b.type!==k.ContentType.change_cipher_spec)){if(b.type===k.ContentType.handshake){var c=b.fragment.bytes();a.session.md5.update(c),a.session.sha1.update(c),c=null}var e;if(b.fragment.length()<=k.MaxFragment)e=[b];else{e=[];for(var f=b.fragment.bytes();f.length>k.MaxFragment;)e.push(k.createRecord(a,{type:b.type,data:d.util.createBuffer(f.slice(0,k.MaxFragment))})),f=f.slice(k.MaxFragment);f.length>0&&e.push(k.createRecord(a,{type:b.type,data:d.util.createBuffer(f)}))}for(var g=0;g<e.length&&!a.fail;++g){var h=e[g],i=a.state.current.write;i.update(a,h)&&a.records.push(h)}}},k.flush=function(a){for(var b=0;b<a.records.length;++b){var c=a.records[b];a.tlsData.putByte(c.type),a.tlsData.putByte(c.version.major),a.tlsData.putByte(c.version.minor),a.tlsData.putInt16(c.fragment.length()),a.tlsData.putBuffer(a.records[b].fragment)}return a.records=[],a.tlsDataReady(a)};var T=function(a){switch(a){case!0:return!0;case d.pki.certificateError.bad_certificate:return k.Alert.Description.bad_certificate;case d.pki.certificateError.unsupported_certificate:return k.Alert.Description.unsupported_certificate;case d.pki.certificateError.certificate_revoked:return k.Alert.Description.certificate_revoked;case d.pki.certificateError.certificate_expired:return k.Alert.Description.certificate_expired;case d.pki.certificateError.certificate_unknown:return k.Alert.Description.certificate_unknown;case d.pki.certificateError.unknown_ca:return k.Alert.Description.unknown_ca;default:return k.Alert.Description.bad_certificate}},U=function(a){switch(a){case!0:return!0;case k.Alert.Description.bad_certificate:return d.pki.certificateError.bad_certificate;case k.Alert.Description.unsupported_certificate:return d.pki.certificateError.unsupported_certificate;case k.Alert.Description.certificate_revoked:return d.pki.certificateError.certificate_revoked;case k.Alert.Description.certificate_expired:return d.pki.certificateError.certificate_expired;case k.Alert.Description.certificate_unknown:return d.pki.certificateError.certificate_unknown;case k.Alert.Description.unknown_ca:return d.pki.certificateError.unknown_ca;default:return d.pki.certificateError.bad_certificate}};k.verifyCertificateChain=function(a,b){try{d.pki.verifyCertificateChain(a.caStore,b,function(b,c,e){var f=(T(b),a.verify(a,b,c,e));if(f!==!0){if("object"==typeof f&&!d.util.isArray(f)){var g=new Error("The application rejected the certificate.");throw g.send=!0,g.alert={level:k.Alert.Level.fatal,description:k.Alert.Description.bad_certificate},f.message&&(g.message=f.message),f.alert&&(g.alert.description=f.alert),g}f!==b&&(f=U(f))}return f})}catch(c){var e=c;("object"!=typeof e||d.util.isArray(e))&&(e={send:!0,alert:{level:k.Alert.Level.fatal,description:T(c)}}),"send"in e||(e.send=!0),"alert"in e||(e.alert={level:k.Alert.Level.fatal,description:T(e.error)}),a.error(a,e)}return!a.fail},k.createSessionCache=function(a,b){var c=null;if(a&&a.getSession&&a.setSession&&a.order)c=a;else{c={},c.cache=a||{},c.capacity=Math.max(b||100,1),c.order=[];for(var e in a)c.order.length<=b?c.order.push(e):delete a[e];c.getSession=function(a){var b=null,e=null;if(a?e=d.util.bytesToHex(a):c.order.length>0&&(e=c.order[0]),null!==e&&e in c.cache){b=c.cache[e],delete c.cache[e];for(var f in c.order)if(c.order[f]===e){c.order.splice(f,1);break}}return b},c.setSession=function(a,b){if(c.order.length===c.capacity){var e=c.order.shift();delete c.cache[e]}var e=d.util.bytesToHex(a);c.order.push(e),c.cache[e]=b}}return c},k.createConnection=function(a){var b=null;b=a.caStore?d.util.isArray(a.caStore)?d.pki.createCaStore(a.caStore):a.caStore:d.pki.createCaStore();var c=a.cipherSuites||null;if(null===c){c=[];for(var e in k.CipherSuites)c.push(k.CipherSuites[e])}var f=a.server?k.ConnectionEnd.server:k.ConnectionEnd.client,g=a.sessionCache?k.createSessionCache(a.sessionCache):null,h={version:{major:k.Version.major,minor:k.Version.minor},entity:f,sessionId:a.sessionId,caStore:b,sessionCache:g,cipherSuites:c,connected:a.connected,virtualHost:a.virtualHost||null,verifyClient:a.verifyClient||!1,verify:a.verify||function(a,b,c,d){return b},getCertificate:a.getCertificate||null,getPrivateKey:a.getPrivateKey||null,getSignature:a.getSignature||null,input:d.util.createBuffer(),tlsData:d.util.createBuffer(),data:d.util.createBuffer(),tlsDataReady:a.tlsDataReady,dataReady:a.dataReady,heartbeatReceived:a.heartbeatReceived,closed:a.closed,error:function(b,c){c.origin=c.origin||(b.entity===k.ConnectionEnd.client?"client":"server"),c.send&&(k.queue(b,k.createAlert(b,c.alert)),k.flush(b));var d=c.fatal!==!1;d&&(b.fail=!0),a.error(b,c),d&&b.close(!1)},deflate:a.deflate||null,inflate:a.inflate||null};h.reset=function(a){h.version={major:k.Version.major,minor:k.Version.minor},h.record=null,h.session=null,h.peerCertificate=null,h.state={pending:null,current:null},h.expect=h.entity===k.ConnectionEnd.client?l:u,h.fragmented=null,h.records=[],h.open=!1,h.handshakes=0,h.handshaking=!1,h.isConnected=!1,h.fail=!(a||"undefined"==typeof a),h.input.clear(),h.tlsData.clear(),h.data.clear(),h.state.current=k.createConnectionState(h)},h.reset();var i=function(a,b){var c=b.type-k.ContentType.change_cipher_spec,d=H[a.entity][a.expect];c in d?d[c](a,b):k.handleUnexpected(a,b)},j=function(a){var b=0,c=a.input,e=c.length();if(5>e)b=5-e;else{a.record={type:c.getByte(),version:{major:c.getByte(),minor:c.getByte()},length:c.getInt16(),fragment:d.util.createBuffer(),ready:!1};var f=a.record.version.major===a.version.major;f&&a.session&&a.session.version&&(f=a.record.version.minor===a.version.minor),f||a.error(a,{message:"Incompatible TLS version.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.protocol_version}})}return b},m=function(a){var b=0,c=a.input,d=c.length();if(d<a.record.length)b=a.record.length-d;else{a.record.fragment.putBytes(c.getBytes(a.record.length)),c.compact();var e=a.state.current.read;e.update(a,a.record)&&(null!==a.fragmented&&(a.fragmented.type===a.record.type?(a.fragmented.fragment.putBuffer(a.record.fragment),a.record=a.fragmented):a.error(a,{message:"Invalid fragmented record.",send:!0,alert:{level:k.Alert.Level.fatal,description:k.Alert.Description.unexpected_message}})),a.record.ready=!0)}return b};return h.handshake=function(a){if(h.entity!==k.ConnectionEnd.client)h.error(h,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(h.handshaking)h.error(h,{message:"Handshake already in progress.",fatal:!1});else{h.fail&&!h.open&&0===h.handshakes&&(h.fail=!1),h.handshaking=!0,a=a||"";var b=null;a.length>0&&(h.sessionCache&&(b=h.sessionCache.getSession(a)),null===b&&(a="")),0===a.length&&h.sessionCache&&(b=h.sessionCache.getSession(),null!==b&&(a=b.id)),h.session={id:a,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:d.md.md5.create(),sha1:d.md.sha1.create()},b&&(h.version=b.version,h.session.sp=b.sp),h.session.sp.client_random=k.createRandom().getBytes(),h.open=!0,k.queue(h,k.createRecord(h,{type:k.ContentType.handshake,data:k.createClientHello(h)})),k.flush(h)}},h.process=function(a){var b=0;return a&&h.input.putBytes(a),h.fail||(null!==h.record&&h.record.ready&&h.record.fragment.isEmpty()&&(h.record=null),null===h.record&&(b=j(h)),h.fail||null===h.record||h.record.ready||(b=m(h)),!h.fail&&null!==h.record&&h.record.ready&&i(h,h.record)),b},h.prepare=function(a){return k.queue(h,k.createRecord(h,{type:k.ContentType.application_data,data:d.util.createBuffer(a)})),k.flush(h)},h.prepareHeartbeatRequest=function(a,b){return a instanceof d.util.ByteBuffer&&(a=a.bytes()),"undefined"==typeof b&&(b=a.length),h.expectedHeartbeatPayload=a,k.queue(h,k.createRecord(h,{type:k.ContentType.heartbeat,data:k.createHeartbeat(k.HeartbeatMessageType.heartbeat_request,a,b)})),k.flush(h)},h.close=function(a){if(!h.fail&&h.sessionCache&&h.session){var b={id:h.session.id,version:h.session.version,sp:h.session.sp};b.sp.keys=null,h.sessionCache.setSession(b.id,b)}h.open&&(h.open=!1,h.input.clear(),(h.isConnected||h.handshaking)&&(h.isConnected=h.handshaking=!1,k.queue(h,k.createAlert(h,{level:k.Alert.Level.warning,description:k.Alert.Description.close_notify})),k.flush(h)),h.closed(h)),h.reset(a)},h},a.exports=d.tls=d.tls||{};for(var V in k)"function"!=typeof k[V]&&(d.tls[V]=k[V]);d.tls.prf_tls1=e,d.tls.hmac_sha1=f,d.tls.createSessionCache=k.createSessionCache,d.tls.createConnection=k.createConnection},function(a,b){},function(a,b,c){a.exports=c(0),c(5),c(34),c(3),c(12),c(19),c(10),c(8),c(35),c(20),c(36),c(21),c(15),c(7),c(23),c(24),c(38),c(26),c(27),c(28),c(16),c(2),c(29),c(40),c(41),c(31),c(1)},function(a,b,c){function d(a,b,c){var d=b.entity===j.tls.ConnectionEnd.client;a.read.cipherState={init:!1,cipher:j.cipher.createDecipher("AES-CBC",d?c.keys.server_write_key:c.keys.client_write_key),iv:d?c.keys.server_write_IV:c.keys.client_write_IV},a.write.cipherState={init:!1,cipher:j.cipher.createCipher("AES-CBC",d?c.keys.client_write_key:c.keys.server_write_key),iv:d?c.keys.client_write_IV:c.keys.server_write_IV},a.read.cipherFunction=h,a.write.cipherFunction=e,a.read.macLength=a.write.macLength=c.mac_length,a.read.macFunction=a.write.macFunction=k.hmac_sha1}function e(a,b){var c=!1,d=b.macFunction(b.macKey,b.sequenceNumber,a);a.fragment.putBytes(d),b.updateSequenceNumber();var e;e=a.version.minor===k.Versions.TLS_1_0.minor?b.cipherState.init?null:b.cipherState.iv:j.random.getBytesSync(16),b.cipherState.init=!0;var g=b.cipherState.cipher;return g.start({iv:e}),a.version.minor>=k.Versions.TLS_1_1.minor&&g.output.putBytes(e),g.update(a.fragment),g.finish(f)&&(a.fragment=g.output,a.length=a.fragment.length(),c=!0),c}function f(a,b,c){if(!c){var d=a-b.length()%a;b.fillWithByte(d-1,d)}return!0}function g(a,b,c){var d=!0;if(c){for(var e=b.length(),f=b.last(),g=e-1-f;e-1>g;++g)d=d&&b.at(g)==f;d&&b.truncate(f+1)}return d}function h(a,b){var c=!1;++l;var d;d=a.version.minor===k.Versions.TLS_1_0.minor?b.cipherState.init?null:b.cipherState.iv:a.fragment.getBytes(16),b.cipherState.init=!0;var e=b.cipherState.cipher;e.start({iv:d}),e.update(a.fragment),c=e.finish(g);var f=b.macLength,h=j.random.getBytesSync(f),m=e.output.length();m>=f?(a.fragment=e.output.getBytes(m-f),h=e.output.getBytes(f)):a.fragment=e.output.getBytes(),a.fragment=j.util.createBuffer(a.fragment),a.length=a.fragment.length();var n=b.macFunction(b.macKey,b.sequenceNumber,a);return b.updateSequenceNumber(),c=i(b.macKey,h,n)&&c}function i(a,b,c){var d=j.hmac.create();return d.start("SHA1",a),d.update(b),b=d.digest().getBytes(),d.start(null,null),d.update(c),c=d.digest().getBytes(),b===c}var j=c(0);c(5),c(31);var k=a.exports=j.tls;k.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:function(a){a.bulk_cipher_algorithm=k.BulkCipherAlgorithm.aes,a.cipher_type=k.CipherType.block,a.enc_key_length=16,a.block_length=16,a.fixed_iv_length=16,a.record_iv_length=16,a.mac_algorithm=k.MACAlgorithm.hmac_sha1,a.mac_length=20,a.mac_key_length=20},initConnectionState:d},k.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:function(a){a.bulk_cipher_algorithm=k.BulkCipherAlgorithm.aes,a.cipher_type=k.CipherType.block,a.enc_key_length=32,a.block_length=16,a.fixed_iv_length=16,a.record_iv_length=16,a.mac_algorithm=k.MACAlgorithm.hmac_sha1,a.mac_length=20,a.mac_key_length=20},initConnectionState:d};var l=0},function(a,b,c){function d(a,b,c,d){a.generate=function(a,f){for(var g=new e.util.ByteBuffer,h=Math.ceil(f/d)+c,i=new e.util.ByteBuffer,j=c;h>j;++j){i.putInt32(j),b.start(),b.update(a+i.getBytes());var k=b.digest();g.putBytes(k.getBytes(d))}return g.truncate(g.length()-f),g.getBytes()}}var e=c(0);c(1),c(2),c(13),a.exports=e.kem=e.kem||{};var f=e.jsbn.BigInteger;e.kem.rsa={},e.kem.rsa.create=function(a,b){b=b||{};var c=b.prng||e.random,d={};return d.encrypt=function(b,d){var g,h=Math.ceil(b.n.bitLength()/8);do g=new f(e.util.bytesToHex(c.getBytesSync(h)),16).mod(b.n);while(g.equals(f.ZERO));g=e.util.hexToBytes(g.toString(16));var i=h-g.length;i>0&&(g=e.util.fillString(String.fromCharCode(0),i)+g);var j=b.encrypt(g,"NONE"),k=a.generate(g,d);return{encapsulation:j,key:k}},d.decrypt=function(b,c,d){var e=b.decrypt(c,"NONE");return a.generate(e,d)},d},e.kem.kdf1=function(a,b){d(this,a,0,b||a.digestLength)},e.kem.kdf2=function(a,b){d(this,a,1,b||a.digestLength)}},function(a,b,c){a.exports=c(4),c(14),c(9),c(30),c(39)},function(a,b,c){var d=c(0);c(21),a.exports=d.mgf=d.mgf||{},d.mgf.mgf1=d.mgf1},function(a,b,c){function d(a){var b={},c=[];if(!o.validate(a,p.asn1.recipientInfoValidator,b,c)){var d=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw d.errors=c,d}return{version:b.version.charCodeAt(0),issuer:n.pki.RDNAttributesAsArray(b.issuer),serialNumber:n.util.createBuffer(b.serial).toHex(),encryptedContent:{algorithm:o.derToOid(b.encAlgorithm),parameter:b.encParameter.value,content:b.encKey}}}function e(a){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(a.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:a.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(a.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.encryptedContent.algorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,a.encryptedContent.content)])}function f(a){for(var b=[],c=0;c<a.length;++c)b.push(d(a[c]));return b}function g(a){for(var b=[],c=0;c<a.length;++c)b.push(e(a[c]));return b}function h(a){var b=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(a.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[n.pki.distinguishedNameToAsn1({attributes:a.issuer}),o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,n.util.hexToBytes(a.serialNumber))]),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.digestAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])]);if(a.authenticatedAttributesAsn1&&b.value.push(a.authenticatedAttributesAsn1),b.value.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.signatureAlgorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")])),b.value.push(o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,a.signature)),a.unauthenticatedAttributes.length>0){for(var c=o.create(o.Class.CONTEXT_SPECIFIC,1,!0,[]),d=0;d<a.unauthenticatedAttributes.length;++d){var e=a.unauthenticatedAttributes[d];c.values.push(j(e))}b.value.push(c)}return b}function i(a){for(var b=[],c=0;c<a.length;++c)b.push(h(a[c]));return b}function j(a){var b;if(a.type===n.pki.oids.contentType)b=o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.value).getBytes());else if(a.type===n.pki.oids.messageDigest)b=o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,a.value.bytes());else if(a.type===n.pki.oids.signingTime){var c=new Date("1950-01-01T00:00:00Z"),d=new Date("2050-01-01T00:00:00Z"),e=a.value;if("string"==typeof e){var f=Date.parse(e);e=isNaN(f)?13===e.length?o.utcTimeToDate(e):o.generalizedTimeToDate(e):new Date(f)}b=e>=c&&d>e?o.create(o.Class.UNIVERSAL,o.Type.UTCTIME,!1,o.dateToUtcTime(e)):o.create(o.Class.UNIVERSAL,o.Type.GENERALIZEDTIME,!1,o.dateToGeneralizedTime(e))}return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.type).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[b])])}function k(a){return[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.pki.oids.data).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.algorithm).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,a.parameter.getBytes())]),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,a.content.getBytes())])]}function l(a,b,c){var d={},e=[];if(!o.validate(b,c,d,e)){var f=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw f.errors=f,f}var g=o.derToOid(d.contentType);if(g!==n.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(d.encryptedContent){var h="";if(n.util.isArray(d.encryptedContent))for(var i=0;i<d.encryptedContent.length;++i){if(d.encryptedContent[i].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");h+=d.encryptedContent[i].value}else h=d.encryptedContent;a.encryptedContent={algorithm:o.derToOid(d.encAlgorithm),parameter:n.util.createBuffer(d.encParameter.value),content:n.util.createBuffer(h)}}if(d.content){var h="";if(n.util.isArray(d.content))for(var i=0;i<d.content.length;++i){if(d.content[i].type!==o.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");h+=d.content[i].value}else h=d.content;a.content=n.util.createBuffer(h)}return a.version=d.version.charCodeAt(0),a.rawCapture=d,d}function m(a){if(void 0===a.encryptedContent.key)throw new Error("Symmetric key not available.");if(void 0===a.content){var b;switch(a.encryptedContent.algorithm){case n.pki.oids["aes128-CBC"]:case n.pki.oids["aes192-CBC"]:case n.pki.oids["aes256-CBC"]:b=n.aes.createDecryptionCipher(a.encryptedContent.key);break;case n.pki.oids.desCBC:case n.pki.oids["des-EDE3-CBC"]:b=n.des.createDecryptionCipher(a.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+a.encryptedContent.algorithm)}if(b.start(a.encryptedContent.parameter),b.update(a.encryptedContent.content),!b.finish())throw new Error("Symmetric decryption failed.");a.content=b.output}}var n=c(0);c(5),c(3),c(10),c(6),c(7),c(25),c(2),c(1),c(17);var o=n.asn1,p=a.exports=n.pkcs7=n.pkcs7||{};p.messageFromPem=function(a){var b=n.pem.decode(a)[0];if("PKCS7"!==b.type){var c=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw c.headerType=b.type,c}if(b.procType&&"ENCRYPTED"===b.procType.type)throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var d=o.fromDer(b.body);return p.messageFromAsn1(d)},p.messageToPem=function(a,b){var c={type:"PKCS7",body:o.toDer(a.toAsn1()).getBytes()};return n.pem.encode(c,{maxline:b})},p.messageFromAsn1=function(a){var b={},c=[];if(!o.validate(a,p.asn1.contentInfoValidator,b,c)){var d=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw d.errors=c,d}var e,f=o.derToOid(b.contentType);switch(f){case n.pki.oids.envelopedData:e=p.createEnvelopedData();break;case n.pki.oids.encryptedData:e=p.createEncryptedData();break;case n.pki.oids.signedData:e=p.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+f+" is not (yet) supported.")}return e.fromAsn1(b.content.value[0]),e},p.createSignedData=function(){function a(){for(var a={},b=0;b<c.signers.length;++b){var d=c.signers[b],e=d.digestAlgorithm;e in a||(a[e]=n.md[n.pki.oids[e]].create()),0===d.authenticatedAttributes.length?d.md=a[e]:d.md=n.md[n.pki.oids[e]].create()}c.digestAlgorithmIdentifiers=[];for(var e in a)c.digestAlgorithmIdentifiers.push(o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(e).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.NULL,!1,"")]));return a}function b(a){if(c.contentInfo.value.length<2)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var b=o.derToOid(c.contentInfo.value[0].value),d=c.contentInfo.value[1];d=d.value[0];var e=o.toDer(d);e.getByte(),o.getBerValueLength(e),e=e.getBytes();for(var f in a)a[f].start().update(e);for(var g=new Date,h=0;h<c.signers.length;++h){var k=c.signers[h];if(0===k.authenticatedAttributes.length){if(b!==n.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{k.authenticatedAttributesAsn1=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var l=o.create(o.Class.UNIVERSAL,o.Type.SET,!0,[]),m=0;m<k.authenticatedAttributes.length;++m){var p=k.authenticatedAttributes[m];p.type===n.pki.oids.messageDigest?p.value=a[k.digestAlgorithm].digest():p.type===n.pki.oids.signingTime&&(p.value||(p.value=g)),l.value.push(j(p)),k.authenticatedAttributesAsn1.value.push(j(p))}e=o.toDer(l).getBytes(),k.md.start().update(e)}k.signature=k.key.sign(k.md,"RSASSA-PKCS1-V1_5")}c.signerInfos=i(c.signers)}var c=null;return c={type:n.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:function(a){l(c,a,p.asn1.signedDataValidator),c.certificates=[],c.crls=[],c.digestAlgorithmIdentifiers=[],c.contentInfo=null,c.signerInfos=[];for(var b=c.rawCapture.certificates.value,d=0;d<b.length;++d)c.certificates.push(n.pki.certificateFromAsn1(b[d]))},toAsn1:function(){c.contentInfo||c.sign();for(var a=[],b=0;b<c.certificates.length;++b)a.push(n.pki.certificateToAsn1(c.certificates[b]));var d=[],e=o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(c.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,c.digestAlgorithmIdentifiers),c.contentInfo])]);return a.length>0&&e.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,a)),d.length>0&&e.value[0].value.push(o.create(o.Class.CONTEXT_SPECIFIC,1,!0,d)),e.value[0].value.push(o.create(o.Class.UNIVERSAL,o.Type.SET,!0,c.signerInfos)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(c.type).getBytes()),e])},addSigner:function(a){var b=a.issuer,d=a.serialNumber;if(a.certificate){var e=a.certificate;"string"==typeof e&&(e=n.pki.certificateFromPem(e)),b=e.issuer.attributes,d=e.serialNumber}var f=a.key;if(!f)throw new Error("Could not add PKCS#7 signer; no private key specified.");"string"==typeof f&&(f=n.pki.privateKeyFromPem(f));var g=a.digestAlgorithm||n.pki.oids.sha1;switch(g){case n.pki.oids.sha1:case n.pki.oids.sha256:case n.pki.oids.sha384:case n.pki.oids.sha512:case n.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+g)}var h=a.authenticatedAttributes||[];if(h.length>0){for(var i=!1,j=!1,k=0;k<h.length;++k){var l=h[k];if(i||l.type!==n.pki.oids.contentType){if(j||l.type!==n.pki.oids.messageDigest);else if(j=!0,i)break}else if(i=!0,j)break}if(!i||!j)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}c.signers.push({key:f,version:1,issuer:b,serialNumber:d,digestAlgorithm:g,signatureAlgorithm:n.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:h,unauthenticatedAttributes:[]})},sign:function(){if(("object"!=typeof c.content||null===c.contentInfo)&&(c.contentInfo=o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(n.pki.oids.data).getBytes())]),"content"in c)){var d;c.content instanceof n.util.ByteBuffer?d=c.content.bytes():"string"==typeof c.content&&(d=n.util.encodeUtf8(c.content)),c.contentInfo.value.push(o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.OCTETSTRING,!1,d)]))}if(0!==c.signers.length){var e=a();b(e)}},verify:function(){throw new Error("PKCS#7 signature verification not yet implemented.")},addCertificate:function(a){"string"==typeof a&&(a=n.pki.certificateFromPem(a)),c.certificates.push(a)},addCertificateRevokationList:function(a){throw new Error("PKCS#7 CRL support not yet implemented.")}}},p.createEncryptedData=function(){var a=null;return a={type:n.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(b){l(a,b,p.asn1.encryptedDataValidator)},decrypt:function(b){void 0!==b&&(a.encryptedContent.key=b),m(a)}}},p.createEnvelopedData=function(){var a=null;return a={type:n.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:n.pki.oids["aes256-CBC"]},fromAsn1:function(b){var c=l(a,b,p.asn1.envelopedDataValidator);a.recipients=f(c.recipientInfos.value)},toAsn1:function(){return o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.OID,!1,o.oidToDer(a.type).getBytes()),o.create(o.Class.CONTEXT_SPECIFIC,0,!0,[o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,[o.create(o.Class.UNIVERSAL,o.Type.INTEGER,!1,o.integerToDer(a.version).getBytes()),o.create(o.Class.UNIVERSAL,o.Type.SET,!0,g(a.recipients)),o.create(o.Class.UNIVERSAL,o.Type.SEQUENCE,!0,k(a.encryptedContent))])])]);
},findRecipient:function(b){for(var c=b.issuer.attributes,d=0;d<a.recipients.length;++d){var e=a.recipients[d],f=e.issuer;if(e.serialNumber===b.serialNumber&&f.length===c.length){for(var g=!0,h=0;h<c.length;++h)if(f[h].type!==c[h].type||f[h].value!==c[h].value){g=!1;break}if(g)return e}}return null},decrypt:function(b,c){if(void 0===a.encryptedContent.key&&void 0!==b&&void 0!==c)switch(b.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:case n.pki.oids.desCBC:var d=c.decrypt(b.encryptedContent.content);a.encryptedContent.key=n.util.createBuffer(d);break;default:throw new Error("Unsupported asymmetric cipher, OID "+b.encryptedContent.algorithm)}m(a)},addRecipient:function(b){a.recipients.push({version:0,issuer:b.issuer.attributes,serialNumber:b.serialNumber,encryptedContent:{algorithm:n.pki.oids.rsaEncryption,key:b.publicKey}})},encrypt:function(b,c){if(void 0===a.encryptedContent.content){c=c||a.encryptedContent.algorithm,b=b||a.encryptedContent.key;var d,e,f;switch(c){case n.pki.oids["aes128-CBC"]:d=16,e=16,f=n.aes.createEncryptionCipher;break;case n.pki.oids["aes192-CBC"]:d=24,e=16,f=n.aes.createEncryptionCipher;break;case n.pki.oids["aes256-CBC"]:d=32,e=16,f=n.aes.createEncryptionCipher;break;case n.pki.oids["des-EDE3-CBC"]:d=24,e=8,f=n.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+c)}if(void 0===b)b=n.util.createBuffer(n.random.getBytes(d));else if(b.length()!=d)throw new Error("Symmetric key has wrong length; got "+b.length()+" bytes, expected "+d+".");a.encryptedContent.algorithm=c,a.encryptedContent.key=b,a.encryptedContent.parameter=n.util.createBuffer(n.random.getBytes(e));var g=f(b);if(g.start(a.encryptedContent.parameter.copy()),g.update(a.content),!g.finish())throw new Error("Symmetric encryption failed.");a.encryptedContent.content=g.output}for(var h=0;h<a.recipients.length;++h){var i=a.recipients[h];if(void 0===i.encryptedContent.content)switch(i.encryptedContent.algorithm){case n.pki.oids.rsaEncryption:i.encryptedContent.content=i.encryptedContent.key.encrypt(a.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+i.encryptedContent.algorithm)}}}}}},function(a,b,c){function d(){i=String.fromCharCode(128),i+=f.util.fillString(String.fromCharCode(0),128),k=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],l={},l["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],l["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],l["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],l["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],j=!0}function e(a,b,c){for(var d,e,f,g,h,i,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N=c.length();N>=128;){for(G=0;16>G;++G)b[G][0]=c.getInt32()>>>0,b[G][1]=c.getInt32()>>>0;for(;80>G;++G)J=b[G-2],H=J[0],I=J[1],d=((H>>>19|I<<13)^(I>>>29|H<<3)^H>>>6)>>>0,e=((H<<13|I>>>19)^(I<<3|H>>>29)^(H<<26|I>>>6))>>>0,L=b[G-15],H=L[0],I=L[1],f=((H>>>1|I<<31)^(H>>>8|I<<24)^H>>>7)>>>0,g=((H<<31|I>>>1)^(H<<24|I>>>8)^(H<<25|I>>>7))>>>0,K=b[G-7],M=b[G-16],I=e+K[1]+g+M[1],b[G][0]=d+K[0]+f+M[0]+(I/4294967296>>>0)>>>0,b[G][1]=I>>>0;for(q=a[0][0],r=a[0][1],s=a[1][0],t=a[1][1],u=a[2][0],v=a[2][1],w=a[3][0],x=a[3][1],y=a[4][0],z=a[4][1],A=a[5][0],B=a[5][1],C=a[6][0],D=a[6][1],E=a[7][0],F=a[7][1],G=0;80>G;++G)j=((y>>>14|z<<18)^(y>>>18|z<<14)^(z>>>9|y<<23))>>>0,l=((y<<18|z>>>14)^(y<<14|z>>>18)^(z<<23|y>>>9))>>>0,m=(C^y&(A^C))>>>0,n=(D^z&(B^D))>>>0,h=((q>>>28|r<<4)^(r>>>2|q<<30)^(r>>>7|q<<25))>>>0,i=((q<<4|r>>>28)^(r<<30|q>>>2)^(r<<25|q>>>7))>>>0,o=(q&s|u&(q^s))>>>0,p=(r&t|v&(r^t))>>>0,I=F+l+n+k[G][1]+b[G][1],d=E+j+m+k[G][0]+b[G][0]+(I/4294967296>>>0)>>>0,e=I>>>0,I=i+p,f=h+o+(I/4294967296>>>0)>>>0,g=I>>>0,E=C,F=D,C=A,D=B,A=y,B=z,I=x+e,y=w+d+(I/4294967296>>>0)>>>0,z=I>>>0,w=u,x=v,u=s,v=t,s=q,t=r,I=e+g,q=d+f+(I/4294967296>>>0)>>>0,r=I>>>0;I=a[0][1]+r,a[0][0]=a[0][0]+q+(I/4294967296>>>0)>>>0,a[0][1]=I>>>0,I=a[1][1]+t,a[1][0]=a[1][0]+s+(I/4294967296>>>0)>>>0,a[1][1]=I>>>0,I=a[2][1]+v,a[2][0]=a[2][0]+u+(I/4294967296>>>0)>>>0,a[2][1]=I>>>0,I=a[3][1]+x,a[3][0]=a[3][0]+w+(I/4294967296>>>0)>>>0,a[3][1]=I>>>0,I=a[4][1]+z,a[4][0]=a[4][0]+y+(I/4294967296>>>0)>>>0,a[4][1]=I>>>0,I=a[5][1]+B,a[5][0]=a[5][0]+A+(I/4294967296>>>0)>>>0,a[5][1]=I>>>0,I=a[6][1]+D,a[6][0]=a[6][0]+C+(I/4294967296>>>0)>>>0,a[6][1]=I>>>0,I=a[7][1]+F,a[7][0]=a[7][0]+E+(I/4294967296>>>0)>>>0,a[7][1]=I>>>0,N-=128}}var f=c(0);c(4),c(1);var g=a.exports=f.sha512=f.sha512||{};f.md.sha512=f.md.algorithms.sha512=g;var h=f.sha384=f.sha512.sha384=f.sha512.sha384||{};h.create=function(){return g.create("SHA-384")},f.md.sha384=f.md.algorithms.sha384=h,f.sha512.sha256=f.sha512.sha256||{create:function(){return g.create("SHA-512/256")}},f.md["sha512/256"]=f.md.algorithms["sha512/256"]=f.sha512.sha256,f.sha512.sha224=f.sha512.sha224||{create:function(){return g.create("SHA-512/224")}},f.md["sha512/224"]=f.md.algorithms["sha512/224"]=f.sha512.sha224,g.create=function(a){if(j||d(),"undefined"==typeof a&&(a="SHA-512"),!(a in l))throw new Error("Invalid SHA-512 algorithm: "+a);for(var b=l[a],c=null,g=f.util.createBuffer(),h=new Array(80),k=0;80>k;++k)h[k]=new Array(2);var m=64;switch(a){case"SHA-384":m=48;break;case"SHA-512/256":m=32;break;case"SHA-512/224":m=28}var n={algorithm:a.replace("-","").toLowerCase(),blockLength:128,digestLength:m,messageLength:0,fullMessageLength:null,messageLengthSize:16};return n.start=function(){n.messageLength=0,n.fullMessageLength=n.messageLength128=[];for(var a=n.messageLengthSize/4,d=0;a>d;++d)n.fullMessageLength.push(0);g=f.util.createBuffer(),c=new Array(b.length);for(var d=0;d<b.length;++d)c[d]=b[d].slice(0);return n},n.start(),n.update=function(a,b){"utf8"===b&&(a=f.util.encodeUtf8(a));var d=a.length;n.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var i=n.fullMessageLength.length-1;i>=0;--i)n.fullMessageLength[i]+=d[1],d[1]=d[0]+(n.fullMessageLength[i]/4294967296>>>0),n.fullMessageLength[i]=n.fullMessageLength[i]>>>0,d[0]=d[1]/4294967296>>>0;return g.putBytes(a),e(c,h,g),(g.read>2048||0===g.length())&&g.compact(),n},n.digest=function(){var b=f.util.createBuffer();b.putBytes(g.bytes());var d=n.fullMessageLength[n.fullMessageLength.length-1]+n.messageLengthSize,j=d&n.blockLength-1;b.putBytes(i.substr(0,n.blockLength-j));for(var k,l,m=8*n.fullMessageLength[0],o=0;o<n.fullMessageLength.length-1;++o)k=8*n.fullMessageLength[o+1],l=k/4294967296>>>0,m+=l,b.putInt32(m>>>0),m=k>>>0;b.putInt32(m);for(var p=new Array(c.length),o=0;o<c.length;++o)p[o]=c[o].slice(0);e(p,h,b);var q,r=f.util.createBuffer();q="SHA-512"===a?p.length:"SHA-384"===a?p.length-2:p.length-4;for(var o=0;q>o;++o)r.putInt32(p[o][0]),(o!==q-1||"SHA-512/224"!==a)&&r.putInt32(p[o][1]);return r},n};var i=null,j=!1,k=null,l=null},function(a,b,c){function d(a,b){var c=b.toString(16);c[0]>="8"&&(c="00"+c);var d=g.util.hexToBytes(c);a.putInt32(d.length),a.putBytes(d)}function e(a,b){a.putInt32(b.length),a.putString(b)}function f(){for(var a=g.md.sha1.create(),b=arguments.length,c=0;b>c;++c)a.update(arguments[c]);return a.digest()}var g=c(0);c(5),c(8),c(14),c(9),c(1);var h=a.exports=g.ssh=g.ssh||{};h.privateKeyToPutty=function(a,b,c){c=c||"",b=b||"";var h="ssh-rsa",i=""===b?"none":"aes256-cbc",j="PuTTY-User-Key-File-2: "+h+"\r\n";j+="Encryption: "+i+"\r\n",j+="Comment: "+c+"\r\n";var k=g.util.createBuffer();e(k,h),d(k,a.e),d(k,a.n);var l=g.util.encode64(k.bytes(),64),m=Math.floor(l.length/66)+1;j+="Public-Lines: "+m+"\r\n",j+=l;var n=g.util.createBuffer();d(n,a.d),d(n,a.p),d(n,a.q),d(n,a.qInv);var o;if(b){var p=n.length()+16-1;p-=p%16;var q=f(n.bytes());q.truncate(q.length()-p+n.length()),n.putBuffer(q);var r=g.util.createBuffer();r.putBuffer(f("\x00\x00\x00\x00",b)),r.putBuffer(f("\x00\x00\x00",b));var s=g.aes.createEncryptionCipher(r.truncate(8),"CBC");s.start(g.util.createBuffer().fillWithByte(0,16)),s.update(n.copy()),s.finish();var t=s.output;t.truncate(16),o=g.util.encode64(t.bytes(),64)}else o=g.util.encode64(n.bytes(),64);m=Math.floor(o.length/66)+1,j+="\r\nPrivate-Lines: "+m+"\r\n",j+=o;var u=f("putty-private-key-file-mac-key",b),v=g.util.createBuffer();e(v,h),e(v,i),e(v,c),v.putInt32(k.length()),v.putBuffer(k),v.putInt32(n.length()),v.putBuffer(n);var w=g.hmac.create();return w.start("sha1",u),w.update(v.bytes()),j+="\r\nPrivate-MAC: "+w.digest().toHex()+"\r\n"},h.publicKeyToOpenSSH=function(a,b){var c="ssh-rsa";b=b||"";var f=g.util.createBuffer();return e(f,c),d(f,a.e),d(f,a.n),c+" "+g.util.encode64(f.bytes())+" "+b},h.privateKeyToOpenSSH=function(a,b){return b?g.pki.encryptRsaPrivateKey(a,b,{legacy:!0,algorithm:"aes128"}):g.pki.privateKeyToPem(a)},h.getPublicKeyFingerprint=function(a,b){b=b||{};var c=b.md||g.md.md5.create(),f="ssh-rsa",h=g.util.createBuffer();e(h,f),d(h,a.e),d(h,a.n),c.start(),c.update(h.getBytes());var i=c.digest();if("hex"===b.encoding){var j=i.toHex();return b.delimiter?j.match(/.{2}/g).join(b.delimiter):j}if("binary"===b.encoding)return i.getBytes();if(b.encoding)throw new Error('Unknown encoding "'+b.encoding+'".');return i}},function(a,b,c){var d=c(0);c(19),c(20),c(1);var e="forge.task",f=0,g={},h=0;d.debug.set(e,"tasks",g);var i={};d.debug.set(e,"queues",i);var j="?",k=30,l=20,m="ready",n="running",o="blocked",p="sleeping",q="done",r="error",s="stop",t="start",u="block",v="unblock",w="sleep",x="wakeup",y="cancel",z="fail",A={};A[m]={},A[m][s]=m,A[m][t]=n,A[m][y]=q,A[m][z]=r,A[n]={},A[n][s]=m,A[n][t]=n,A[n][u]=o,A[n][v]=n,A[n][w]=p,A[n][x]=n,A[n][y]=q,A[n][z]=r,A[o]={},A[o][s]=o,A[o][t]=o,A[o][u]=o,A[o][v]=o,A[o][w]=o,A[o][x]=o,A[o][y]=q,A[o][z]=r,A[p]={},A[p][s]=p,A[p][t]=p,A[p][u]=p,A[p][v]=p,A[p][w]=p,A[p][x]=p,A[p][y]=q,A[p][z]=r,A[q]={},A[q][s]=q,A[q][t]=q,A[q][u]=q,A[q][v]=q,A[q][w]=q,A[q][x]=q,A[q][y]=q,A[q][z]=r,A[r]={},A[r][s]=r,A[r][t]=r,A[r][u]=r,A[r][v]=r,A[r][w]=r,A[r][x]=r,A[r][y]=r,A[r][z]=r;var B=function(a){this.id=-1,this.name=a.name||j,this.parent=a.parent||null,this.run=a.run,this.subtasks=[],this.error=!1,this.state=m,this.blocks=0,this.timeoutId=null,this.swapTime=null,this.userData=null,this.id=h++,g[this.id]=this,f>=1&&d.log.verbose(e,"[%s][%s] init",this.id,this.name,this)};B.prototype.debug=function(a){a=a||"",d.log.debug(e,a,"[%s][%s] task:",this.id,this.name,this,"subtasks:",this.subtasks.length,"queue:",i)},B.prototype.next=function(a,b){"function"==typeof a&&(b=a,a=this.name);var c=new B({run:b,name:a,parent:this});return c.state=n,c.type=this.type,c.successCallback=this.successCallback||null,c.failureCallback=this.failureCallback||null,this.subtasks.push(c),this},B.prototype.parallel=function(a,b){return d.util.isArray(a)&&(b=a,a=this.name),this.next(a,function(c){var e=c;e.block(b.length);for(var f=function(a,c){d.task.start({type:a,run:function(a){b[c](a)},success:function(a){e.unblock()},failure:function(a){e.unblock()}})},g=0;g<b.length;g++){var h=a+"__parallel-"+c.id+"-"+g,i=g;f(h,i)}})},B.prototype.stop=function(){this.state=A[this.state][s]},B.prototype.start=function(){this.error=!1,this.state=A[this.state][t],this.state===n&&(this.start=new Date,this.run(this),D(this,0))},B.prototype.block=function(a){a="undefined"==typeof a?1:a,this.blocks+=a,this.blocks>0&&(this.state=A[this.state][u])},B.prototype.unblock=function(a){return a="undefined"==typeof a?1:a,this.blocks-=a,0===this.blocks&&this.state!==q&&(this.state=n,D(this,0)),this.blocks},B.prototype.sleep=function(a){a="undefined"==typeof a?0:a,this.state=A[this.state][w];var b=this;this.timeoutId=setTimeout(function(){b.timeoutId=null,b.state=n,D(b,0)},a)},B.prototype.wait=function(a){a.wait(this)},B.prototype.wakeup=function(){this.state===p&&(cancelTimeout(this.timeoutId),this.timeoutId=null,this.state=n,D(this,0))},B.prototype.cancel=function(){this.state=A[this.state][y],this.permitsNeeded=0,null!==this.timeoutId&&(cancelTimeout(this.timeoutId),this.timeoutId=null),this.subtasks=[]},B.prototype.fail=function(a){if(this.error=!0,E(this,!0),a)a.error=this.error,a.swapTime=this.swapTime,a.userData=this.userData,D(a,0);else{if(null!==this.parent){for(var b=this.parent;null!==b.parent;)b.error=this.error,b.swapTime=this.swapTime,b.userData=this.userData,b=b.parent;E(b,!0)}this.failureCallback&&this.failureCallback(this)}};var C=function(a){a.error=!1,a.state=A[a.state][t],setTimeout(function(){a.state===n&&(a.swapTime=+new Date,a.run(a),D(a,0))},0)},D=function(a,b){var c=b>k||+new Date-a.swapTime>l,d=function(b){if(b++,a.state===n)if(c&&(a.swapTime=+new Date),a.subtasks.length>0){var d=a.subtasks.shift();d.error=a.error,d.swapTime=a.swapTime,d.userData=a.userData,d.run(d),d.error||D(d,b)}else E(a),a.error||null!==a.parent&&(a.parent.error=a.error,a.parent.swapTime=a.swapTime,a.parent.userData=a.userData,D(a.parent,b))};c?setTimeout(d,0):d(b)},E=function(a,b){a.state=q,delete g[a.id],f>=1&&d.log.verbose(e,"[%s][%s] finish",a.id,a.name,a),null===a.parent&&(a.type in i?0===i[a.type].length?d.log.error(e,"[%s][%s] task queue empty [%s]",a.id,a.name,a.type):i[a.type][0]!==a?d.log.error(e,"[%s][%s] task not first in queue [%s]",a.id,a.name,a.type):(i[a.type].shift(),0===i[a.type].length?(f>=1&&d.log.verbose(e,"[%s][%s] delete queue [%s]",a.id,a.name,a.type),delete i[a.type]):(f>=1&&d.log.verbose(e,"[%s][%s] queue start next [%s] remain:%s",a.id,a.name,a.type,i[a.type].length),i[a.type][0].start())):d.log.error(e,"[%s][%s] task queue missing [%s]",a.id,a.name,a.type),b||(a.error&&a.failureCallback?a.failureCallback(a):!a.error&&a.successCallback&&a.successCallback(a)))};a.exports=d.task=d.task||{},d.task.start=function(a){var b=new B({run:a.run,name:a.name||j});b.type=a.type,b.successCallback=a.success||null,b.failureCallback=a.failure||null,b.type in i?i[a.type].push(b):(f>=1&&d.log.verbose(e,"[%s][%s] create queue [%s]",b.id,b.name,b.type),i[b.type]=[b],C(b))},d.task.cancel=function(a){a in i&&(i[a]=[i[a][0]])},d.task.createCondition=function(){var a={tasks:{}};return a.wait=function(b){b.id in a.tasks||(b.block(),a.tasks[b.id]=b)},a.notify=function(){var b=a.tasks;a.tasks={};for(var c in b)b[c].unblock()},a}},function(a,b,c){a.exports=c(33)}])}),function(a,b){a.CodeMirror=b()}(this,function(){"use strict";function a(a){return new RegExp("(^|\\s)"+a+"(?:$|\\s)\\s*")}function b(a){for(var b=a.childNodes.length;b>0;--b)a.removeChild(a.firstChild);return a}function c(a,c){return b(a).appendChild(c)}function d(a,b,c,d){var e=document.createElement(a);if(c&&(e.className=c),d&&(e.style.cssText=d),"string"==typeof b)e.appendChild(document.createTextNode(b));else if(b)for(var f=0;f<b.length;++f)e.appendChild(b[f]);return e}function e(a,b,c,e){var f=d(a,b,c,e);return f.setAttribute("role","presentation"),f}function f(a,b){if(3==b.nodeType&&(b=b.parentNode),a.contains)return a.contains(b);do if(11==b.nodeType&&(b=b.host),b==a)return!0;while(b=b.parentNode)}function g(){var a;try{a=document.activeElement}catch(b){a=document.body||null}for(;a&&a.shadowRoot&&a.shadowRoot.activeElement;)a=a.shadowRoot.activeElement;return a}function h(b,c){var d=b.className;a(c).test(d)||(b.className+=(d?" ":"")+c)}function i(b,c){for(var d=b.split(" "),e=0;e<d.length;e++)d[e]&&!a(d[e]).test(c)&&(c+=" "+d[e]);return c}function j(a){var b=Array.prototype.slice.call(arguments,1);return function(){return a.apply(null,b)}}function k(a,b,c){b||(b={});for(var d in a)!a.hasOwnProperty(d)||c===!1&&b.hasOwnProperty(d)||(b[d]=a[d]);return b}function l(a,b,c,d,e){null==b&&(b=a.search(/[^\s\u00a0]/),-1==b&&(b=a.length));for(var f=d||0,g=e||0;;){var h=a.indexOf("	",f);if(0>h||h>=b)return g+(b-f);g+=h-f,g+=c-g%c,f=h+1}}function m(a,b){for(var c=0;c<a.length;++c)if(a[c]==b)return c;return-1}function n(a,b,c){for(var d=0,e=0;;){var f=a.indexOf("	",d);-1==f&&(f=a.length);var g=f-d;if(f==a.length||e+g>=b)return d+Math.min(g,b-e);if(e+=f-d,e+=c-e%c,d=f+1,e>=b)return d}}function o(a){for(;Vg.length<=a;)Vg.push(p(Vg)+" ");return Vg[a]}function p(a){return a[a.length-1]}function q(a,b){for(var c=[],d=0;d<a.length;d++)c[d]=b(a[d],d);return c}function r(a,b,c){for(var d=0,e=c(b);d<a.length&&c(a[d])<=e;)d++;a.splice(d,0,b)}function s(){}function t(a,b){var c;return Object.create?c=Object.create(a):(s.prototype=a,c=new s),b&&k(b,c),c}function u(a){return/\w/.test(a)||a>""&&(a.toUpperCase()!=a.toLowerCase()||Wg.test(a))}function v(a,b){return b?b.source.indexOf("\\w")>-1&&u(a)?!0:b.test(a):u(a)}function w(a){for(var b in a)if(a.hasOwnProperty(b)&&a[b])return!1;return!0}function x(a){return a.charCodeAt(0)>=768&&Xg.test(a)}function y(a,b,c){for(;(0>c?b>0:b<a.length)&&x(a.charAt(b));)b+=c;return b}function z(a,b,c){for(var d=b>c?-1:1;;){if(b==c)return b;var e=(b+c)/2,f=0>d?Math.ceil(e):Math.floor(e);if(f==b)return a(f)?b:c;a(f)?c=f:b=f+d}}function A(a,b,c){var f=this;this.input=c,f.scrollbarFiller=d("div",null,"CodeMirror-scrollbar-filler"),f.scrollbarFiller.setAttribute("cm-not-content","true"),f.gutterFiller=d("div",null,"CodeMirror-gutter-filler"),f.gutterFiller.setAttribute("cm-not-content","true"),f.lineDiv=e("div",null,"CodeMirror-code"),f.selectionDiv=d("div",null,null,"position: relative; z-index: 1"),f.cursorDiv=d("div",null,"CodeMirror-cursors"),f.measure=d("div",null,"CodeMirror-measure"),f.lineMeasure=d("div",null,"CodeMirror-measure"),f.lineSpace=e("div",[f.measure,f.lineMeasure,f.selectionDiv,f.cursorDiv,f.lineDiv],null,"position: relative; outline: none");var g=e("div",[f.lineSpace],"CodeMirror-lines");f.mover=d("div",[g],null,"position: relative"),f.sizer=d("div",[f.mover],"CodeMirror-sizer"),f.sizerWidth=null,f.heightForcer=d("div",null,null,"position: absolute; height: "+Qg+"px; width: 1px;"),f.gutters=d("div",null,"CodeMirror-gutters"),f.lineGutter=null,f.scroller=d("div",[f.sizer,f.heightForcer,f.gutters],"CodeMirror-scroll"),f.scroller.setAttribute("tabIndex","-1"),f.wrapper=d("div",[f.scrollbarFiller,f.gutterFiller,f.scroller],"CodeMirror"),sg&&8>tg&&(f.gutters.style.zIndex=-1,f.scroller.style.paddingRight=0),ug||og&&Dg||(f.scroller.draggable=!0),a&&(a.appendChild?a.appendChild(f.wrapper):a(f.wrapper)),f.viewFrom=f.viewTo=b.first,f.reportedViewFrom=f.reportedViewTo=b.first,f.view=[],f.renderedView=null,f.externalMeasured=null,f.viewOffset=0,f.lastWrapHeight=f.lastWrapWidth=0,f.updateLineNumbers=null,f.nativeBarWidth=f.barHeight=f.barWidth=0,f.scrollbarsClipped=!1,f.lineNumWidth=f.lineNumInnerWidth=f.lineNumChars=null,f.alignWidgets=!1,f.cachedCharWidth=f.cachedTextHeight=f.cachedPaddingH=null,f.maxLine=null,f.maxLineLength=0,f.maxLineChanged=!1,f.wheelDX=f.wheelDY=f.wheelStartX=f.wheelStartY=null,f.shift=!1,f.selForContextMenu=null,f.activeTouch=null,c.init(f)}function B(a,b){if(b-=a.first,0>b||b>=a.size)throw new Error("There is no line "+(b+a.first)+" in the document.");for(var c=a;!c.lines;)for(var d=0;;++d){var e=c.children[d],f=e.chunkSize();if(f>b){c=e;break}b-=f}return c.lines[b]}function C(a,b,c){var d=[],e=b.line;return a.iter(b.line,c.line+1,function(a){var f=a.text;e==c.line&&(f=f.slice(0,c.ch)),e==b.line&&(f=f.slice(b.ch)),d.push(f),++e}),d}function D(a,b,c){var d=[];return a.iter(b,c,function(a){d.push(a.text)}),d}function E(a,b){var c=b-a.height;if(c)for(var d=a;d;d=d.parent)d.height+=c}function F(a){if(null==a.parent)return null;for(var b=a.parent,c=m(b.lines,a),d=b.parent;d;b=d,d=d.parent)for(var e=0;d.children[e]!=b;++e)c+=d.children[e].chunkSize();return c+b.first}function G(a,b){var c=a.first;a:do{for(var d=0;d<a.children.length;++d){var e=a.children[d],f=e.height;if(f>b){a=e;continue a}b-=f,c+=e.chunkSize()}return c}while(!a.lines);for(var g=0;g<a.lines.length;++g){var h=a.lines[g],i=h.height;if(i>b)break;b-=i}return c+g}function H(a,b){return b>=a.first&&b<a.first+a.size}function I(a,b){return String(a.lineNumberFormatter(b+a.firstLineNumber))}function J(a,b,c){return void 0===c&&(c=null),this instanceof J?(this.line=a,this.ch=b,void(this.sticky=c)):new J(a,b,c)}function K(a,b){return a.line-b.line||a.ch-b.ch}function L(a,b){return a.sticky==b.sticky&&0==K(a,b)}function M(a){return J(a.line,a.ch)}function N(a,b){return K(a,b)<0?b:a}function O(a,b){return K(a,b)<0?a:b}function P(a,b){return Math.max(a.first,Math.min(b,a.first+a.size-1))}function Q(a,b){if(b.line<a.first)return J(a.first,0);var c=a.first+a.size-1;return b.line>c?J(c,B(a,c).text.length):R(b,B(a,b.line).text.length)}function R(a,b){var c=a.ch;return null==c||c>b?J(a.line,b):0>c?J(a.line,0):a}function S(a,b){for(var c=[],d=0;d<b.length;d++)c[d]=Q(a,b[d]);return c}function T(){Yg=!0}function U(){Zg=!0}function V(a,b,c){this.marker=a,this.from=b,this.to=c}function W(a,b){if(a)for(var c=0;c<a.length;++c){var d=a[c];if(d.marker==b)return d}}function X(a,b){for(var c,d=0;d<a.length;++d)a[d]!=b&&(c||(c=[])).push(a[d]);return c}function Y(a,b){a.markedSpans=a.markedSpans?a.markedSpans.concat([b]):[b],b.marker.attachLine(a)}function Z(a,b,c){var d;if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);if(h||f.from==b&&"bookmark"==g.type&&(!c||!f.marker.insertLeft)){var i=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);(d||(d=[])).push(new V(g,f.from,i?null:f.to))}}return d}function $(a,b,c){var d;if(a)for(var e=0;e<a.length;++e){var f=a[e],g=f.marker,h=null==f.to||(g.inclusiveRight?f.to>=b:f.to>b);if(h||f.from==b&&"bookmark"==g.type&&(!c||f.marker.insertLeft)){var i=null==f.from||(g.inclusiveLeft?f.from<=b:f.from<b);(d||(d=[])).push(new V(g,i?null:f.from-b,null==f.to?null:f.to-b))}}return d}function _(a,b){if(b.full)return null;var c=H(a,b.from.line)&&B(a,b.from.line).markedSpans,d=H(a,b.to.line)&&B(a,b.to.line).markedSpans;if(!c&&!d)return null;var e=b.from.ch,f=b.to.ch,g=0==K(b.from,b.to),h=Z(c,e,g),i=$(d,f,g),j=1==b.text.length,k=p(b.text).length+(j?e:0);if(h)for(var l=0;l<h.length;++l){var m=h[l];if(null==m.to){var n=W(i,m.marker);n?j&&(m.to=null==n.to?null:n.to+k):m.to=e}}if(i)for(var o=0;o<i.length;++o){var q=i[o];if(null!=q.to&&(q.to+=k),null==q.from){var r=W(h,q.marker);r||(q.from=k,j&&(h||(h=[])).push(q))}else q.from+=k,j&&(h||(h=[])).push(q)}h&&(h=aa(h)),i&&i!=h&&(i=aa(i));var s=[h];if(!j){var t,u=b.text.length-2;if(u>0&&h)for(var v=0;v<h.length;++v)null==h[v].to&&(t||(t=[])).push(new V(h[v].marker,null,null));for(var w=0;u>w;++w)s.push(t);s.push(i)}return s}function aa(a){for(var b=0;b<a.length;++b){var c=a[b];null!=c.from&&c.from==c.to&&c.marker.clearWhenEmpty!==!1&&a.splice(b--,1)}return a.length?a:null}function ba(a,b,c){var d=null;if(a.iter(b.line,c.line+1,function(a){if(a.markedSpans)for(var b=0;b<a.markedSpans.length;++b){var c=a.markedSpans[b].marker;!c.readOnly||d&&-1!=m(d,c)||(d||(d=[])).push(c)}}),!d)return null;for(var e=[{from:b,to:c}],f=0;f<d.length;++f)for(var g=d[f],h=g.find(0),i=0;i<e.length;++i){var j=e[i];if(!(K(j.to,h.from)<0||K(j.from,h.to)>0)){var k=[i,1],l=K(j.from,h.from),n=K(j.to,h.to);(0>l||!g.inclusiveLeft&&!l)&&k.push({from:j.from,to:h.from}),(n>0||!g.inclusiveRight&&!n)&&k.push({from:h.to,to:j.to}),e.splice.apply(e,k),i+=k.length-3}}return e}function ca(a){var b=a.markedSpans;if(b){for(var c=0;c<b.length;++c)b[c].marker.detachLine(a);a.markedSpans=null}}function da(a,b){if(b){for(var c=0;c<b.length;++c)b[c].marker.attachLine(a);a.markedSpans=b}}function ea(a){return a.inclusiveLeft?-1:0}function fa(a){return a.inclusiveRight?1:0}function ga(a,b){var c=a.lines.length-b.lines.length;if(0!=c)return c;var d=a.find(),e=b.find(),f=K(d.from,e.from)||ea(a)-ea(b);if(f)return-f;var g=K(d.to,e.to)||fa(a)-fa(b);return g?g:b.id-a.id}function ha(a,b){var c,d=Zg&&a.markedSpans;if(d)for(var e=void 0,f=0;f<d.length;++f)e=d[f],e.marker.collapsed&&null==(b?e.from:e.to)&&(!c||ga(c,e.marker)<0)&&(c=e.marker);return c}function ia(a){return ha(a,!0)}function ja(a){return ha(a,!1)}function ka(a,b,c,d,e){var f=B(a,b),g=Zg&&f.markedSpans;if(g)for(var h=0;h<g.length;++h){var i=g[h];if(i.marker.collapsed){var j=i.marker.find(0),k=K(j.from,c)||ea(i.marker)-ea(e),l=K(j.to,d)||fa(i.marker)-fa(e);if(!(k>=0&&0>=l||0>=k&&l>=0)&&(0>=k&&(i.marker.inclusiveRight&&e.inclusiveLeft?K(j.to,c)>=0:K(j.to,c)>0)||k>=0&&(i.marker.inclusiveRight&&e.inclusiveLeft?K(j.from,d)<=0:K(j.from,d)<0)))return!0}}}function la(a){for(var b;b=ia(a);)a=b.find(-1,!0).line;return a}function ma(a){for(var b;b=ja(a);)a=b.find(1,!0).line;return a}function na(a){for(var b,c;b=ja(a);)a=b.find(1,!0).line,(c||(c=[])).push(a);return c}function oa(a,b){var c=B(a,b),d=la(c);return c==d?b:F(d)}function pa(a,b){if(b>a.lastLine())return b;var c,d=B(a,b);if(!qa(a,d))return b;for(;c=ja(d);)d=c.find(1,!0).line;return F(d)+1}function qa(a,b){var c=Zg&&b.markedSpans;if(c)for(var d=void 0,e=0;e<c.length;++e)if(d=c[e],d.marker.collapsed){if(null==d.from)return!0;if(!d.marker.widgetNode&&0==d.from&&d.marker.inclusiveLeft&&ra(a,b,d))return!0}}function ra(a,b,c){if(null==c.to){var d=c.marker.find(1,!0);return ra(a,d.line,W(d.line.markedSpans,c.marker))}if(c.marker.inclusiveRight&&c.to==b.text.length)return!0;for(var e=void 0,f=0;f<b.markedSpans.length;++f)if(e=b.markedSpans[f],e.marker.collapsed&&!e.marker.widgetNode&&e.from==c.to&&(null==e.to||e.to!=c.from)&&(e.marker.inclusiveLeft||c.marker.inclusiveRight)&&ra(a,b,e))return!0}function sa(a){a=la(a);for(var b=0,c=a.parent,d=0;d<c.lines.length;++d){var e=c.lines[d];if(e==a)break;b+=e.height}for(var f=c.parent;f;c=f,f=c.parent)for(var g=0;g<f.children.length;++g){var h=f.children[g];if(h==c)break;b+=h.height}return b}function ta(a){if(0==a.height)return 0;for(var b,c=a.text.length,d=a;b=ia(d);){var e=b.find(0,!0);d=e.from.line,c+=e.from.ch-e.to.ch}for(d=a;b=ja(d);){var f=b.find(0,!0);c-=d.text.length-f.from.ch,d=f.to.line,c+=d.text.length-f.to.ch}return c}function ua(a){var b=a.display,c=a.doc;b.maxLine=B(c,c.first),b.maxLineLength=ta(b.maxLine),b.maxLineChanged=!0,c.iter(function(a){var c=ta(a);c>b.maxLineLength&&(b.maxLineLength=c,b.maxLine=a)})}function va(a,b,c,d){if(!a)return d(b,c,"ltr",0);for(var e=!1,f=0;f<a.length;++f){var g=a[f];(g.from<c&&g.to>b||b==c&&g.to==b)&&(d(Math.max(g.from,b),Math.min(g.to,c),1==g.level?"rtl":"ltr",f),e=!0)}e||d(b,c,"ltr")}function wa(a,b,c){var d;$g=null;for(var e=0;e<a.length;++e){var f=a[e];if(f.from<b&&f.to>b)return e;f.to==b&&(f.from!=f.to&&"before"==c?d=e:$g=e),f.from==b&&(f.from!=f.to&&"before"!=c?d=e:$g=e)}return null!=d?d:$g}function xa(a,b){var c=a.order;return null==c&&(c=a.order=_g(a.text,b)),c}function ya(a,b){return a._handlers&&a._handlers[b]||ah}function za(a,b,c){if(a.removeEventListener)a.removeEventListener(b,c,!1);else if(a.detachEvent)a.detachEvent("on"+b,c);else{var d=a._handlers,e=d&&d[b];if(e){var f=m(e,c);f>-1&&(d[b]=e.slice(0,f).concat(e.slice(f+1)))}}}function Aa(a,b){var c=ya(a,b);if(c.length)for(var d=Array.prototype.slice.call(arguments,2),e=0;e<c.length;++e)c[e].apply(null,d)}function Ba(a,b,c){return"string"==typeof b&&(b={type:b,preventDefault:function(){this.defaultPrevented=!0}}),Aa(a,c||b.type,a,b),Ha(b)||b.codemirrorIgnore}function Ca(a){var b=a._handlers&&a._handlers.cursorActivity;if(b)for(var c=a.curOp.cursorActivityHandlers||(a.curOp.cursorActivityHandlers=[]),d=0;d<b.length;++d)-1==m(c,b[d])&&c.push(b[d])}function Da(a,b){return ya(a,b).length>0}function Ea(a){a.prototype.on=function(a,b){bh(this,a,b)},a.prototype.off=function(a,b){za(this,a,b)}}function Fa(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function Ga(a){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}function Ha(a){return null!=a.defaultPrevented?a.defaultPrevented:0==a.returnValue}function Ia(a){Fa(a),Ga(a)}function Ja(a){return a.target||a.srcElement}function Ka(a){var b=a.which;return null==b&&(1&a.button?b=1:2&a.button?b=3:4&a.button&&(b=2)),Eg&&a.ctrlKey&&1==b&&(b=3),b}function La(a){if(null==Og){var b=d("span","");c(a,d("span",[b,document.createTextNode("x")])),0!=a.firstChild.offsetHeight&&(Og=b.offsetWidth<=1&&b.offsetHeight>2&&!(sg&&8>tg))}var e=Og?d("span",""):d("span","",null,"display: inline-block; width: 1px; margin-right: -1px");return e.setAttribute("cm-text",""),e}function Ma(a){if(null!=Pg)return Pg;var d=c(a,document.createTextNode("AA")),e=Ig(d,0,1).getBoundingClientRect(),f=Ig(d,1,2).getBoundingClientRect();return b(a),e&&e.left!=e.right?Pg=f.right-e.right<3:!1}function Na(a){if(null!=gh)return gh;var b=c(a,d("span","x")),e=b.getBoundingClientRect(),f=Ig(b,0,1).getBoundingClientRect();return gh=Math.abs(e.left-f.left)>1}function Oa(a,b){arguments.length>2&&(b.dependencies=Array.prototype.slice.call(arguments,2)),hh[a]=b}function Pa(a,b){ih[a]=b}function Qa(a){if("string"==typeof a&&ih.hasOwnProperty(a))a=ih[a];else if(a&&"string"==typeof a.name&&ih.hasOwnProperty(a.name)){var b=ih[a.name];"string"==typeof b&&(b={name:b}),a=t(b,a),a.name=b.name}else{if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+xml$/.test(a))return Qa("application/xml");if("string"==typeof a&&/^[\w\-]+\/[\w\-]+\+json$/.test(a))return Qa("application/json")}return"string"==typeof a?{name:a}:a||{name:"null"}}function Ra(a,b){b=Qa(b);var c=hh[b.name];if(!c)return Ra(a,"text/plain");var d=c(a,b);if(jh.hasOwnProperty(b.name)){var e=jh[b.name];for(var f in e)e.hasOwnProperty(f)&&(d.hasOwnProperty(f)&&(d["_"+f]=d[f]),d[f]=e[f])}if(d.name=b.name,b.helperType&&(d.helperType=b.helperType),b.modeProps)for(var g in b.modeProps)d[g]=b.modeProps[g];return d}function Sa(a,b){var c=jh.hasOwnProperty(a)?jh[a]:jh[a]={};k(b,c)}function Ta(a,b){if(b===!0)return b;if(a.copyState)return a.copyState(b);var c={};for(var d in b){var e=b[d];e instanceof Array&&(e=e.concat([])),c[d]=e}return c}function Ua(a,b){for(var c;a.innerMode&&(c=a.innerMode(b),c&&c.mode!=a);)b=c.state,a=c.mode;return c||{mode:a,state:b}}function Va(a,b,c){return a.startState?a.startState(b,c):!0}function Wa(a,b,c,d){var e=[a.state.modeGen],f={};cb(a,b.text,a.doc.mode,c,function(a,b){return e.push(a,b)},f,d);for(var g=c.state,h=function(d){var g=a.state.overlays[d],h=1,i=0;
c.state=!0,cb(a,b.text,g.mode,c,function(a,b){for(var c=h;a>i;){var d=e[h];d>a&&e.splice(h,1,a,e[h+1],d),h+=2,i=Math.min(a,d)}if(b)if(g.opaque)e.splice(c,h-c,a,"overlay "+b),h=c+2;else for(;h>c;c+=2){var f=e[c+1];e[c+1]=(f?f+" ":"")+"overlay "+b}},f)},i=0;i<a.state.overlays.length;++i)h(i);return c.state=g,{styles:e,classes:f.bgClass||f.textClass?f:null}}function Xa(a,b,c){if(!b.styles||b.styles[0]!=a.state.modeGen){var d=Ya(a,F(b)),e=b.text.length>a.options.maxHighlightLength&&Ta(a.doc.mode,d.state),f=Wa(a,b,d);e&&(d.state=e),b.stateAfter=d.save(!e),b.styles=f.styles,f.classes?b.styleClasses=f.classes:b.styleClasses&&(b.styleClasses=null),c===a.doc.highlightFrontier&&(a.doc.modeFrontier=Math.max(a.doc.modeFrontier,++a.doc.highlightFrontier))}return b.styles}function Ya(a,b,c){var d=a.doc,e=a.display;if(!d.mode.startState)return new mh(d,!0,b);var f=db(a,b,c),g=f>d.first&&B(d,f-1).stateAfter,h=g?mh.fromSaved(d,g,f):new mh(d,Va(d.mode),f);return d.iter(f,b,function(c){Za(a,c.text,h);var d=h.line;c.stateAfter=d==b-1||d%5==0||d>=e.viewFrom&&d<e.viewTo?h.save():null,h.nextLine()}),c&&(d.modeFrontier=h.line),h}function Za(a,b,c,d){var e=a.doc.mode,f=new kh(b,a.options.tabSize,c);for(f.start=f.pos=d||0,""==b&&$a(e,c.state);!f.eol();)_a(e,f,c.state),f.start=f.pos}function $a(a,b){if(a.blankLine)return a.blankLine(b);if(a.innerMode){var c=Ua(a,b);return c.mode.blankLine?c.mode.blankLine(c.state):void 0}}function _a(a,b,c,d){for(var e=0;10>e;e++){d&&(d[0]=Ua(a,c).mode);var f=a.token(b,c);if(b.pos>b.start)return f}throw new Error("Mode "+a.name+" failed to advance stream.")}function ab(a,b,c,d){var e,f=a.doc,g=f.mode;b=Q(f,b);var h,i=B(f,b.line),j=Ya(a,b.line,c),k=new kh(i.text,a.options.tabSize,j);for(d&&(h=[]);(d||k.pos<b.ch)&&!k.eol();)k.start=k.pos,e=_a(g,k,j.state),d&&h.push(new nh(k,e,Ta(f.mode,j.state)));return d?h:new nh(k,e,j.state)}function bb(a,b){if(a)for(;;){var c=a.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!c)break;a=a.slice(0,c.index)+a.slice(c.index+c[0].length);var d=c[1]?"bgClass":"textClass";null==b[d]?b[d]=c[2]:new RegExp("(?:^|s)"+c[2]+"(?:$|s)").test(b[d])||(b[d]+=" "+c[2])}return a}function cb(a,b,c,d,e,f,g){var h=c.flattenSpans;null==h&&(h=a.options.flattenSpans);var i,j=0,k=null,l=new kh(b,a.options.tabSize,d),m=a.options.addModeClass&&[null];for(""==b&&bb($a(c,d.state),f);!l.eol();){if(l.pos>a.options.maxHighlightLength?(h=!1,g&&Za(a,b,d,l.pos),l.pos=b.length,i=null):i=bb(_a(c,l,d.state,m),f),m){var n=m[0].name;n&&(i="m-"+(i?n+" "+i:n))}if(!h||k!=i){for(;j<l.start;)j=Math.min(l.start,j+5e3),e(j,k);k=i}l.start=l.pos}for(;j<l.pos;){var o=Math.min(l.pos,j+5e3);e(o,k),j=o}}function db(a,b,c){for(var d,e,f=a.doc,g=c?-1:b-(a.doc.mode.innerMode?1e3:100),h=b;h>g;--h){if(h<=f.first)return f.first;var i=B(f,h-1),j=i.stateAfter;if(j&&(!c||h+(j instanceof lh?j.lookAhead:0)<=f.modeFrontier))return h;var k=l(i.text,null,a.options.tabSize);(null==e||d>k)&&(e=h-1,d=k)}return e}function eb(a,b){if(a.modeFrontier=Math.min(a.modeFrontier,b),!(a.highlightFrontier<b-10)){for(var c=a.first,d=b-1;d>c;d--){var e=B(a,d).stateAfter;if(e&&(!(e instanceof lh)||d+e.lookAhead<b)){c=d+1;break}}a.highlightFrontier=Math.min(a.highlightFrontier,c)}}function fb(a,b,c,d){a.text=b,a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null),null!=a.order&&(a.order=null),ca(a),da(a,c);var e=d?d(a):1;e!=a.height&&E(a,e)}function gb(a){a.parent=null,ca(a)}function hb(a,b){if(!a||/^\s*$/.test(a))return null;var c=b.addModeClass?rh:qh;return c[a]||(c[a]=a.replace(/\S+/g,"cm-$&"))}function ib(a,b){var c=e("span",null,null,ug?"padding-right: .1px":null),d={pre:e("pre",[c],"CodeMirror-line"),content:c,col:0,pos:0,cm:a,trailingSpace:!1,splitSpaces:(sg||ug)&&a.getOption("lineWrapping")};b.measure={};for(var f=0;f<=(b.rest?b.rest.length:0);f++){var g=f?b.rest[f-1]:b.line,h=void 0;d.pos=0,d.addToken=kb,Ma(a.display.measure)&&(h=xa(g,a.doc.direction))&&(d.addToken=mb(d.addToken,h)),d.map=[];var j=b!=a.display.externalMeasured&&F(g);ob(g,d,Xa(a,g,j)),g.styleClasses&&(g.styleClasses.bgClass&&(d.bgClass=i(g.styleClasses.bgClass,d.bgClass||"")),g.styleClasses.textClass&&(d.textClass=i(g.styleClasses.textClass,d.textClass||""))),0==d.map.length&&d.map.push(0,0,d.content.appendChild(La(a.display.measure))),0==f?(b.measure.map=d.map,b.measure.cache={}):((b.measure.maps||(b.measure.maps=[])).push(d.map),(b.measure.caches||(b.measure.caches=[])).push({}))}if(ug){var k=d.content.lastChild;(/\bcm-tab\b/.test(k.className)||k.querySelector&&k.querySelector(".cm-tab"))&&(d.content.className="cm-tab-wrap-hack")}return Aa(a,"renderLine",a,b.line,d.pre),d.pre.className&&(d.textClass=i(d.pre.className,d.textClass||"")),d}function jb(a){var b=d("span","","cm-invalidchar");return b.title="\\u"+a.charCodeAt(0).toString(16),b.setAttribute("aria-label",b.title),b}function kb(a,b,c,e,f,g,h){if(b){var i,j=a.splitSpaces?lb(b,a.trailingSpace):b,k=a.cm.state.specialChars,l=!1;if(k.test(b)){i=document.createDocumentFragment();for(var m=0;;){k.lastIndex=m;var n=k.exec(b),p=n?n.index-m:b.length-m;if(p){var q=document.createTextNode(j.slice(m,m+p));sg&&9>tg?i.appendChild(d("span",[q])):i.appendChild(q),a.map.push(a.pos,a.pos+p,q),a.col+=p,a.pos+=p}if(!n)break;m+=p+1;var r=void 0;if("	"==n[0]){var s=a.cm.options.tabSize,t=s-a.col%s;r=i.appendChild(d("span",o(t),"cm-tab")),r.setAttribute("role","presentation"),r.setAttribute("cm-text","	"),a.col+=t}else"\r"==n[0]||"\n"==n[0]?(r=i.appendChild(d("span","\r"==n[0]?"":"","cm-invalidchar")),r.setAttribute("cm-text",n[0]),a.col+=1):(r=a.cm.options.specialCharPlaceholder(n[0]),r.setAttribute("cm-text",n[0]),sg&&9>tg?i.appendChild(d("span",[r])):i.appendChild(r),a.col+=1);a.map.push(a.pos,a.pos+1,r),a.pos++}}else a.col+=b.length,i=document.createTextNode(j),a.map.push(a.pos,a.pos+b.length,i),sg&&9>tg&&(l=!0),a.pos+=b.length;if(a.trailingSpace=32==j.charCodeAt(b.length-1),c||e||f||l||h){var u=c||"";e&&(u+=e),f&&(u+=f);var v=d("span",[i],u,h);return g&&(v.title=g),a.content.appendChild(v)}a.content.appendChild(i)}}function lb(a,b){if(a.length>1&&!/  /.test(a))return a;for(var c=b,d="",e=0;e<a.length;e++){var f=a.charAt(e);" "!=f||!c||e!=a.length-1&&32!=a.charCodeAt(e+1)||(f=""),d+=f,c=" "==f}return d}function mb(a,b){return function(c,d,e,f,g,h,i){e=e?e+" cm-force-border":"cm-force-border";for(var j=c.pos,k=j+d.length;;){for(var l=void 0,m=0;m<b.length&&(l=b[m],!(l.to>j&&l.from<=j));m++);if(l.to>=k)return a(c,d,e,f,g,h,i);a(c,d.slice(0,l.to-j),e,f,null,h,i),f=null,d=d.slice(l.to-j),j=l.to}}}function nb(a,b,c,d){var e=!d&&c.widgetNode;e&&a.map.push(a.pos,a.pos+b,e),!d&&a.cm.display.input.needsContentAttribute&&(e||(e=a.content.appendChild(document.createElement("span"))),e.setAttribute("cm-marker",c.id)),e&&(a.cm.display.input.setUneditable(e),a.content.appendChild(e)),a.pos+=b,a.trailingSpace=!1}function ob(a,b,c){var d=a.markedSpans,e=a.text,f=0;if(d)for(var g,h,i,j,k,l,m,n=e.length,o=0,p=1,q="",r=0;;){if(r==o){i=j=k=l=h="",m=null,r=1/0;for(var s=[],t=void 0,u=0;u<d.length;++u){var v=d[u],w=v.marker;"bookmark"==w.type&&v.from==o&&w.widgetNode?s.push(w):v.from<=o&&(null==v.to||v.to>o||w.collapsed&&v.to==o&&v.from==o)?(null!=v.to&&v.to!=o&&r>v.to&&(r=v.to,j=""),w.className&&(i+=" "+w.className),w.css&&(h=(h?h+";":"")+w.css),w.startStyle&&v.from==o&&(k+=" "+w.startStyle),w.endStyle&&v.to==r&&(t||(t=[])).push(w.endStyle,v.to),w.title&&!l&&(l=w.title),w.collapsed&&(!m||ga(m.marker,w)<0)&&(m=v)):v.from>o&&r>v.from&&(r=v.from)}if(t)for(var x=0;x<t.length;x+=2)t[x+1]==r&&(j+=" "+t[x]);if(!m||m.from==o)for(var y=0;y<s.length;++y)nb(b,0,s[y]);if(m&&(m.from||0)==o){if(nb(b,(null==m.to?n+1:m.to)-o,m.marker,null==m.from),null==m.to)return;m.to==o&&(m=!1)}}if(o>=n)break;for(var z=Math.min(n,r);;){if(q){var A=o+q.length;if(!m){var B=A>z?q.slice(0,z-o):q;b.addToken(b,B,g?g+i:i,k,o+B.length==r?j:"",l,h)}if(A>=z){q=q.slice(z-o),o=z;break}o=A,k=""}q=e.slice(f,f=c[p++]),g=hb(c[p++],b.cm.options)}}else for(var C=1;C<c.length;C+=2)b.addToken(b,e.slice(f,f=c[C]),hb(c[C+1],b.cm.options))}function pb(a,b,c){this.line=b,this.rest=na(b),this.size=this.rest?F(p(this.rest))-c+1:1,this.node=this.text=null,this.hidden=qa(a,b)}function qb(a,b,c){for(var d,e=[],f=b;c>f;f=d){var g=new pb(a.doc,B(a.doc,f),f);d=f+g.size,e.push(g)}return e}function rb(a){sh?sh.ops.push(a):a.ownsGroup=sh={ops:[a],delayedCallbacks:[]}}function sb(a){var b=a.delayedCallbacks,c=0;do{for(;c<b.length;c++)b[c].call(null);for(var d=0;d<a.ops.length;d++){var e=a.ops[d];if(e.cursorActivityHandlers)for(;e.cursorActivityCalled<e.cursorActivityHandlers.length;)e.cursorActivityHandlers[e.cursorActivityCalled++].call(null,e.cm)}}while(c<b.length)}function tb(a,b){var c=a.ownsGroup;if(c)try{sb(c)}finally{sh=null,b(c)}}function ub(a,b){var c=ya(a,b);if(c.length){var d,e=Array.prototype.slice.call(arguments,2);sh?d=sh.delayedCallbacks:th?d=th:(d=th=[],setTimeout(vb,0));for(var f=function(a){d.push(function(){return c[a].apply(null,e)})},g=0;g<c.length;++g)f(g)}}function vb(){var a=th;th=null;for(var b=0;b<a.length;++b)a[b]()}function wb(a,b,c,d){for(var e=0;e<b.changes.length;e++){var f=b.changes[e];"text"==f?Ab(a,b):"gutter"==f?Cb(a,b,c,d):"class"==f?Bb(a,b):"widget"==f&&Db(a,b,d)}b.changes=null}function xb(a){return a.node==a.text&&(a.node=d("div",null,null,"position: relative"),a.text.parentNode&&a.text.parentNode.replaceChild(a.node,a.text),a.node.appendChild(a.text),sg&&8>tg&&(a.node.style.zIndex=2)),a.node}function yb(a,b){var c=b.bgClass?b.bgClass+" "+(b.line.bgClass||""):b.line.bgClass;if(c&&(c+=" CodeMirror-linebackground"),b.background)c?b.background.className=c:(b.background.parentNode.removeChild(b.background),b.background=null);else if(c){var e=xb(b);b.background=e.insertBefore(d("div",null,c),e.firstChild),a.display.input.setUneditable(b.background)}}function zb(a,b){var c=a.display.externalMeasured;return c&&c.line==b.line?(a.display.externalMeasured=null,b.measure=c.measure,c.built):ib(a,b)}function Ab(a,b){var c=b.text.className,d=zb(a,b);b.text==b.node&&(b.node=d.pre),b.text.parentNode.replaceChild(d.pre,b.text),b.text=d.pre,d.bgClass!=b.bgClass||d.textClass!=b.textClass?(b.bgClass=d.bgClass,b.textClass=d.textClass,Bb(a,b)):c&&(b.text.className=c)}function Bb(a,b){yb(a,b),b.line.wrapClass?xb(b).className=b.line.wrapClass:b.node!=b.text&&(b.node.className="");var c=b.textClass?b.textClass+" "+(b.line.textClass||""):b.line.textClass;b.text.className=c||""}function Cb(a,b,c,e){if(b.gutter&&(b.node.removeChild(b.gutter),b.gutter=null),b.gutterBackground&&(b.node.removeChild(b.gutterBackground),b.gutterBackground=null),b.line.gutterClass){var f=xb(b);b.gutterBackground=d("div",null,"CodeMirror-gutter-background "+b.line.gutterClass,"left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px; width: "+e.gutterTotalWidth+"px"),a.display.input.setUneditable(b.gutterBackground),f.insertBefore(b.gutterBackground,b.text)}var g=b.line.gutterMarkers;if(a.options.lineNumbers||g){var h=xb(b),i=b.gutter=d("div",null,"CodeMirror-gutter-wrapper","left: "+(a.options.fixedGutter?e.fixedPos:-e.gutterTotalWidth)+"px");if(a.display.input.setUneditable(i),h.insertBefore(i,b.text),b.line.gutterClass&&(i.className+=" "+b.line.gutterClass),!a.options.lineNumbers||g&&g["CodeMirror-linenumbers"]||(b.lineNumber=i.appendChild(d("div",I(a.options,c),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+e.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+a.display.lineNumInnerWidth+"px"))),g)for(var j=0;j<a.options.gutters.length;++j){var k=a.options.gutters[j],l=g.hasOwnProperty(k)&&g[k];l&&i.appendChild(d("div",[l],"CodeMirror-gutter-elt","left: "+e.gutterLeft[k]+"px; width: "+e.gutterWidth[k]+"px"))}}}function Db(a,b,c){b.alignable&&(b.alignable=null);for(var d=b.node.firstChild,e=void 0;d;d=e)e=d.nextSibling,"CodeMirror-linewidget"==d.className&&b.node.removeChild(d);Fb(a,b,c)}function Eb(a,b,c,d){var e=zb(a,b);return b.text=b.node=e.pre,e.bgClass&&(b.bgClass=e.bgClass),e.textClass&&(b.textClass=e.textClass),Bb(a,b),Cb(a,b,c,d),Fb(a,b,d),b.node}function Fb(a,b,c){if(Gb(a,b.line,b,c,!0),b.rest)for(var d=0;d<b.rest.length;d++)Gb(a,b.rest[d],b,c,!1)}function Gb(a,b,c,e,f){if(b.widgets)for(var g=xb(c),h=0,i=b.widgets;h<i.length;++h){var j=i[h],k=d("div",[j.node],"CodeMirror-linewidget");j.handleMouseEvents||k.setAttribute("cm-ignore-events","true"),Hb(j,k,c,e),a.display.input.setUneditable(k),f&&j.above?g.insertBefore(k,c.gutter||c.text):g.appendChild(k),ub(j,"redraw")}}function Hb(a,b,c,d){if(a.noHScroll){(c.alignable||(c.alignable=[])).push(b);var e=d.wrapperWidth;b.style.left=d.fixedPos+"px",a.coverGutter||(e-=d.gutterTotalWidth,b.style.paddingLeft=d.gutterTotalWidth+"px"),b.style.width=e+"px"}a.coverGutter&&(b.style.zIndex=5,b.style.position="relative",a.noHScroll||(b.style.marginLeft=-d.gutterTotalWidth+"px"))}function Ib(a){if(null!=a.height)return a.height;var b=a.doc.cm;if(!b)return 0;if(!f(document.body,a.node)){var e="position: relative;";a.coverGutter&&(e+="margin-left: -"+b.display.gutters.offsetWidth+"px;"),a.noHScroll&&(e+="width: "+b.display.wrapper.clientWidth+"px;"),c(b.display.measure,d("div",[a.node],null,e))}return a.height=a.node.parentNode.offsetHeight}function Jb(a,b){for(var c=Ja(b);c!=a.wrapper;c=c.parentNode)if(!c||1==c.nodeType&&"true"==c.getAttribute("cm-ignore-events")||c.parentNode==a.sizer&&c!=a.mover)return!0}function Kb(a){return a.lineSpace.offsetTop}function Lb(a){return a.mover.offsetHeight-a.lineSpace.offsetHeight}function Mb(a){if(a.cachedPaddingH)return a.cachedPaddingH;var b=c(a.measure,d("pre","x")),e=window.getComputedStyle?window.getComputedStyle(b):b.currentStyle,f={left:parseInt(e.paddingLeft),right:parseInt(e.paddingRight)};return isNaN(f.left)||isNaN(f.right)||(a.cachedPaddingH=f),f}function Nb(a){return Qg-a.display.nativeBarWidth}function Ob(a){return a.display.scroller.clientWidth-Nb(a)-a.display.barWidth}function Pb(a){return a.display.scroller.clientHeight-Nb(a)-a.display.barHeight}function Qb(a,b,c){var d=a.options.lineWrapping,e=d&&Ob(a);if(!b.measure.heights||d&&b.measure.width!=e){var f=b.measure.heights=[];if(d){b.measure.width=e;for(var g=b.text.firstChild.getClientRects(),h=0;h<g.length-1;h++){var i=g[h],j=g[h+1];Math.abs(i.bottom-j.bottom)>2&&f.push((i.bottom+j.top)/2-c.top)}}f.push(c.bottom-c.top)}}function Rb(a,b,c){if(a.line==b)return{map:a.measure.map,cache:a.measure.cache};for(var d=0;d<a.rest.length;d++)if(a.rest[d]==b)return{map:a.measure.maps[d],cache:a.measure.caches[d]};for(var e=0;e<a.rest.length;e++)if(F(a.rest[e])>c)return{map:a.measure.maps[e],cache:a.measure.caches[e],before:!0}}function Sb(a,b){b=la(b);var d=F(b),e=a.display.externalMeasured=new pb(a.doc,b,d);e.lineN=d;var f=e.built=ib(a,e);return e.text=f.pre,c(a.display.lineMeasure,f.pre),e}function Tb(a,b,c,d){return Wb(a,Vb(a,b),c,d)}function Ub(a,b){if(b>=a.display.viewFrom&&b<a.display.viewTo)return a.display.view[zc(a,b)];var c=a.display.externalMeasured;return c&&b>=c.lineN&&b<c.lineN+c.size?c:void 0}function Vb(a,b){var c=F(b),d=Ub(a,c);d&&!d.text?d=null:d&&d.changes&&(wb(a,d,c,uc(a)),a.curOp.forceUpdate=!0),d||(d=Sb(a,b));var e=Rb(d,b,c);return{line:b,view:d,rect:null,map:e.map,cache:e.cache,before:e.before,hasHeights:!1}}function Wb(a,b,c,d,e){b.before&&(c=-1);var f,g=c+(d||"");return b.cache.hasOwnProperty(g)?f=b.cache[g]:(b.rect||(b.rect=b.view.text.getBoundingClientRect()),b.hasHeights||(Qb(a,b.view,b.rect),b.hasHeights=!0),f=Zb(a,b,c,d),f.bogus||(b.cache[g]=f)),{left:f.left,right:f.right,top:e?f.rtop:f.top,bottom:e?f.rbottom:f.bottom}}function Xb(a,b,c){for(var d,e,f,g,h,i,j=0;j<a.length;j+=3)if(h=a[j],i=a[j+1],h>b?(e=0,f=1,g="left"):i>b?(e=b-h,f=e+1):(j==a.length-3||b==i&&a[j+3]>b)&&(f=i-h,e=f-1,b>=i&&(g="right")),null!=e){if(d=a[j+2],h==i&&c==(d.insertLeft?"left":"right")&&(g=c),"left"==c&&0==e)for(;j&&a[j-2]==a[j-3]&&a[j-1].insertLeft;)d=a[(j-=3)+2],g="left";if("right"==c&&e==i-h)for(;j<a.length-3&&a[j+3]==a[j+4]&&!a[j+5].insertLeft;)d=a[(j+=3)+2],g="right";break}return{node:d,start:e,end:f,collapse:g,coverStart:h,coverEnd:i}}function Yb(a,b){var c=uh;if("left"==b)for(var d=0;d<a.length&&(c=a[d]).left==c.right;d++);else for(var e=a.length-1;e>=0&&(c=a[e]).left==c.right;e--);return c}function Zb(a,b,c,d){var e,f=Xb(b.map,c,d),g=f.node,h=f.start,i=f.end,j=f.collapse;if(3==g.nodeType){for(var k=0;4>k;k++){for(;h&&x(b.line.text.charAt(f.coverStart+h));)--h;for(;f.coverStart+i<f.coverEnd&&x(b.line.text.charAt(f.coverStart+i));)++i;if(e=sg&&9>tg&&0==h&&i==f.coverEnd-f.coverStart?g.parentNode.getBoundingClientRect():Yb(Ig(g,h,i).getClientRects(),d),e.left||e.right||0==h)break;i=h,h-=1,j="right"}sg&&11>tg&&(e=$b(a.display.measure,e))}else{h>0&&(j=d="right");var l;e=a.options.lineWrapping&&(l=g.getClientRects()).length>1?l["right"==d?l.length-1:0]:g.getBoundingClientRect()}if(sg&&9>tg&&!h&&(!e||!e.left&&!e.right)){var m=g.parentNode.getClientRects()[0];e=m?{left:m.left,right:m.left+tc(a.display),top:m.top,bottom:m.bottom}:uh}for(var n=e.top-b.rect.top,o=e.bottom-b.rect.top,p=(n+o)/2,q=b.view.measure.heights,r=0;r<q.length-1&&!(p<q[r]);r++);var s=r?q[r-1]:0,t=q[r],u={left:("right"==j?e.right:e.left)-b.rect.left,right:("left"==j?e.left:e.right)-b.rect.left,top:s,bottom:t};return e.left||e.right||(u.bogus=!0),a.options.singleCursorHeightPerLine||(u.rtop=n,u.rbottom=o),u}function $b(a,b){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!Na(a))return b;var c=screen.logicalXDPI/screen.deviceXDPI,d=screen.logicalYDPI/screen.deviceYDPI;return{left:b.left*c,right:b.right*c,top:b.top*d,bottom:b.bottom*d}}function _b(a){if(a.measure&&(a.measure.cache={},a.measure.heights=null,a.rest))for(var b=0;b<a.rest.length;b++)a.measure.caches[b]={}}function ac(a){a.display.externalMeasure=null,b(a.display.lineMeasure);for(var c=0;c<a.display.view.length;c++)_b(a.display.view[c])}function bc(a){ac(a),a.display.cachedCharWidth=a.display.cachedTextHeight=a.display.cachedPaddingH=null,a.options.lineWrapping||(a.display.maxLineChanged=!0),a.display.lineNumChars=null}function cc(){return wg&&Cg?-(document.body.getBoundingClientRect().left-parseInt(getComputedStyle(document.body).marginLeft)):window.pageXOffset||(document.documentElement||document.body).scrollLeft}function dc(){return wg&&Cg?-(document.body.getBoundingClientRect().top-parseInt(getComputedStyle(document.body).marginTop)):window.pageYOffset||(document.documentElement||document.body).scrollTop}function ec(a){var b=0;if(a.widgets)for(var c=0;c<a.widgets.length;++c)a.widgets[c].above&&(b+=Ib(a.widgets[c]));return b}function fc(a,b,c,d,e){if(!e){var f=ec(b);c.top+=f,c.bottom+=f}if("line"==d)return c;d||(d="local");var g=sa(b);if("local"==d?g+=Kb(a.display):g-=a.display.viewOffset,"page"==d||"window"==d){var h=a.display.lineSpace.getBoundingClientRect();g+=h.top+("window"==d?0:dc());var i=h.left+("window"==d?0:cc());c.left+=i,c.right+=i}return c.top+=g,c.bottom+=g,c}function gc(a,b,c){if("div"==c)return b;var d=b.left,e=b.top;if("page"==c)d-=cc(),e-=dc();else if("local"==c||!c){var f=a.display.sizer.getBoundingClientRect();d+=f.left,e+=f.top}var g=a.display.lineSpace.getBoundingClientRect();return{left:d-g.left,top:e-g.top}}function hc(a,b,c,d,e){return d||(d=B(a.doc,b.line)),fc(a,d,Tb(a,d,b.ch,e),c)}function ic(a,b,c,d,e,f){function g(b,g){var h=Wb(a,e,b,g?"right":"left",f);return g?h.left=h.right:h.right=h.left,fc(a,d,h,c)}function h(a,b,c){var d=i[b],e=1==d.level;return g(c?a-1:a,e!=c)}d=d||B(a.doc,b.line),e||(e=Vb(a,d));var i=xa(d,a.doc.direction),j=b.ch,k=b.sticky;if(j>=d.text.length?(j=d.text.length,k="before"):0>=j&&(j=0,k="after"),!i)return g("before"==k?j-1:j,"before"==k);var l=wa(i,j,k),m=$g,n=h(j,l,"before"==k);return null!=m&&(n.other=h(j,m,"before"!=k)),n}function jc(a,b){var c=0;b=Q(a.doc,b),a.options.lineWrapping||(c=tc(a.display)*b.ch);var d=B(a.doc,b.line),e=sa(d)+Kb(a.display);return{left:c,right:c,top:e,bottom:e+d.height}}function kc(a,b,c,d,e){var f=J(a,b,c);return f.xRel=e,d&&(f.outside=!0),f}function lc(a,b,c){var d=a.doc;if(c+=a.display.viewOffset,0>c)return kc(d.first,0,null,!0,-1);var e=G(d,c),f=d.first+d.size-1;if(e>f)return kc(d.first+d.size-1,B(d,f).text.length,null,!0,1);0>b&&(b=0);for(var g=B(d,e);;){var h=pc(a,g,e,b,c),i=ja(g),j=i&&i.find(0,!0);if(!i||!(h.ch>j.from.ch||h.ch==j.from.ch&&h.xRel>0))return h;e=F(g=j.to.line)}}function mc(a,b,c,d){d-=ec(b);var e=b.text.length,f=z(function(b){return Wb(a,c,b-1).bottom<=d},e,0);return e=z(function(b){return Wb(a,c,b).top>d},f,e),{begin:f,end:e}}function nc(a,b,c,d){c||(c=Vb(a,b));var e=fc(a,b,Wb(a,c,d),"line").top;return mc(a,b,c,e)}function oc(a,b,c,d){return a.bottom<=c?!1:a.top>c?!0:(d?a.left:a.right)>b}function pc(a,b,c,d,e){e-=sa(b);var f=Vb(a,b),g=ec(b),h=0,i=b.text.length,j=!0,k=xa(b,a.doc.direction);if(k){var l=(a.options.lineWrapping?rc:qc)(a,b,c,f,k,d,e);j=1!=l.level,h=j?l.from:l.to-1,i=j?l.to:l.from-1}var m,n,o=null,p=null,q=z(function(b){var c=Wb(a,f,b);return c.top+=g,c.bottom+=g,oc(c,d,e,!1)?(c.top<=e&&c.left<=d&&(o=b,p=c),!0):!1},h,i),r=!1;if(p){var s=d-p.left<p.right-d,t=s==j;q=o+(t?0:1),n=t?"after":"before",m=s?p.left:p.right}else{j||q!=i&&q!=h||q++,n=0==q?"after":q==b.text.length?"before":Wb(a,f,q-(j?1:0)).bottom+g<=e==j?"after":"before";var u=ic(a,J(c,q,n),"line",b,f);m=u.left,r=e<u.top||e>=u.bottom}return q=y(b.text,q,1),kc(c,q,n,r,d-m)}function qc(a,b,c,d,e,f,g){var h=z(function(h){var i=e[h],j=1!=i.level;return oc(ic(a,J(c,j?i.to:i.from,j?"before":"after"),"line",b,d),f,g,!0)},0,e.length-1),i=e[h];if(h>0){var j=1!=i.level,k=ic(a,J(c,j?i.from:i.to,j?"after":"before"),"line",b,d);oc(k,f,g,!0)&&k.top>g&&(i=e[h-1])}return i}function rc(a,b,c,d,e,f,g){for(var h=mc(a,b,d,g),i=h.begin,j=h.end,k=null,l=null,m=0;m<e.length;m++){var n=e[m];if(!(n.from>=j||n.to<=i)){var o=1!=n.level,p=Wb(a,d,o?Math.min(j,n.to)-1:Math.max(i,n.from)).right,q=f>p?f-p+1e9:p-f;(!k||l>q)&&(k=n,l=q)}}return k||(k=e[e.length-1]),k.from<i&&(k={from:i,to:k.to,level:k.level}),k.to>j&&(k={from:k.from,to:j,level:k.level}),k}function sc(a){if(null!=a.cachedTextHeight)return a.cachedTextHeight;if(null==ph){ph=d("pre");for(var e=0;49>e;++e)ph.appendChild(document.createTextNode("x")),ph.appendChild(d("br"));ph.appendChild(document.createTextNode("x"))}c(a.measure,ph);var f=ph.offsetHeight/50;return f>3&&(a.cachedTextHeight=f),b(a.measure),f||1}function tc(a){if(null!=a.cachedCharWidth)return a.cachedCharWidth;var b=d("span","xxxxxxxxxx"),e=d("pre",[b]);c(a.measure,e);var f=b.getBoundingClientRect(),g=(f.right-f.left)/10;return g>2&&(a.cachedCharWidth=g),g||10}function uc(a){for(var b=a.display,c={},d={},e=b.gutters.clientLeft,f=b.gutters.firstChild,g=0;f;f=f.nextSibling,++g)c[a.options.gutters[g]]=f.offsetLeft+f.clientLeft+e,d[a.options.gutters[g]]=f.clientWidth;return{fixedPos:vc(b),gutterTotalWidth:b.gutters.offsetWidth,gutterLeft:c,gutterWidth:d,wrapperWidth:b.wrapper.clientWidth}}function vc(a){return a.scroller.getBoundingClientRect().left-a.sizer.getBoundingClientRect().left}function wc(a){var b=sc(a.display),c=a.options.lineWrapping,d=c&&Math.max(5,a.display.scroller.clientWidth/tc(a.display)-3);return function(e){if(qa(a.doc,e))return 0;var f=0;if(e.widgets)for(var g=0;g<e.widgets.length;g++)e.widgets[g].height&&(f+=e.widgets[g].height);return c?f+(Math.ceil(e.text.length/d)||1)*b:f+b}}function xc(a){var b=a.doc,c=wc(a);b.iter(function(a){var b=c(a);b!=a.height&&E(a,b)})}function yc(a,b,c,d){var e=a.display;if(!c&&"true"==Ja(b).getAttribute("cm-not-content"))return null;var f,g,h=e.lineSpace.getBoundingClientRect();try{f=b.clientX-h.left,g=b.clientY-h.top}catch(b){return null}var i,j=lc(a,f,g);if(d&&1==j.xRel&&(i=B(a.doc,j.line).text).length==j.ch){var k=l(i,i.length,a.options.tabSize)-i.length;j=J(j.line,Math.max(0,Math.round((f-Mb(a.display).left)/tc(a.display))-k))}return j}function zc(a,b){if(b>=a.display.viewTo)return null;if(b-=a.display.viewFrom,0>b)return null;for(var c=a.display.view,d=0;d<c.length;d++)if(b-=c[d].size,0>b)return d}function Ac(a){a.display.input.showSelection(a.display.input.prepareSelection())}function Bc(a,b){void 0===b&&(b=!0);for(var c=a.doc,d={},e=d.cursors=document.createDocumentFragment(),f=d.selection=document.createDocumentFragment(),g=0;g<c.sel.ranges.length;g++)if(b||g!=c.sel.primIndex){var h=c.sel.ranges[g];if(!(h.from().line>=a.display.viewTo||h.to().line<a.display.viewFrom)){var i=h.empty();(i||a.options.showCursorWhenSelecting)&&Cc(a,h.head,e),i||Ec(a,h,f)}}return d}function Cc(a,b,c){var e=ic(a,b,"div",null,null,!a.options.singleCursorHeightPerLine),f=c.appendChild(d("div","","CodeMirror-cursor"));if(f.style.left=e.left+"px",f.style.top=e.top+"px",f.style.height=Math.max(0,e.bottom-e.top)*a.options.cursorHeight+"px",e.other){var g=c.appendChild(d("div","","CodeMirror-cursor CodeMirror-secondarycursor"));g.style.display="",g.style.left=e.other.left+"px",g.style.top=e.other.top+"px",g.style.height=.85*(e.other.bottom-e.other.top)+"px"}}function Dc(a,b){return a.top-b.top||a.left-b.left}function Ec(a,b,c){function e(a,b,c,e){0>b&&(b=0),b=Math.round(b),e=Math.round(e),i.appendChild(d("div",null,"CodeMirror-selected","position: absolute; left: "+a+"px;\n                             top: "+b+"px; width: "+(null==c?l-a:c)+"px;\n                             height: "+(e-b)+"px"))}function f(b,c,d){function f(c,d){return hc(a,J(b,c),"div",j,d)}var g,i,j=B(h,b),m=j.text.length,n=xa(j,h.direction);return va(n,c||0,null==d?m:d,function(b,h,o,p){var q=f(b,"ltr"==o?"left":"right"),r=f(h-1,"ltr"==o?"right":"left");if("ltr"==o){var s=null==c&&0==b?k:q.left,t=null==d&&h==m?l:r.right;r.top-q.top<=3?e(s,r.top,t-s,r.bottom):(e(s,q.top,null,q.bottom),q.bottom<r.top&&e(k,q.bottom,null,r.top),e(k,r.top,r.right,r.bottom))}else if(h>b){var u=null==c&&0==b?l:q.right,v=null==d&&h==m?k:r.left;if(r.top-q.top<=3)e(v,r.top,u-v,r.bottom);else{var w=k;if(p){var x=nc(a,j,null,b).end;w=f(x-(/\s/.test(j.text.charAt(x-1))?2:1),"left").left}e(w,q.top,u-w,q.bottom),q.bottom<r.top&&e(k,q.bottom,null,r.top);var y=null;if(p<n.length-1,!0){var z=nc(a,j,null,h).begin;y=f(z,"right").right-v}e(v,r.top,y,r.bottom)}}(!g||Dc(q,g)<0)&&(g=q),Dc(r,g)<0&&(g=r),(!i||Dc(q,i)<0)&&(i=q),Dc(r,i)<0&&(i=r)}),{start:g,end:i}}var g=a.display,h=a.doc,i=document.createDocumentFragment(),j=Mb(a.display),k=j.left,l=Math.max(g.sizerWidth,Ob(a)-g.sizer.offsetLeft)-j.right,m=b.from(),n=b.to();if(m.line==n.line)f(m.line,m.ch,n.ch);else{var o=B(h,m.line),p=B(h,n.line),q=la(o)==la(p),r=f(m.line,m.ch,q?o.text.length+1:null).end,s=f(n.line,q?0:null,n.ch).start;q&&(r.top<s.top-2?(e(r.right,r.top,null,r.bottom),e(k,s.top,s.left,s.bottom)):e(r.right,r.top,s.left-r.right,r.bottom)),r.bottom<s.top&&e(k,r.bottom,null,s.top)}c.appendChild(i)}function Fc(a){if(a.state.focused){var b=a.display;clearInterval(b.blinker);var c=!0;b.cursorDiv.style.visibility="",a.options.cursorBlinkRate>0?b.blinker=setInterval(function(){return b.cursorDiv.style.visibility=(c=!c)?"":"hidden"},a.options.cursorBlinkRate):a.options.cursorBlinkRate<0&&(b.cursorDiv.style.visibility="hidden")}}function Gc(a){a.state.focused||(a.display.input.focus(),Ic(a))}function Hc(a){a.state.delayingBlurEvent=!0,setTimeout(function(){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1,Jc(a))},100)}function Ic(a,b){a.state.delayingBlurEvent&&(a.state.delayingBlurEvent=!1),"nocursor"!=a.options.readOnly&&(a.state.focused||(Aa(a,"focus",a,b),a.state.focused=!0,h(a.display.wrapper,"CodeMirror-focused"),a.curOp||a.display.selForContextMenu==a.doc.sel||(a.display.input.reset(),ug&&setTimeout(function(){return a.display.input.reset(!0)},20)),a.display.input.receivedFocus()),Fc(a))}function Jc(a,b){a.state.delayingBlurEvent||(a.state.focused&&(Aa(a,"blur",a,b),a.state.focused=!1,Lg(a.display.wrapper,"CodeMirror-focused")),clearInterval(a.display.blinker),setTimeout(function(){a.state.focused||(a.display.shift=!1)},150))}function Kc(a){for(var b=a.display,c=b.lineDiv.offsetTop,d=0;d<b.view.length;d++){var e=b.view[d],f=void 0;if(!e.hidden){if(sg&&8>tg){var g=e.node.offsetTop+e.node.offsetHeight;f=g-c,c=g}else{var h=e.node.getBoundingClientRect();f=h.bottom-h.top}var i=e.line.height-f;if(2>f&&(f=sc(b)),(i>.005||-.005>i)&&(E(e.line,f),Lc(e.line),e.rest))for(var j=0;j<e.rest.length;j++)Lc(e.rest[j])}}}function Lc(a){if(a.widgets)for(var b=0;b<a.widgets.length;++b)a.widgets[b].height=a.widgets[b].node.parentNode.offsetHeight}function Mc(a,b,c){var d=c&&null!=c.top?Math.max(0,c.top):a.scroller.scrollTop;d=Math.floor(d-Kb(a));var e=c&&null!=c.bottom?c.bottom:d+a.wrapper.clientHeight,f=G(b,d),g=G(b,e);if(c&&c.ensure){var h=c.ensure.from.line,i=c.ensure.to.line;f>h?(f=h,g=G(b,sa(B(b,h))+a.wrapper.clientHeight)):Math.min(i,b.lastLine())>=g&&(f=G(b,sa(B(b,i))-a.wrapper.clientHeight),g=i)}return{from:f,to:Math.max(g,f+1)}}function Nc(a){var b=a.display,c=b.view;if(b.alignWidgets||b.gutters.firstChild&&a.options.fixedGutter){for(var d=vc(b)-b.scroller.scrollLeft+a.doc.scrollLeft,e=b.gutters.offsetWidth,f=d+"px",g=0;g<c.length;g++)if(!c[g].hidden){a.options.fixedGutter&&(c[g].gutter&&(c[g].gutter.style.left=f),c[g].gutterBackground&&(c[g].gutterBackground.style.left=f));var h=c[g].alignable;if(h)for(var i=0;i<h.length;i++)h[i].style.left=f}a.options.fixedGutter&&(b.gutters.style.left=d+e+"px")}}function Oc(a){if(!a.options.lineNumbers)return!1;var b=a.doc,c=I(a.options,b.first+b.size-1),e=a.display;if(c.length!=e.lineNumChars){var f=e.measure.appendChild(d("div",[d("div",c)],"CodeMirror-linenumber CodeMirror-gutter-elt")),g=f.firstChild.offsetWidth,h=f.offsetWidth-g;return e.lineGutter.style.width="",e.lineNumInnerWidth=Math.max(g,e.lineGutter.offsetWidth-h)+1,e.lineNumWidth=e.lineNumInnerWidth+h,e.lineNumChars=e.lineNumInnerWidth?c.length:-1,e.lineGutter.style.width=e.lineNumWidth+"px",Fd(a),!0}return!1}function Pc(a,b){if(!Ba(a,"scrollCursorIntoView")){var c=a.display,e=c.sizer.getBoundingClientRect(),f=null;if(b.top+e.top<0?f=!0:b.bottom+e.top>(window.innerHeight||document.documentElement.clientHeight)&&(f=!1),null!=f&&!Ag){var g=d("div","",null,"position: absolute;\n                         top: "+(b.top-c.viewOffset-Kb(a.display))+"px;\n                         height: "+(b.bottom-b.top+Nb(a)+c.barHeight)+"px;\n                         left: "+b.left+"px; width: "+Math.max(2,b.right-b.left)+"px;");a.display.lineSpace.appendChild(g),g.scrollIntoView(f),a.display.lineSpace.removeChild(g)}}}function Qc(a,b,c,d){null==d&&(d=0);var e;a.options.lineWrapping||b!=c||(b=b.ch?J(b.line,"before"==b.sticky?b.ch-1:b.ch,"after"):b,c="before"==b.sticky?J(b.line,b.ch+1,"before"):b);for(var f=0;5>f;f++){var g=!1,h=ic(a,b),i=c&&c!=b?ic(a,c):h;e={left:Math.min(h.left,i.left),top:Math.min(h.top,i.top)-d,right:Math.max(h.left,i.left),bottom:Math.max(h.bottom,i.bottom)+d};var j=Sc(a,e),k=a.doc.scrollTop,l=a.doc.scrollLeft;if(null!=j.scrollTop&&(Zc(a,j.scrollTop),Math.abs(a.doc.scrollTop-k)>1&&(g=!0)),null!=j.scrollLeft&&(_c(a,j.scrollLeft),Math.abs(a.doc.scrollLeft-l)>1&&(g=!0)),!g)break}return e}function Rc(a,b){var c=Sc(a,b);null!=c.scrollTop&&Zc(a,c.scrollTop),null!=c.scrollLeft&&_c(a,c.scrollLeft)}function Sc(a,b){var c=a.display,d=sc(a.display);b.top<0&&(b.top=0);var e=a.curOp&&null!=a.curOp.scrollTop?a.curOp.scrollTop:c.scroller.scrollTop,f=Pb(a),g={};b.bottom-b.top>f&&(b.bottom=b.top+f);var h=a.doc.height+Lb(c),i=b.top<d,j=b.bottom>h-d;if(b.top<e)g.scrollTop=i?0:b.top;else if(b.bottom>e+f){var k=Math.min(b.top,(j?h:b.bottom)-f);k!=e&&(g.scrollTop=k)}var l=a.curOp&&null!=a.curOp.scrollLeft?a.curOp.scrollLeft:c.scroller.scrollLeft,m=Ob(a)-(a.options.fixedGutter?c.gutters.offsetWidth:0),n=b.right-b.left>m;return n&&(b.right=b.left+m),b.left<10?g.scrollLeft=0:b.left<l?g.scrollLeft=Math.max(0,b.left-(n?0:10)):b.right>m+l-3&&(g.scrollLeft=b.right+(n?0:10)-m),g}function Tc(a,b){null!=b&&(Xc(a),a.curOp.scrollTop=(null==a.curOp.scrollTop?a.doc.scrollTop:a.curOp.scrollTop)+b)}function Uc(a){Xc(a);var b=a.getCursor();a.curOp.scrollToPos={from:b,to:b,margin:a.options.cursorScrollMargin}}function Vc(a,b,c){(null!=b||null!=c)&&Xc(a),null!=b&&(a.curOp.scrollLeft=b),null!=c&&(a.curOp.scrollTop=c)}function Wc(a,b){Xc(a),a.curOp.scrollToPos=b;
}function Xc(a){var b=a.curOp.scrollToPos;if(b){a.curOp.scrollToPos=null;var c=jc(a,b.from),d=jc(a,b.to);Yc(a,c,d,b.margin)}}function Yc(a,b,c,d){var e=Sc(a,{left:Math.min(b.left,c.left),top:Math.min(b.top,c.top)-d,right:Math.max(b.right,c.right),bottom:Math.max(b.bottom,c.bottom)+d});Vc(a,e.scrollLeft,e.scrollTop)}function Zc(a,b){Math.abs(a.doc.scrollTop-b)<2||(og||Dd(a,{top:b}),$c(a,b,!0),og&&Dd(a),wd(a,100))}function $c(a,b,c){b=Math.min(a.display.scroller.scrollHeight-a.display.scroller.clientHeight,b),(a.display.scroller.scrollTop!=b||c)&&(a.doc.scrollTop=b,a.display.scrollbars.setScrollTop(b),a.display.scroller.scrollTop!=b&&(a.display.scroller.scrollTop=b))}function _c(a,b,c,d){b=Math.min(b,a.display.scroller.scrollWidth-a.display.scroller.clientWidth),(!(c?b==a.doc.scrollLeft:Math.abs(a.doc.scrollLeft-b)<2)||d)&&(a.doc.scrollLeft=b,Nc(a),a.display.scroller.scrollLeft!=b&&(a.display.scroller.scrollLeft=b),a.display.scrollbars.setScrollLeft(b))}function ad(a){var b=a.display,c=b.gutters.offsetWidth,d=Math.round(a.doc.height+Lb(a.display));return{clientHeight:b.scroller.clientHeight,viewHeight:b.wrapper.clientHeight,scrollWidth:b.scroller.scrollWidth,clientWidth:b.scroller.clientWidth,viewWidth:b.wrapper.clientWidth,barLeft:a.options.fixedGutter?c:0,docHeight:d,scrollHeight:d+Nb(a)+b.barHeight,nativeBarWidth:b.nativeBarWidth,gutterWidth:c}}function bd(a,b){b||(b=ad(a));var c=a.display.barWidth,d=a.display.barHeight;cd(a,b);for(var e=0;4>e&&c!=a.display.barWidth||d!=a.display.barHeight;e++)c!=a.display.barWidth&&a.options.lineWrapping&&Kc(a),cd(a,ad(a)),c=a.display.barWidth,d=a.display.barHeight}function cd(a,b){var c=a.display,d=c.scrollbars.update(b);c.sizer.style.paddingRight=(c.barWidth=d.right)+"px",c.sizer.style.paddingBottom=(c.barHeight=d.bottom)+"px",c.heightForcer.style.borderBottom=d.bottom+"px solid transparent",d.right&&d.bottom?(c.scrollbarFiller.style.display="block",c.scrollbarFiller.style.height=d.bottom+"px",c.scrollbarFiller.style.width=d.right+"px"):c.scrollbarFiller.style.display="",d.bottom&&a.options.coverGutterNextToScrollbar&&a.options.fixedGutter?(c.gutterFiller.style.display="block",c.gutterFiller.style.height=d.bottom+"px",c.gutterFiller.style.width=b.gutterWidth+"px"):c.gutterFiller.style.display=""}function dd(a){a.display.scrollbars&&(a.display.scrollbars.clear(),a.display.scrollbars.addClass&&Lg(a.display.wrapper,a.display.scrollbars.addClass)),a.display.scrollbars=new xh[a.options.scrollbarStyle](function(b){a.display.wrapper.insertBefore(b,a.display.scrollbarFiller),bh(b,"mousedown",function(){a.state.focused&&setTimeout(function(){return a.display.input.focus()},0)}),b.setAttribute("cm-not-content","true")},function(b,c){"horizontal"==c?_c(a,b):Zc(a,b)},a),a.display.scrollbars.addClass&&h(a.display.wrapper,a.display.scrollbars.addClass)}function ed(a){a.curOp={cm:a,viewChanged:!1,startHeight:a.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++yh},rb(a.curOp)}function fd(a){var b=a.curOp;tb(b,function(a){for(var b=0;b<a.ops.length;b++)a.ops[b].cm.curOp=null;gd(a)})}function gd(a){for(var b=a.ops,c=0;c<b.length;c++)hd(b[c]);for(var d=0;d<b.length;d++)id(b[d]);for(var e=0;e<b.length;e++)jd(b[e]);for(var f=0;f<b.length;f++)kd(b[f]);for(var g=0;g<b.length;g++)ld(b[g])}function hd(a){var b=a.cm,c=b.display;yd(b),a.updateMaxLine&&ua(b),a.mustUpdate=a.viewChanged||a.forceUpdate||null!=a.scrollTop||a.scrollToPos&&(a.scrollToPos.from.line<c.viewFrom||a.scrollToPos.to.line>=c.viewTo)||c.maxLineChanged&&b.options.lineWrapping,a.update=a.mustUpdate&&new zh(b,a.mustUpdate&&{top:a.scrollTop,ensure:a.scrollToPos},a.forceUpdate)}function id(a){a.updatedDisplay=a.mustUpdate&&Bd(a.cm,a.update)}function jd(a){var b=a.cm,c=b.display;a.updatedDisplay&&Kc(b),a.barMeasure=ad(b),c.maxLineChanged&&!b.options.lineWrapping&&(a.adjustWidthTo=Tb(b,c.maxLine,c.maxLine.text.length).left+3,b.display.sizerWidth=a.adjustWidthTo,a.barMeasure.scrollWidth=Math.max(c.scroller.clientWidth,c.sizer.offsetLeft+a.adjustWidthTo+Nb(b)+b.display.barWidth),a.maxScrollLeft=Math.max(0,c.sizer.offsetLeft+a.adjustWidthTo-Ob(b))),(a.updatedDisplay||a.selectionChanged)&&(a.preparedSelection=c.input.prepareSelection())}function kd(a){var b=a.cm;null!=a.adjustWidthTo&&(b.display.sizer.style.minWidth=a.adjustWidthTo+"px",a.maxScrollLeft<b.doc.scrollLeft&&_c(b,Math.min(b.display.scroller.scrollLeft,a.maxScrollLeft),!0),b.display.maxLineChanged=!1);var c=a.focus&&a.focus==g();a.preparedSelection&&b.display.input.showSelection(a.preparedSelection,c),(a.updatedDisplay||a.startHeight!=b.doc.height)&&bd(b,a.barMeasure),a.updatedDisplay&&Gd(b,a.barMeasure),a.selectionChanged&&Fc(b),b.state.focused&&a.updateInput&&b.display.input.reset(a.typing),c&&Gc(a.cm)}function ld(a){var b=a.cm,c=b.display,d=b.doc;if(a.updatedDisplay&&Cd(b,a.update),null==c.wheelStartX||null==a.scrollTop&&null==a.scrollLeft&&!a.scrollToPos||(c.wheelStartX=c.wheelStartY=null),null!=a.scrollTop&&$c(b,a.scrollTop,a.forceScroll),null!=a.scrollLeft&&_c(b,a.scrollLeft,!0,!0),a.scrollToPos){var e=Qc(b,Q(d,a.scrollToPos.from),Q(d,a.scrollToPos.to),a.scrollToPos.margin);Pc(b,e)}var f=a.maybeHiddenMarkers,g=a.maybeUnhiddenMarkers;if(f)for(var h=0;h<f.length;++h)f[h].lines.length||Aa(f[h],"hide");if(g)for(var i=0;i<g.length;++i)g[i].lines.length&&Aa(g[i],"unhide");c.wrapper.offsetHeight&&(d.scrollTop=b.display.scroller.scrollTop),a.changeObjs&&Aa(b,"changes",b,a.changeObjs),a.update&&a.update.finish()}function md(a,b){if(a.curOp)return b();ed(a);try{return b()}finally{fd(a)}}function nd(a,b){return function(){if(a.curOp)return b.apply(a,arguments);ed(a);try{return b.apply(a,arguments)}finally{fd(a)}}}function od(a){return function(){if(this.curOp)return a.apply(this,arguments);ed(this);try{return a.apply(this,arguments)}finally{fd(this)}}}function pd(a){return function(){var b=this.cm;if(!b||b.curOp)return a.apply(this,arguments);ed(b);try{return a.apply(this,arguments)}finally{fd(b)}}}function qd(a,b,c,d){null==b&&(b=a.doc.first),null==c&&(c=a.doc.first+a.doc.size),d||(d=0);var e=a.display;if(d&&c<e.viewTo&&(null==e.updateLineNumbers||e.updateLineNumbers>b)&&(e.updateLineNumbers=b),a.curOp.viewChanged=!0,b>=e.viewTo)Zg&&oa(a.doc,b)<e.viewTo&&sd(a);else if(c<=e.viewFrom)Zg&&pa(a.doc,c+d)>e.viewFrom?sd(a):(e.viewFrom+=d,e.viewTo+=d);else if(b<=e.viewFrom&&c>=e.viewTo)sd(a);else if(b<=e.viewFrom){var f=td(a,c,c+d,1);f?(e.view=e.view.slice(f.index),e.viewFrom=f.lineN,e.viewTo+=d):sd(a)}else if(c>=e.viewTo){var g=td(a,b,b,-1);g?(e.view=e.view.slice(0,g.index),e.viewTo=g.lineN):sd(a)}else{var h=td(a,b,b,-1),i=td(a,c,c+d,1);h&&i?(e.view=e.view.slice(0,h.index).concat(qb(a,h.lineN,i.lineN)).concat(e.view.slice(i.index)),e.viewTo+=d):sd(a)}var j=e.externalMeasured;j&&(c<j.lineN?j.lineN+=d:b<j.lineN+j.size&&(e.externalMeasured=null))}function rd(a,b,c){a.curOp.viewChanged=!0;var d=a.display,e=a.display.externalMeasured;if(e&&b>=e.lineN&&b<e.lineN+e.size&&(d.externalMeasured=null),!(b<d.viewFrom||b>=d.viewTo)){var f=d.view[zc(a,b)];if(null!=f.node){var g=f.changes||(f.changes=[]);-1==m(g,c)&&g.push(c)}}}function sd(a){a.display.viewFrom=a.display.viewTo=a.doc.first,a.display.view=[],a.display.viewOffset=0}function td(a,b,c,d){var e,f=zc(a,b),g=a.display.view;if(!Zg||c==a.doc.first+a.doc.size)return{index:f,lineN:c};for(var h=a.display.viewFrom,i=0;f>i;i++)h+=g[i].size;if(h!=b){if(d>0){if(f==g.length-1)return null;e=h+g[f].size-b,f++}else e=h-b;b+=e,c+=e}for(;oa(a.doc,c)!=c;){if(f==(0>d?0:g.length-1))return null;c+=d*g[f-(0>d?1:0)].size,f+=d}return{index:f,lineN:c}}function ud(a,b,c){var d=a.display,e=d.view;0==e.length||b>=d.viewTo||c<=d.viewFrom?(d.view=qb(a,b,c),d.viewFrom=b):(d.viewFrom>b?d.view=qb(a,b,d.viewFrom).concat(d.view):d.viewFrom<b&&(d.view=d.view.slice(zc(a,b))),d.viewFrom=b,d.viewTo<c?d.view=d.view.concat(qb(a,d.viewTo,c)):d.viewTo>c&&(d.view=d.view.slice(0,zc(a,c)))),d.viewTo=c}function vd(a){for(var b=a.display.view,c=0,d=0;d<b.length;d++){var e=b[d];e.hidden||e.node&&!e.changes||++c}return c}function wd(a,b){a.doc.highlightFrontier<a.display.viewTo&&a.state.highlight.set(b,j(xd,a))}function xd(a){var b=a.doc;if(!(b.highlightFrontier>=a.display.viewTo)){var c=+new Date+a.options.workTime,d=Ya(a,b.highlightFrontier),e=[];b.iter(d.line,Math.min(b.first+b.size,a.display.viewTo+500),function(f){if(d.line>=a.display.viewFrom){var g=f.styles,h=f.text.length>a.options.maxHighlightLength?Ta(b.mode,d.state):null,i=Wa(a,f,d,!0);h&&(d.state=h),f.styles=i.styles;var j=f.styleClasses,k=i.classes;k?f.styleClasses=k:j&&(f.styleClasses=null);for(var l=!g||g.length!=f.styles.length||j!=k&&(!j||!k||j.bgClass!=k.bgClass||j.textClass!=k.textClass),m=0;!l&&m<g.length;++m)l=g[m]!=f.styles[m];l&&e.push(d.line),f.stateAfter=d.save(),d.nextLine()}else f.text.length<=a.options.maxHighlightLength&&Za(a,f.text,d),f.stateAfter=d.line%5==0?d.save():null,d.nextLine();return+new Date>c?(wd(a,a.options.workDelay),!0):void 0}),b.highlightFrontier=d.line,b.modeFrontier=Math.max(b.modeFrontier,d.line),e.length&&md(a,function(){for(var b=0;b<e.length;b++)rd(a,e[b],"text")})}}function yd(a){var b=a.display;!b.scrollbarsClipped&&b.scroller.offsetWidth&&(b.nativeBarWidth=b.scroller.offsetWidth-b.scroller.clientWidth,b.heightForcer.style.height=Nb(a)+"px",b.sizer.style.marginBottom=-b.nativeBarWidth+"px",b.sizer.style.borderRightWidth=Nb(a)+"px",b.scrollbarsClipped=!0)}function zd(a){if(a.hasFocus())return null;var b=g();if(!b||!f(a.display.lineDiv,b))return null;var c={activeElt:b};if(window.getSelection){var d=window.getSelection();d.anchorNode&&d.extend&&f(a.display.lineDiv,d.anchorNode)&&(c.anchorNode=d.anchorNode,c.anchorOffset=d.anchorOffset,c.focusNode=d.focusNode,c.focusOffset=d.focusOffset)}return c}function Ad(a){if(a&&a.activeElt&&a.activeElt!=g()&&(a.activeElt.focus(),a.anchorNode&&f(document.body,a.anchorNode)&&f(document.body,a.focusNode))){var b=window.getSelection(),c=document.createRange();c.setEnd(a.anchorNode,a.anchorOffset),c.collapse(!1),b.removeAllRanges(),b.addRange(c),b.extend(a.focusNode,a.focusOffset)}}function Bd(a,c){var d=a.display,e=a.doc;if(c.editorIsHidden)return sd(a),!1;if(!c.force&&c.visible.from>=d.viewFrom&&c.visible.to<=d.viewTo&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo)&&d.renderedView==d.view&&0==vd(a))return!1;Oc(a)&&(sd(a),c.dims=uc(a));var f=e.first+e.size,g=Math.max(c.visible.from-a.options.viewportMargin,e.first),h=Math.min(f,c.visible.to+a.options.viewportMargin);d.viewFrom<g&&g-d.viewFrom<20&&(g=Math.max(e.first,d.viewFrom)),d.viewTo>h&&d.viewTo-h<20&&(h=Math.min(f,d.viewTo)),Zg&&(g=oa(a.doc,g),h=pa(a.doc,h));var i=g!=d.viewFrom||h!=d.viewTo||d.lastWrapHeight!=c.wrapperHeight||d.lastWrapWidth!=c.wrapperWidth;ud(a,g,h),d.viewOffset=sa(B(a.doc,d.viewFrom)),a.display.mover.style.top=d.viewOffset+"px";var j=vd(a);if(!i&&0==j&&!c.force&&d.renderedView==d.view&&(null==d.updateLineNumbers||d.updateLineNumbers>=d.viewTo))return!1;var k=zd(a);return j>4&&(d.lineDiv.style.display="none"),Ed(a,d.updateLineNumbers,c.dims),j>4&&(d.lineDiv.style.display=""),d.renderedView=d.view,Ad(k),b(d.cursorDiv),b(d.selectionDiv),d.gutters.style.height=d.sizer.style.minHeight=0,i&&(d.lastWrapHeight=c.wrapperHeight,d.lastWrapWidth=c.wrapperWidth,wd(a,400)),d.updateLineNumbers=null,!0}function Cd(a,b){for(var c=b.viewport,d=!0;(d&&a.options.lineWrapping&&b.oldDisplayWidth!=Ob(a)||(c&&null!=c.top&&(c={top:Math.min(a.doc.height+Lb(a.display)-Pb(a),c.top)}),b.visible=Mc(a.display,a.doc,c),!(b.visible.from>=a.display.viewFrom&&b.visible.to<=a.display.viewTo)))&&Bd(a,b);d=!1){Kc(a);var e=ad(a);Ac(a),bd(a,e),Gd(a,e),b.force=!1}b.signal(a,"update",a),(a.display.viewFrom!=a.display.reportedViewFrom||a.display.viewTo!=a.display.reportedViewTo)&&(b.signal(a,"viewportChange",a,a.display.viewFrom,a.display.viewTo),a.display.reportedViewFrom=a.display.viewFrom,a.display.reportedViewTo=a.display.viewTo)}function Dd(a,b){var c=new zh(a,b);if(Bd(a,c)){Kc(a),Cd(a,c);var d=ad(a);Ac(a),bd(a,d),Gd(a,d),c.finish()}}function Ed(a,c,d){function e(b){var c=b.nextSibling;return ug&&Eg&&a.display.currentWheelTarget==b?b.style.display="none":b.parentNode.removeChild(b),c}for(var f=a.display,g=a.options.lineNumbers,h=f.lineDiv,i=h.firstChild,j=f.view,k=f.viewFrom,l=0;l<j.length;l++){var n=j[l];if(n.hidden);else if(n.node&&n.node.parentNode==h){for(;i!=n.node;)i=e(i);var o=g&&null!=c&&k>=c&&n.lineNumber;n.changes&&(m(n.changes,"gutter")>-1&&(o=!1),wb(a,n,k,d)),o&&(b(n.lineNumber),n.lineNumber.appendChild(document.createTextNode(I(a.options,k)))),i=n.node.nextSibling}else{var p=Eb(a,n,k,d);h.insertBefore(p,i)}k+=n.size}for(;i;)i=e(i)}function Fd(a){var b=a.display.gutters.offsetWidth;a.display.sizer.style.marginLeft=b+"px"}function Gd(a,b){a.display.sizer.style.minHeight=b.docHeight+"px",a.display.heightForcer.style.top=b.docHeight+"px",a.display.gutters.style.height=b.docHeight+a.display.barHeight+Nb(a)+"px"}function Hd(a){var c=a.display.gutters,e=a.options.gutters;b(c);for(var f=0;f<e.length;++f){var g=e[f],h=c.appendChild(d("div",null,"CodeMirror-gutter "+g));"CodeMirror-linenumbers"==g&&(a.display.lineGutter=h,h.style.width=(a.display.lineNumWidth||1)+"px")}c.style.display=f?"":"none",Fd(a)}function Id(a){var b=m(a.gutters,"CodeMirror-linenumbers");-1==b&&a.lineNumbers?a.gutters=a.gutters.concat(["CodeMirror-linenumbers"]):b>-1&&!a.lineNumbers&&(a.gutters=a.gutters.slice(0),a.gutters.splice(b,1))}function Jd(a){var b=a.wheelDeltaX,c=a.wheelDeltaY;return null==b&&a.detail&&a.axis==a.HORIZONTAL_AXIS&&(b=a.detail),null==c&&a.detail&&a.axis==a.VERTICAL_AXIS?c=a.detail:null==c&&(c=a.wheelDelta),{x:b,y:c}}function Kd(a){var b=Jd(a);return b.x*=Bh,b.y*=Bh,b}function Ld(a,b){var c=Jd(b),d=c.x,e=c.y,f=a.display,g=f.scroller,h=g.scrollWidth>g.clientWidth,i=g.scrollHeight>g.clientHeight;if(d&&h||e&&i){if(e&&Eg&&ug)a:for(var j=b.target,k=f.view;j!=g;j=j.parentNode)for(var l=0;l<k.length;l++)if(k[l].node==j){a.display.currentWheelTarget=j;break a}if(d&&!og&&!xg&&null!=Bh)return e&&i&&Zc(a,Math.max(0,g.scrollTop+e*Bh)),_c(a,Math.max(0,g.scrollLeft+d*Bh)),(!e||e&&i)&&Fa(b),void(f.wheelStartX=null);if(e&&null!=Bh){var m=e*Bh,n=a.doc.scrollTop,o=n+f.wrapper.clientHeight;0>m?n=Math.max(0,n+m-50):o=Math.min(a.doc.height,o+m+50),Dd(a,{top:n,bottom:o})}20>Ah&&(null==f.wheelStartX?(f.wheelStartX=g.scrollLeft,f.wheelStartY=g.scrollTop,f.wheelDX=d,f.wheelDY=e,setTimeout(function(){if(null!=f.wheelStartX){var a=g.scrollLeft-f.wheelStartX,b=g.scrollTop-f.wheelStartY,c=b&&f.wheelDY&&b/f.wheelDY||a&&f.wheelDX&&a/f.wheelDX;f.wheelStartX=f.wheelStartY=null,c&&(Bh=(Bh*Ah+c)/(Ah+1),++Ah)}},200)):(f.wheelDX+=d,f.wheelDY+=e))}}function Md(a,b){var c=a[b];a.sort(function(a,b){return K(a.from(),b.from())}),b=m(a,c);for(var d=1;d<a.length;d++){var e=a[d],f=a[d-1];if(K(f.to(),e.from())>=0){var g=O(f.from(),e.from()),h=N(f.to(),e.to()),i=f.empty()?e.from()==e.head:f.from()==f.head;b>=d&&--b,a.splice(--d,2,new Dh(i?h:g,i?g:h))}}return new Ch(a,b)}function Nd(a,b){return new Ch([new Dh(a,b||a)],0)}function Od(a){return a.text?J(a.from.line+a.text.length-1,p(a.text).length+(1==a.text.length?a.from.ch:0)):a.to}function Pd(a,b){if(K(a,b.from)<0)return a;if(K(a,b.to)<=0)return Od(b);var c=a.line+b.text.length-(b.to.line-b.from.line)-1,d=a.ch;return a.line==b.to.line&&(d+=Od(b).ch-b.to.ch),J(c,d)}function Qd(a,b){for(var c=[],d=0;d<a.sel.ranges.length;d++){var e=a.sel.ranges[d];c.push(new Dh(Pd(e.anchor,b),Pd(e.head,b)))}return Md(c,a.sel.primIndex)}function Rd(a,b,c){return a.line==b.line?J(c.line,a.ch-b.ch+c.ch):J(c.line+(a.line-b.line),a.ch)}function Sd(a,b,c){for(var d=[],e=J(a.first,0),f=e,g=0;g<b.length;g++){var h=b[g],i=Rd(h.from,e,f),j=Rd(Od(h),e,f);if(e=h.to,f=j,"around"==c){var k=a.sel.ranges[g],l=K(k.head,k.anchor)<0;d[g]=new Dh(l?j:i,l?i:j)}else d[g]=new Dh(i,i)}return new Ch(d,a.sel.primIndex)}function Td(a){a.doc.mode=Ra(a.options,a.doc.modeOption),Ud(a)}function Ud(a){a.doc.iter(function(a){a.stateAfter&&(a.stateAfter=null),a.styles&&(a.styles=null)}),a.doc.modeFrontier=a.doc.highlightFrontier=a.doc.first,wd(a,100),a.state.modeGen++,a.curOp&&qd(a)}function Vd(a,b){return 0==b.from.ch&&0==b.to.ch&&""==p(b.text)&&(!a.cm||a.cm.options.wholeLineUpdateBefore)}function Wd(a,b,c,d){function e(a){return c?c[a]:null}function f(a,c,e){fb(a,c,e,d),ub(a,"change",a,b)}function g(a,b){for(var c=[],f=a;b>f;++f)c.push(new oh(j[f],e(f),d));return c}var h=b.from,i=b.to,j=b.text,k=B(a,h.line),l=B(a,i.line),m=p(j),n=e(j.length-1),o=i.line-h.line;if(b.full)a.insert(0,g(0,j.length)),a.remove(j.length,a.size-j.length);else if(Vd(a,b)){var q=g(0,j.length-1);f(l,l.text,n),o&&a.remove(h.line,o),q.length&&a.insert(h.line,q)}else if(k==l)if(1==j.length)f(k,k.text.slice(0,h.ch)+m+k.text.slice(i.ch),n);else{var r=g(1,j.length-1);r.push(new oh(m+k.text.slice(i.ch),n,d)),f(k,k.text.slice(0,h.ch)+j[0],e(0)),a.insert(h.line+1,r)}else if(1==j.length)f(k,k.text.slice(0,h.ch)+j[0]+l.text.slice(i.ch),e(0)),a.remove(h.line+1,o);else{f(k,k.text.slice(0,h.ch)+j[0],e(0)),f(l,m+l.text.slice(i.ch),n);var s=g(1,j.length-1);o>1&&a.remove(h.line+1,o-1),a.insert(h.line+1,s)}ub(a,"change",a,b)}function Xd(a,b,c){function d(a,e,f){if(a.linked)for(var g=0;g<a.linked.length;++g){var h=a.linked[g];if(h.doc!=e){var i=f&&h.sharedHist;(!c||i)&&(b(h.doc,i),d(h.doc,a,i))}}}d(a,null,!0)}function Yd(a,b){if(b.cm)throw new Error("This document is already in use.");a.doc=b,b.cm=a,xc(a),Td(a),Zd(a),a.options.lineWrapping||ua(a),a.options.mode=b.modeOption,qd(a)}function Zd(a){("rtl"==a.doc.direction?h:Lg)(a.display.lineDiv,"CodeMirror-rtl")}function $d(a){md(a,function(){Zd(a),qd(a)})}function _d(a){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=a||1}function ae(a,b){var c={from:M(b.from),to:Od(b),text:C(a,b.from,b.to)};return he(a,c,b.from.line,b.to.line+1),Xd(a,function(a){return he(a,c,b.from.line,b.to.line+1)},!0),c}function be(a){for(;a.length;){var b=p(a);if(!b.ranges)break;a.pop()}}function ce(a,b){return b?(be(a.done),p(a.done)):a.done.length&&!p(a.done).ranges?p(a.done):a.done.length>1&&!a.done[a.done.length-2].ranges?(a.done.pop(),p(a.done)):void 0}function de(a,b,c,d){var e=a.history;e.undone.length=0;var f,g,h=+new Date;if((e.lastOp==d||e.lastOrigin==b.origin&&b.origin&&("+"==b.origin.charAt(0)&&a.cm&&e.lastModTime>h-a.cm.options.historyEventDelay||"*"==b.origin.charAt(0)))&&(f=ce(e,e.lastOp==d)))g=p(f.changes),0==K(b.from,b.to)&&0==K(b.from,g.to)?g.to=Od(b):f.changes.push(ae(a,b));else{var i=p(e.done);for(i&&i.ranges||ge(a.sel,e.done),f={changes:[ae(a,b)],generation:e.generation},e.done.push(f);e.done.length>e.undoDepth;)e.done.shift(),e.done[0].ranges||e.done.shift()}e.done.push(c),e.generation=++e.maxGeneration,e.lastModTime=e.lastSelTime=h,e.lastOp=e.lastSelOp=d,e.lastOrigin=e.lastSelOrigin=b.origin,g||Aa(a,"historyAdded")}function ee(a,b,c,d){var e=b.charAt(0);return"*"==e||"+"==e&&c.ranges.length==d.ranges.length&&c.somethingSelected()==d.somethingSelected()&&new Date-a.history.lastSelTime<=(a.cm?a.cm.options.historyEventDelay:500)}function fe(a,b,c,d){var e=a.history,f=d&&d.origin;c==e.lastSelOp||f&&e.lastSelOrigin==f&&(e.lastModTime==e.lastSelTime&&e.lastOrigin==f||ee(a,f,p(e.done),b))?e.done[e.done.length-1]=b:ge(b,e.done),e.lastSelTime=+new Date,e.lastSelOrigin=f,e.lastSelOp=c,d&&d.clearRedo!==!1&&be(e.undone)}function ge(a,b){var c=p(b);c&&c.ranges&&c.equals(a)||b.push(a)}function he(a,b,c,d){var e=b["spans_"+a.id],f=0;a.iter(Math.max(a.first,c),Math.min(a.first+a.size,d),function(c){c.markedSpans&&((e||(e=b["spans_"+a.id]={}))[f]=c.markedSpans),++f})}function ie(a){if(!a)return null;for(var b,c=0;c<a.length;++c)a[c].marker.explicitlyCleared?b||(b=a.slice(0,c)):b&&b.push(a[c]);return b?b.length?b:null:a}function je(a,b){var c=b["spans_"+a.id];if(!c)return null;for(var d=[],e=0;e<b.text.length;++e)d.push(ie(c[e]));return d}function ke(a,b){var c=je(a,b),d=_(a,b);if(!c)return d;if(!d)return c;for(var e=0;e<c.length;++e){var f=c[e],g=d[e];if(f&&g)a:for(var h=0;h<g.length;++h){for(var i=g[h],j=0;j<f.length;++j)if(f[j].marker==i.marker)continue a;f.push(i)}else g&&(c[e]=g)}return c}function le(a,b,c){for(var d=[],e=0;e<a.length;++e){var f=a[e];if(f.ranges)d.push(c?Ch.prototype.deepCopy.call(f):f);else{var g=f.changes,h=[];d.push({changes:h});for(var i=0;i<g.length;++i){var j=g[i],k=void 0;if(h.push({from:j.from,to:j.to,text:j.text}),b)for(var l in j)(k=l.match(/^spans_(\d+)$/))&&m(b,Number(k[1]))>-1&&(p(h)[l]=j[l],delete j[l])}}}return d}function me(a,b,c,d){if(d){var e=a.anchor;if(c){var f=K(b,e)<0;f!=K(c,e)<0?(e=b,b=c):f!=K(b,c)<0&&(b=c)}return new Dh(e,b)}return new Dh(c||b,b)}function ne(a,b,c,d,e){null==e&&(e=a.cm&&(a.cm.display.shift||a.extend)),te(a,new Ch([me(a.sel.primary(),b,c,e)],0),d)}function oe(a,b,c){for(var d=[],e=a.cm&&(a.cm.display.shift||a.extend),f=0;f<a.sel.ranges.length;f++)d[f]=me(a.sel.ranges[f],b[f],null,e);var g=Md(d,a.sel.primIndex);te(a,g,c)}function pe(a,b,c,d){var e=a.sel.ranges.slice(0);e[b]=c,te(a,Md(e,a.sel.primIndex),d)}function qe(a,b,c,d){te(a,Nd(b,c),d)}function re(a,b,c){var d={ranges:b.ranges,update:function(b){var c=this;this.ranges=[];for(var d=0;d<b.length;d++)c.ranges[d]=new Dh(Q(a,b[d].anchor),Q(a,b[d].head))},origin:c&&c.origin};return Aa(a,"beforeSelectionChange",a,d),a.cm&&Aa(a.cm,"beforeSelectionChange",a.cm,d),d.ranges!=b.ranges?Md(d.ranges,d.ranges.length-1):b}function se(a,b,c){var d=a.history.done,e=p(d);e&&e.ranges?(d[d.length-1]=b,ue(a,b,c)):te(a,b,c)}function te(a,b,c){ue(a,b,c),fe(a,a.sel,a.cm?a.cm.curOp.id:NaN,c)}function ue(a,b,c){(Da(a,"beforeSelectionChange")||a.cm&&Da(a.cm,"beforeSelectionChange"))&&(b=re(a,b,c));var d=c&&c.bias||(K(b.primary().head,a.sel.primary().head)<0?-1:1);ve(a,xe(a,b,d,!0)),c&&c.scroll===!1||!a.cm||Uc(a.cm)}function ve(a,b){b.equals(a.sel)||(a.sel=b,a.cm&&(a.cm.curOp.updateInput=a.cm.curOp.selectionChanged=!0,Ca(a.cm)),ub(a,"cursorActivity",a))}function we(a){ve(a,xe(a,a.sel,null,!1))}function xe(a,b,c,d){for(var e,f=0;f<b.ranges.length;f++){var g=b.ranges[f],h=b.ranges.length==a.sel.ranges.length&&a.sel.ranges[f],i=ze(a,g.anchor,h&&h.anchor,c,d),j=ze(a,g.head,h&&h.head,c,d);(e||i!=g.anchor||j!=g.head)&&(e||(e=b.ranges.slice(0,f)),e[f]=new Dh(i,j))}return e?Md(e,b.primIndex):b}function ye(a,b,c,d,e){var f=B(a,b.line);if(f.markedSpans)for(var g=0;g<f.markedSpans.length;++g){var h=f.markedSpans[g],i=h.marker;if((null==h.from||(i.inclusiveLeft?h.from<=b.ch:h.from<b.ch))&&(null==h.to||(i.inclusiveRight?h.to>=b.ch:h.to>b.ch))){if(e&&(Aa(i,"beforeCursorEnter"),i.explicitlyCleared)){if(f.markedSpans){--g;continue}break}if(!i.atomic)continue;if(c){var j=i.find(0>d?1:-1),k=void 0;if((0>d?i.inclusiveRight:i.inclusiveLeft)&&(j=Ae(a,j,-d,j&&j.line==b.line?f:null)),j&&j.line==b.line&&(k=K(j,c))&&(0>d?0>k:k>0))return ye(a,j,b,d,e)}var l=i.find(0>d?-1:1);return(0>d?i.inclusiveLeft:i.inclusiveRight)&&(l=Ae(a,l,d,l.line==b.line?f:null)),l?ye(a,l,b,d,e):null}}return b}function ze(a,b,c,d,e){var f=d||1,g=ye(a,b,c,f,e)||!e&&ye(a,b,c,f,!0)||ye(a,b,c,-f,e)||!e&&ye(a,b,c,-f,!0);return g?g:(a.cantEdit=!0,J(a.first,0))}function Ae(a,b,c,d){return 0>c&&0==b.ch?b.line>a.first?Q(a,J(b.line-1)):null:c>0&&b.ch==(d||B(a,b.line)).text.length?b.line<a.first+a.size-1?J(b.line+1,0):null:new J(b.line,b.ch+c)}function Be(a){a.setSelection(J(a.firstLine(),0),J(a.lastLine()),Sg)}function Ce(a,b,c){var d={canceled:!1,from:b.from,to:b.to,text:b.text,origin:b.origin,cancel:function(){return d.canceled=!0}};return c&&(d.update=function(b,c,e,f){b&&(d.from=Q(a,b)),c&&(d.to=Q(a,c)),e&&(d.text=e),void 0!==f&&(d.origin=f)}),Aa(a,"beforeChange",a,d),a.cm&&Aa(a.cm,"beforeChange",a.cm,d),d.canceled?null:{from:d.from,to:d.to,text:d.text,origin:d.origin}}function De(a,b,c){if(a.cm){if(!a.cm.curOp)return nd(a.cm,De)(a,b,c);if(a.cm.state.suppressEdits)return}if(!(Da(a,"beforeChange")||a.cm&&Da(a.cm,"beforeChange"))||(b=Ce(a,b,!0))){var d=Yg&&!c&&ba(a,b.from,b.to);if(d)for(var e=d.length-1;e>=0;--e)Ee(a,{from:d[e].from,to:d[e].to,text:e?[""]:b.text,origin:b.origin});else Ee(a,b)}}function Ee(a,b){if(1!=b.text.length||""!=b.text[0]||0!=K(b.from,b.to)){var c=Qd(a,b);de(a,b,c,a.cm?a.cm.curOp.id:NaN),He(a,b,c,_(a,b));var d=[];Xd(a,function(a,c){c||-1!=m(d,a.history)||(Me(a.history,b),d.push(a.history)),He(a,b,null,_(a,b))})}}function Fe(a,b,c){if(!a.cm||!a.cm.state.suppressEdits||c){for(var d,e=a.history,f=a.sel,g="undo"==b?e.done:e.undone,h="undo"==b?e.undone:e.done,i=0;i<g.length&&(d=g[i],c?!d.ranges||d.equals(a.sel):d.ranges);i++);if(i!=g.length){for(e.lastOrigin=e.lastSelOrigin=null;d=g.pop(),d.ranges;){if(ge(d,h),c&&!d.equals(a.sel))return void te(a,d,{clearRedo:!1});f=d}var j=[];ge(f,h),h.push({changes:j,generation:e.generation}),e.generation=d.generation||++e.maxGeneration;for(var k=Da(a,"beforeChange")||a.cm&&Da(a.cm,"beforeChange"),l=function(c){var e=d.changes[c];if(e.origin=b,k&&!Ce(a,e,!1))return g.length=0,{};j.push(ae(a,e));var f=c?Qd(a,e):p(g);He(a,e,f,ke(a,e)),!c&&a.cm&&a.cm.scrollIntoView({from:e.from,to:Od(e)});var h=[];Xd(a,function(a,b){b||-1!=m(h,a.history)||(Me(a.history,e),h.push(a.history)),He(a,e,null,ke(a,e))})},n=d.changes.length-1;n>=0;--n){var o=l(n);if(o)return o.v}}}}function Ge(a,b){if(0!=b&&(a.first+=b,a.sel=new Ch(q(a.sel.ranges,function(a){return new Dh(J(a.anchor.line+b,a.anchor.ch),J(a.head.line+b,a.head.ch))}),a.sel.primIndex),a.cm)){qd(a.cm,a.first,a.first-b,b);for(var c=a.cm.display,d=c.viewFrom;d<c.viewTo;d++)rd(a.cm,d,"gutter")}}function He(a,b,c,d){if(a.cm&&!a.cm.curOp)return nd(a.cm,He)(a,b,c,d);if(b.to.line<a.first)return void Ge(a,b.text.length-1-(b.to.line-b.from.line));if(!(b.from.line>a.lastLine())){if(b.from.line<a.first){var e=b.text.length-1-(a.first-b.from.line);Ge(a,e),b={from:J(a.first,0),to:J(b.to.line+e,b.to.ch),text:[p(b.text)],origin:b.origin}}var f=a.lastLine();b.to.line>f&&(b={from:b.from,to:J(f,B(a,f).text.length),text:[b.text[0]],origin:b.origin}),b.removed=C(a,b.from,b.to),c||(c=Qd(a,b)),a.cm?Ie(a.cm,b,d):Wd(a,b,d),ue(a,c,Sg)}}function Ie(a,b,c){var d=a.doc,e=a.display,f=b.from,g=b.to,h=!1,i=f.line;a.options.lineWrapping||(i=F(la(B(d,f.line))),d.iter(i,g.line+1,function(a){return a==e.maxLine?(h=!0,!0):void 0})),d.sel.contains(b.from,b.to)>-1&&Ca(a),Wd(d,b,c,wc(a)),a.options.lineWrapping||(d.iter(i,f.line+b.text.length,function(a){var b=ta(a);b>e.maxLineLength&&(e.maxLine=a,e.maxLineLength=b,e.maxLineChanged=!0,h=!1)}),h&&(a.curOp.updateMaxLine=!0)),eb(d,f.line),wd(a,400);var j=b.text.length-(g.line-f.line)-1;b.full?qd(a):f.line!=g.line||1!=b.text.length||Vd(a.doc,b)?qd(a,f.line,g.line+1,j):rd(a,f.line,"text");var k=Da(a,"changes"),l=Da(a,"change");if(l||k){var m={from:f,to:g,text:b.text,removed:b.removed,origin:b.origin};l&&ub(a,"change",a,m),k&&(a.curOp.changeObjs||(a.curOp.changeObjs=[])).push(m)}a.display.selForContextMenu=null}function Je(a,b,c,d,e){if(d||(d=c),K(d,c)<0){var f;f=[d,c],c=f[0],d=f[1],f}"string"==typeof b&&(b=a.splitLines(b)),De(a,{from:c,to:d,text:b,origin:e})}function Ke(a,b,c,d){c<a.line?a.line+=d:b<a.line&&(a.line=b,a.ch=0)}function Le(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e],g=!0;if(f.ranges){f.copied||(f=a[e]=f.deepCopy(),f.copied=!0);for(var h=0;h<f.ranges.length;h++)Ke(f.ranges[h].anchor,b,c,d),Ke(f.ranges[h].head,b,c,d)}else{for(var i=0;i<f.changes.length;++i){var j=f.changes[i];if(c<j.from.line)j.from=J(j.from.line+d,j.from.ch),j.to=J(j.to.line+d,j.to.ch);else if(b<=j.to.line){g=!1;break}}g||(a.splice(0,e+1),e=0)}}}function Me(a,b){var c=b.from.line,d=b.to.line,e=b.text.length-(d-c)-1;Le(a.done,c,d,e),Le(a.undone,c,d,e)}function Ne(a,b,c,d){var e=b,f=b;return"number"==typeof b?f=B(a,P(a,b)):e=F(b),null==e?null:(d(f,e)&&a.cm&&rd(a.cm,e,c),f)}function Oe(a){var b=this;this.lines=a,this.parent=null;for(var c=0,d=0;d<a.length;++d)a[d].parent=b,c+=a[d].height;this.height=c}function Pe(a){var b=this;this.children=a;for(var c=0,d=0,e=0;e<a.length;++e){var f=a[e];c+=f.chunkSize(),d+=f.height,f.parent=b}this.size=c,this.height=d,this.parent=null}function Qe(a,b,c){sa(b)<(a.curOp&&a.curOp.scrollTop||a.doc.scrollTop)&&Tc(a,c)}function Re(a,b,c,d){var e=new Eh(a,c,d),f=a.cm;return f&&e.noHScroll&&(f.display.alignWidgets=!0),Ne(a,b,"widget",function(b){var c=b.widgets||(b.widgets=[]);if(null==e.insertAt?c.push(e):c.splice(Math.min(c.length-1,Math.max(0,e.insertAt)),0,e),e.line=b,f&&!qa(a,b)){var d=sa(b)<a.scrollTop;E(b,b.height+Ib(e)),d&&Tc(f,e.height),f.curOp.forceUpdate=!0}return!0}),ub(f,"lineWidgetAdded",f,e,"number"==typeof b?b:F(b)),e}function Se(a,b,c,d,f){if(d&&d.shared)return Te(a,b,c,d,f);if(a.cm&&!a.cm.curOp)return nd(a.cm,Se)(a,b,c,d,f);var g=new Gh(a,f),h=K(b,c);if(d&&k(d,g,!1),h>0||0==h&&g.clearWhenEmpty!==!1)return g;if(g.replacedWith&&(g.collapsed=!0,g.widgetNode=e("span",[g.replacedWith],"CodeMirror-widget"),d.handleMouseEvents||g.widgetNode.setAttribute("cm-ignore-events","true"),d.insertLeft&&(g.widgetNode.insertLeft=!0)),g.collapsed){if(ka(a,b.line,b,c,g)||b.line!=c.line&&ka(a,c.line,b,c,g))throw new Error("Inserting collapsed marker partially overlapping an existing one");U()}g.addToHistory&&de(a,{from:b,to:c,origin:"markText"},a.sel,NaN);var i,j=b.line,l=a.cm;if(a.iter(j,c.line+1,function(a){l&&g.collapsed&&!l.options.lineWrapping&&la(a)==l.display.maxLine&&(i=!0),g.collapsed&&j!=b.line&&E(a,0),Y(a,new V(g,j==b.line?b.ch:null,j==c.line?c.ch:null)),++j}),g.collapsed&&a.iter(b.line,c.line+1,function(b){qa(a,b)&&E(b,0)}),g.clearOnEnter&&bh(g,"beforeCursorEnter",function(){return g.clear()}),g.readOnly&&(T(),(a.history.done.length||a.history.undone.length)&&a.clearHistory()),g.collapsed&&(g.id=++Fh,g.atomic=!0),l){if(i&&(l.curOp.updateMaxLine=!0),g.collapsed)qd(l,b.line,c.line+1);else if(g.className||g.title||g.startStyle||g.endStyle||g.css)for(var m=b.line;m<=c.line;m++)rd(l,m,"text");g.atomic&&we(l.doc),ub(l,"markerAdded",l,g)}return g}function Te(a,b,c,d,e){d=k(d),d.shared=!1;var f=[Se(a,b,c,d,e)],g=f[0],h=d.widgetNode;return Xd(a,function(a){h&&(d.widgetNode=h.cloneNode(!0)),f.push(Se(a,Q(a,b),Q(a,c),d,e));for(var i=0;i<a.linked.length;++i)if(a.linked[i].isParent)return;g=p(f)}),new Hh(f,g)}function Ue(a){return a.findMarks(J(a.first,0),a.clipPos(J(a.lastLine())),function(a){return a.parent})}function Ve(a,b){for(var c=0;c<b.length;c++){var d=b[c],e=d.find(),f=a.clipPos(e.from),g=a.clipPos(e.to);if(K(f,g)){var h=Se(a,f,g,d.primary,d.primary.type);d.markers.push(h),h.parent=d}}}function We(a){for(var b=function(b){var c=a[b],d=[c.primary.doc];Xd(c.primary.doc,function(a){return d.push(a)});for(var e=0;e<c.markers.length;e++){var f=c.markers[e];-1==m(d,f.doc)&&(f.parent=null,c.markers.splice(e--,1))}},c=0;c<a.length;c++)b(c)}function Xe(a){var b=this;if($e(b),!Ba(b,a)&&!Jb(b.display,a)){Fa(a),sg&&(Kh=+new Date);var c=yc(b,a,!0),d=a.dataTransfer.files;if(c&&!b.isReadOnly())if(d&&d.length&&window.FileReader&&window.File)for(var e=d.length,f=Array(e),g=0,h=function(a,d){if(!b.options.allowDropFileTypes||-1!=m(b.options.allowDropFileTypes,a.type)){var h=new FileReader;h.onload=nd(b,function(){var a=h.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(a)&&(a=""),f[d]=a,++g==e){c=Q(b.doc,c);var i={from:c,to:c,text:b.doc.splitLines(f.join(b.doc.lineSeparator())),origin:"paste"};De(b.doc,i),se(b.doc,Nd(c,Od(i)))}}),h.readAsText(a)}},i=0;e>i;++i)h(d[i],i);else{if(b.state.draggingText&&b.doc.sel.contains(c)>-1)return b.state.draggingText(a),void setTimeout(function(){return b.display.input.focus()},20);try{var j=a.dataTransfer.getData("Text");if(j){var k;if(b.state.draggingText&&!b.state.draggingText.copy&&(k=b.listSelections()),ue(b.doc,Nd(c,c)),k)for(var l=0;l<k.length;++l)Je(b.doc,"",k[l].anchor,k[l].head,"drag");b.replaceSelection(j,"around","paste"),b.display.input.focus()}}catch(a){}}}}function Ye(a,b){if(sg&&(!a.state.draggingText||+new Date-Kh<100))return void Ia(b);if(!Ba(a,b)&&!Jb(a.display,b)&&(b.dataTransfer.setData("Text",a.getSelection()),
b.dataTransfer.effectAllowed="copyMove",b.dataTransfer.setDragImage&&!yg)){var c=d("img",null,null,"position: fixed; left: 0; top: 0;");c.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",xg&&(c.width=c.height=1,a.display.wrapper.appendChild(c),c._top=c.offsetTop),b.dataTransfer.setDragImage(c,0,0),xg&&c.parentNode.removeChild(c)}}function Ze(a,b){var e=yc(a,b);if(e){var f=document.createDocumentFragment();Cc(a,e,f),a.display.dragCursor||(a.display.dragCursor=d("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),a.display.lineSpace.insertBefore(a.display.dragCursor,a.display.cursorDiv)),c(a.display.dragCursor,f)}}function $e(a){a.display.dragCursor&&(a.display.lineSpace.removeChild(a.display.dragCursor),a.display.dragCursor=null)}function _e(a){if(document.getElementsByClassName)for(var b=document.getElementsByClassName("CodeMirror"),c=0;c<b.length;c++){var d=b[c].CodeMirror;d&&a(d)}}function af(){Lh||(bf(),Lh=!0)}function bf(){var a;bh(window,"resize",function(){null==a&&(a=setTimeout(function(){a=null,_e(cf)},100))}),bh(window,"blur",function(){return _e(Jc)})}function cf(a){var b=a.display;(b.lastWrapHeight!=b.wrapper.clientHeight||b.lastWrapWidth!=b.wrapper.clientWidth)&&(b.cachedCharWidth=b.cachedTextHeight=b.cachedPaddingH=null,b.scrollbarsClipped=!1,a.setSize())}function df(a){var b=a.split(/-(?!$)/);a=b[b.length-1];for(var c,d,e,f,g=0;g<b.length-1;g++){var h=b[g];if(/^(cmd|meta|m)$/i.test(h))f=!0;else if(/^a(lt)?$/i.test(h))c=!0;else if(/^(c|ctrl|control)$/i.test(h))d=!0;else{if(!/^s(hift)?$/i.test(h))throw new Error("Unrecognized modifier name: "+h);e=!0}}return c&&(a="Alt-"+a),d&&(a="Ctrl-"+a),f&&(a="Cmd-"+a),e&&(a="Shift-"+a),a}function ef(a){var b={};for(var c in a)if(a.hasOwnProperty(c)){var d=a[c];if(/^(name|fallthrough|(de|at)tach)$/.test(c))continue;if("..."==d){delete a[c];continue}for(var e=q(c.split(" "),df),f=0;f<e.length;f++){var g=void 0,h=void 0;f==e.length-1?(h=e.join(" "),g=d):(h=e.slice(0,f+1).join(" "),g="...");var i=b[h];if(i){if(i!=g)throw new Error("Inconsistent bindings for "+h)}else b[h]=g}delete a[c]}for(var j in b)a[j]=b[j];return a}function ff(a,b,c,d){b=kf(b);var e=b.call?b.call(a,d):b[a];if(e===!1)return"nothing";if("..."===e)return"multi";if(null!=e&&c(e))return"handled";if(b.fallthrough){if("[object Array]"!=Object.prototype.toString.call(b.fallthrough))return ff(a,b.fallthrough,c,d);for(var f=0;f<b.fallthrough.length;f++){var g=ff(a,b.fallthrough[f],c,d);if(g)return g}}}function gf(a){var b="string"==typeof a?a:Mh[a.keyCode];return"Ctrl"==b||"Alt"==b||"Shift"==b||"Mod"==b}function hf(a,b,c){var d=a;return b.altKey&&"Alt"!=d&&(a="Alt-"+a),(Jg?b.metaKey:b.ctrlKey)&&"Ctrl"!=d&&(a="Ctrl-"+a),(Jg?b.ctrlKey:b.metaKey)&&"Cmd"!=d&&(a="Cmd-"+a),!c&&b.shiftKey&&"Shift"!=d&&(a="Shift-"+a),a}function jf(a,b){if(xg&&34==a.keyCode&&a["char"])return!1;var c=Mh[a.keyCode];return null==c||a.altGraphKey?!1:hf(c,a,b)}function kf(a){return"string"==typeof a?Qh[a]:a}function lf(a,b){for(var c=a.doc.sel.ranges,d=[],e=0;e<c.length;e++){for(var f=b(c[e]);d.length&&K(f.from,p(d).to)<=0;){var g=d.pop();if(K(g.from,f.from)<0){f.from=g.from;break}}d.push(f)}md(a,function(){for(var b=d.length-1;b>=0;b--)Je(a.doc,"",d[b].from,d[b].to,"+delete");Uc(a)})}function mf(a,b,c){var d=y(a.text,b+c,c);return 0>d||d>a.text.length?null:d}function nf(a,b,c){var d=mf(a,b.ch,c);return null==d?null:new J(b.line,d,0>c?"after":"before")}function of(a,b,c,d,e){if(a){var f=xa(c,b.doc.direction);if(f){var g,h=0>e?p(f):f[0],i=0>e==(1==h.level),j=i?"after":"before";if(h.level>0){var k=Vb(b,c);g=0>e?c.text.length-1:0;var l=Wb(b,k,g).top;g=z(function(a){return Wb(b,k,a).top==l},0>e==(1==h.level)?h.from:h.to-1,g),"before"==j&&(g=mf(c,g,1))}else g=0>e?h.to:h.from;return new J(d,g,j)}}return new J(d,0>e?c.text.length:0,0>e?"before":"after")}function pf(a,b,c,d){var e=xa(b,a.doc.direction);if(!e)return nf(b,c,d);c.ch>=b.text.length?(c.ch=b.text.length,c.sticky="before"):c.ch<=0&&(c.ch=0,c.sticky="after");var f=wa(e,c.ch,c.sticky),g=e[f];if("ltr"==a.doc.direction&&g.level%2==0&&(d>0?g.to>c.ch:g.from<c.ch))return nf(b,c,d);var h,i=function(a,c){return mf(b,a instanceof J?a.ch:a,c)},j=function(c){return a.options.lineWrapping?(h=h||Vb(a,b),nc(a,b,h,c)):{begin:0,end:b.text.length}},k=j("before"==c.sticky?i(c,-1):c.ch);if("rtl"==a.doc.direction||1==g.level){var l=1==g.level==0>d,m=i(c,l?1:-1);if(null!=m&&(l?m<=g.to&&m<=k.end:m>=g.from&&m>=k.begin)){var n=l?"before":"after";return new J(c.line,m,n)}}var o=function(a,b,d){for(var f=function(a,b){return b?new J(c.line,i(a,1),"before"):new J(c.line,a,"after")};a>=0&&a<e.length;a+=b){var g=e[a],h=b>0==(1!=g.level),j=h?d.begin:i(d.end,-1);if(g.from<=j&&j<g.to)return f(j,h);if(j=h?g.from:i(g.to,-1),d.begin<=j&&j<d.end)return f(j,h)}},p=o(f+d,d,k);if(p)return p;var q=d>0?k.end:i(k.begin,-1);return null==q||d>0&&q==b.text.length||!(p=o(d>0?0:e.length-1,d,j(q)))?null:p}function qf(a,b){var c=B(a.doc,b),d=la(c);return d!=c&&(b=F(d)),of(!0,a,d,b,1)}function rf(a,b){var c=B(a.doc,b),d=ma(c);return d!=c&&(b=F(d)),of(!0,a,c,b,-1)}function sf(a,b){var c=qf(a,b.line),d=B(a.doc,c.line),e=xa(d,a.doc.direction);if(!e||0==e[0].level){var f=Math.max(0,d.text.search(/\S/)),g=b.line==c.line&&b.ch<=f&&b.ch;return J(c.line,g?0:f,c.sticky)}return c}function tf(a,b,c){if("string"==typeof b&&(b=Rh[b],!b))return!1;a.display.input.ensurePolled();var d=a.display.shift,e=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),c&&(a.display.shift=!1),e=b(a)!=Rg}finally{a.display.shift=d,a.state.suppressEdits=!1}return e}function uf(a,b,c){for(var d=0;d<a.state.keyMaps.length;d++){var e=ff(b,a.state.keyMaps[d],c,a);if(e)return e}return a.options.extraKeys&&ff(b,a.options.extraKeys,c,a)||ff(b,a.options.keyMap,c,a)}function vf(a,b,c,d){var e=a.state.keySeq;if(e){if(gf(b))return"handled";Sh.set(50,function(){a.state.keySeq==e&&(a.state.keySeq=null,a.display.input.reset())}),b=e+" "+b}var f=uf(a,b,d);return"multi"==f&&(a.state.keySeq=b),"handled"==f&&ub(a,"keyHandled",a,b,c),("handled"==f||"multi"==f)&&(Fa(c),Fc(a)),e&&!f&&/\'$/.test(b)?(Fa(c),!0):!!f}function wf(a,b){var c=jf(b,!0);return c?b.shiftKey&&!a.state.keySeq?vf(a,"Shift-"+c,b,function(b){return tf(a,b,!0)})||vf(a,c,b,function(b){return("string"==typeof b?/^go[A-Z]/.test(b):b.motion)?tf(a,b):void 0}):vf(a,c,b,function(b){return tf(a,b)}):!1}function xf(a,b,c){return vf(a,"'"+c+"'",b,function(b){return tf(a,b,!0)})}function yf(a){var b=this;if(b.curOp.focus=g(),!Ba(b,a)){sg&&11>tg&&27==a.keyCode&&(a.returnValue=!1);var c=a.keyCode;b.display.shift=16==c||a.shiftKey;var d=wf(b,a);xg&&(Th=d?c:null,!d&&88==c&&!fh&&(Eg?a.metaKey:a.ctrlKey)&&b.replaceSelection("",null,"cut")),18!=c||/\bCodeMirror-crosshair\b/.test(b.display.lineDiv.className)||zf(b)}}function zf(a){function b(a){18!=a.keyCode&&a.altKey||(Lg(c,"CodeMirror-crosshair"),za(document,"keyup",b),za(document,"mouseover",b))}var c=a.display.lineDiv;h(c,"CodeMirror-crosshair"),bh(document,"keyup",b),bh(document,"mouseover",b)}function Af(a){16==a.keyCode&&(this.doc.sel.shift=!1),Ba(this,a)}function Bf(a){var b=this;if(!(Jb(b.display,a)||Ba(b,a)||a.ctrlKey&&!a.altKey||Eg&&a.metaKey)){var c=a.keyCode,d=a.charCode;if(xg&&c==Th)return Th=null,void Fa(a);if(!xg||a.which&&!(a.which<10)||!wf(b,a)){var e=String.fromCharCode(null==d?c:d);"\b"!=e&&(xf(b,a,e)||b.display.input.onKeyPress(a))}}}function Cf(a,b){var c=+new Date;return Xh&&Xh.compare(c,a,b)?(Wh=Xh=null,"triple"):Wh&&Wh.compare(c,a,b)?(Xh=new Vh(c,a,b),Wh=null,"double"):(Wh=new Vh(c,a,b),Xh=null,"single")}function Df(a){var b=this,c=b.display;if(!(Ba(b,a)||c.activeTouch&&c.input.supportsTouch())){if(c.input.ensurePolled(),c.shift=a.shiftKey,Jb(c,a))return void(ug||(c.scroller.draggable=!1,setTimeout(function(){return c.scroller.draggable=!0},100)));if(!Mf(b,a)){var d=yc(b,a),e=Ka(a),f=d?Cf(d,e):"single";window.focus(),1==e&&b.state.selectingText&&b.state.selectingText(a),d&&Ef(b,e,d,f,a)||(1==e?d?Gf(b,d,f,a):Ja(a)==c.scroller&&Fa(a):2==e?(d&&ne(b.doc,d),setTimeout(function(){return c.input.focus()},20)):3==e&&(Kg?Nf(b,a):Hc(b)))}}}function Ef(a,b,c,d,e){var f="Click";return"double"==d?f="Double"+f:"triple"==d&&(f="Triple"+f),f=(1==b?"Left":2==b?"Middle":"Right")+f,vf(a,hf(f,e),e,function(b){if("string"==typeof b&&(b=Rh[b]),!b)return!1;var d=!1;try{a.isReadOnly()&&(a.state.suppressEdits=!0),d=b(a,c)!=Rg}finally{a.state.suppressEdits=!1}return d})}function Ff(a,b,c){var d=a.getOption("configureMouse"),e=d?d(a,b,c):{};if(null==e.unit){var f=Fg?c.shiftKey&&c.metaKey:c.altKey;e.unit=f?"rectangle":"single"==b?"char":"double"==b?"word":"line"}return(null==e.extend||a.doc.extend)&&(e.extend=a.doc.extend||c.shiftKey),null==e.addNew&&(e.addNew=Eg?c.metaKey:c.ctrlKey),null==e.moveOnDrag&&(e.moveOnDrag=!(Eg?c.altKey:c.ctrlKey)),e}function Gf(a,b,c,d){sg?setTimeout(j(Gc,a),0):a.curOp.focus=g();var e,f=Ff(a,c,d),h=a.doc.sel;a.options.dragDrop&&ch&&!a.isReadOnly()&&"single"==c&&(e=h.contains(b))>-1&&(K((e=h.ranges[e]).from(),b)<0||b.xRel>0)&&(K(e.to(),b)>0||b.xRel<0)?Hf(a,d,b,f):Jf(a,d,b,f)}function Hf(a,b,c,d){var e=a.display,f=!1,g=nd(a,function(b){ug&&(e.scroller.draggable=!1),a.state.draggingText=!1,za(document,"mouseup",g),za(document,"mousemove",h),za(e.scroller,"dragstart",i),za(e.scroller,"drop",g),f||(Fa(b),d.addNew||ne(a.doc,c,null,null,d.extend),ug||sg&&9==tg?setTimeout(function(){document.body.focus(),e.input.focus()},20):e.input.focus())}),h=function(a){f=f||Math.abs(b.clientX-a.clientX)+Math.abs(b.clientY-a.clientY)>=10},i=function(){return f=!0};ug&&(e.scroller.draggable=!0),a.state.draggingText=g,g.copy=!d.moveOnDrag,e.scroller.dragDrop&&e.scroller.dragDrop(),bh(document,"mouseup",g),bh(document,"mousemove",h),bh(e.scroller,"dragstart",i),bh(e.scroller,"drop",g),Hc(a),setTimeout(function(){return e.input.focus()},20)}function If(a,b,c){if("char"==c)return new Dh(b,b);if("word"==c)return a.findWordAt(b);if("line"==c)return new Dh(J(b.line,0),Q(a.doc,J(b.line+1,0)));var d=c(a,b);return new Dh(d.from,d.to)}function Jf(a,b,c,d){function e(b){if(0!=K(r,b))if(r=b,"rectangle"==d.unit){for(var e=[],f=a.options.tabSize,g=l(B(j,c.line).text,c.ch,f),h=l(B(j,b.line).text,b.ch,f),i=Math.min(g,h),p=Math.max(g,h),q=Math.min(c.line,b.line),s=Math.min(a.lastLine(),Math.max(c.line,b.line));s>=q;q++){var t=B(j,q).text,u=n(t,i,f);i==p?e.push(new Dh(J(q,u),J(q,u))):t.length>u&&e.push(new Dh(J(q,u),J(q,n(t,p,f))))}e.length||e.push(new Dh(c,c)),te(j,Md(o.ranges.slice(0,m).concat(e),m),{origin:"*mouse",scroll:!1}),a.scrollIntoView(b)}else{var v,w=k,x=If(a,b,d.unit),y=w.anchor;K(x.anchor,y)>0?(v=x.head,y=O(w.from(),x.anchor)):(v=x.anchor,y=N(w.to(),x.head));var z=o.ranges.slice(0);z[m]=Kf(a,new Dh(Q(j,y),v)),te(j,Md(z,m),Tg)}}function f(b){var c=++t,h=yc(a,b,!0,"rectangle"==d.unit);if(h)if(0!=K(h,r)){a.curOp.focus=g(),e(h);var k=Mc(i,j);(h.line>=k.to||h.line<k.from)&&setTimeout(nd(a,function(){t==c&&f(b)}),150)}else{var l=b.clientY<s.top?-20:b.clientY>s.bottom?20:0;l&&setTimeout(nd(a,function(){t==c&&(i.scroller.scrollTop+=l,f(b))}),50)}}function h(b){a.state.selectingText=!1,t=1/0,Fa(b),i.input.focus(),za(document,"mousemove",u),za(document,"mouseup",v),j.history.lastSelOrigin=null}var i=a.display,j=a.doc;Fa(b);var k,m,o=j.sel,p=o.ranges;if(d.addNew&&!d.extend?(m=j.sel.contains(c),k=m>-1?p[m]:new Dh(c,c)):(k=j.sel.primary(),m=j.sel.primIndex),"rectangle"==d.unit)d.addNew||(k=new Dh(c,c)),c=yc(a,b,!0,!0),m=-1;else{var q=If(a,c,d.unit);k=d.extend?me(k,q.anchor,q.head,d.extend):q}d.addNew?-1==m?(m=p.length,te(j,Md(p.concat([k]),m),{scroll:!1,origin:"*mouse"})):p.length>1&&p[m].empty()&&"char"==d.unit&&!d.extend?(te(j,Md(p.slice(0,m).concat(p.slice(m+1)),0),{scroll:!1,origin:"*mouse"}),o=j.sel):pe(j,m,k,Tg):(m=0,te(j,new Ch([k],0),Tg),o=j.sel);var r=c,s=i.wrapper.getBoundingClientRect(),t=0,u=nd(a,function(a){Ka(a)?f(a):h(a)}),v=nd(a,h);a.state.selectingText=v,bh(document,"mousemove",u),bh(document,"mouseup",v)}function Kf(a,b){var c=b.anchor,d=b.head,e=B(a.doc,c.line);if(0==K(c,d)&&c.sticky==d.sticky)return b;var f=xa(e);if(!f)return b;var g=wa(f,c.ch,c.sticky),h=f[g];if(h.from!=c.ch&&h.to!=c.ch)return b;var i=g+(h.from==c.ch==(1!=h.level)?0:1);if(0==i||i==f.length)return b;var j;if(d.line!=c.line)j=(d.line-c.line)*("ltr"==a.doc.direction?1:-1)>0;else{var k=wa(f,d.ch,d.sticky),l=k-g||(d.ch-c.ch)*(1==h.level?-1:1);j=k==i-1||k==i?0>l:l>0}var m=f[i+(j?-1:0)],n=j==(1==m.level),o=n?m.from:m.to,p=n?"after":"before";return c.ch==o&&c.sticky==p?b:new Dh(new J(c.line,o,p),d)}function Lf(a,b,c,d){var e,f;if(b.touches)e=b.touches[0].clientX,f=b.touches[0].clientY;else try{e=b.clientX,f=b.clientY}catch(b){return!1}if(e>=Math.floor(a.display.gutters.getBoundingClientRect().right))return!1;d&&Fa(b);var g=a.display,h=g.lineDiv.getBoundingClientRect();if(f>h.bottom||!Da(a,c))return Ha(b);f-=h.top-g.viewOffset;for(var i=0;i<a.options.gutters.length;++i){var j=g.gutters.childNodes[i];if(j&&j.getBoundingClientRect().right>=e){var k=G(a.doc,f),l=a.options.gutters[i];return Aa(a,c,a,k,l,b),Ha(b)}}}function Mf(a,b){return Lf(a,b,"gutterClick",!0)}function Nf(a,b){Jb(a.display,b)||Of(a,b)||Ba(a,b,"contextmenu")||a.display.input.onContextMenu(b)}function Of(a,b){return Da(a,"gutterContextMenu")?Lf(a,b,"gutterContextMenu",!1):!1}function Pf(a){a.display.wrapper.className=a.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+a.options.theme.replace(/(^|\s)\s*/g," cm-s-"),bc(a)}function Qf(a){function b(b,d,e,f){a.defaults[b]=d,e&&(c[b]=f?function(a,b,c){c!=Yh&&e(a,b,c)}:e)}var c=a.optionHandlers;a.defineOption=b,a.Init=Yh,b("value","",function(a,b){return a.setValue(b)},!0),b("mode",null,function(a,b){a.doc.modeOption=b,Td(a)},!0),b("indentUnit",2,Td,!0),b("indentWithTabs",!1),b("smartIndent",!0),b("tabSize",4,function(a){Ud(a),bc(a),qd(a)},!0),b("lineSeparator",null,function(a,b){if(a.doc.lineSep=b,b){var c=[],d=a.doc.first;a.doc.iter(function(a){for(var e=0;;){var f=a.text.indexOf(b,e);if(-1==f)break;e=f+b.length,c.push(J(d,f))}d++});for(var e=c.length-1;e>=0;e--)Je(a.doc,b,c[e],J(c[e].line,c[e].ch+b.length))}}),b("specialChars",/[\u0000-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200f\u2028\u2029\ufeff]/g,function(a,b,c){a.state.specialChars=new RegExp(b.source+(b.test("	")?"":"|	"),"g"),c!=Yh&&a.refresh()}),b("specialCharPlaceholder",jb,function(a){return a.refresh()},!0),b("electricChars",!0),b("inputStyle",Dg?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),b("spellcheck",!1,function(a,b){return a.getInputField().spellcheck=b},!0),b("rtlMoveVisually",!Gg),b("wholeLineUpdateBefore",!0),b("theme","default",function(a){Pf(a),Rf(a)},!0),b("keyMap","default",function(a,b,c){var d=kf(b),e=c!=Yh&&kf(c);e&&e.detach&&e.detach(a,d),d.attach&&d.attach(a,e||null)}),b("extraKeys",null),b("configureMouse",null),b("lineWrapping",!1,Tf,!0),b("gutters",[],function(a){Id(a.options),Rf(a)},!0),b("fixedGutter",!0,function(a,b){a.display.gutters.style.left=b?vc(a.display)+"px":"0",a.refresh()},!0),b("coverGutterNextToScrollbar",!1,function(a){return bd(a)},!0),b("scrollbarStyle","native",function(a){dd(a),bd(a),a.display.scrollbars.setScrollTop(a.doc.scrollTop),a.display.scrollbars.setScrollLeft(a.doc.scrollLeft)},!0),b("lineNumbers",!1,function(a){Id(a.options),Rf(a)},!0),b("firstLineNumber",1,Rf,!0),b("lineNumberFormatter",function(a){return a},Rf,!0),b("showCursorWhenSelecting",!1,Ac,!0),b("resetSelectionOnContextMenu",!0),b("lineWiseCopyCut",!0),b("pasteLinesPerSelection",!0),b("readOnly",!1,function(a,b){"nocursor"==b&&(Jc(a),a.display.input.blur()),a.display.input.readOnlyChanged(b)}),b("disableInput",!1,function(a,b){b||a.display.input.reset()},!0),b("dragDrop",!0,Sf),b("allowDropFileTypes",null),b("cursorBlinkRate",530),b("cursorScrollMargin",0),b("cursorHeight",1,Ac,!0),b("singleCursorHeightPerLine",!0,Ac,!0),b("workTime",100),b("workDelay",100),b("flattenSpans",!0,Ud,!0),b("addModeClass",!1,Ud,!0),b("pollInterval",100),b("undoDepth",200,function(a,b){return a.doc.history.undoDepth=b}),b("historyEventDelay",1250),b("viewportMargin",10,function(a){return a.refresh()},!0),b("maxHighlightLength",1e4,Ud,!0),b("moveInputWithCursor",!0,function(a,b){b||a.display.input.resetPosition()}),b("tabindex",null,function(a,b){return a.display.input.getField().tabIndex=b||""}),b("autofocus",null),b("direction","ltr",function(a,b){return a.doc.setDirection(b)},!0)}function Rf(a){Hd(a),qd(a),Nc(a)}function Sf(a,b,c){var d=c&&c!=Yh;if(!b!=!d){var e=a.display.dragFunctions,f=b?bh:za;f(a.display.scroller,"dragstart",e.start),f(a.display.scroller,"dragenter",e.enter),f(a.display.scroller,"dragover",e.over),f(a.display.scroller,"dragleave",e.leave),f(a.display.scroller,"drop",e.drop)}}function Tf(a){a.options.lineWrapping?(h(a.display.wrapper,"CodeMirror-wrap"),a.display.sizer.style.minWidth="",a.display.sizerWidth=null):(Lg(a.display.wrapper,"CodeMirror-wrap"),ua(a)),xc(a),qd(a),bc(a),setTimeout(function(){return bd(a)},100)}function Uf(a,b){var c=this;if(!(this instanceof Uf))return new Uf(a,b);this.options=b=b?k(b):{},k(Zh,b,!1),Id(b);var d=b.value;"string"==typeof d&&(d=new Jh(d,b.mode,null,b.lineSeparator,b.direction)),this.doc=d;var e=new Uf.inputStyles[b.inputStyle](this),f=this.display=new A(a,d,e);f.wrapper.CodeMirror=this,Hd(this),Pf(this),b.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),dd(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Ng,keySeq:null,specialChars:null},b.autofocus&&!Dg&&f.input.focus(),sg&&11>tg&&setTimeout(function(){return c.display.input.reset(!0)},20),Vf(this),af(),ed(this),this.curOp.forceUpdate=!0,Yd(this,d),b.autofocus&&!Dg||this.hasFocus()?setTimeout(j(Ic,this),20):Jc(this);for(var g in $h)$h.hasOwnProperty(g)&&$h[g](c,b[g],Yh);Oc(this),b.finishInit&&b.finishInit(this);for(var h=0;h<_h.length;++h)_h[h](c);fd(this),ug&&b.lineWrapping&&"optimizelegibility"==getComputedStyle(f.lineDiv).textRendering&&(f.lineDiv.style.textRendering="auto")}function Vf(a){function b(){e.activeTouch&&(f=setTimeout(function(){return e.activeTouch=null},1e3),g=e.activeTouch,g.end=+new Date)}function c(a){if(1!=a.touches.length)return!1;var b=a.touches[0];return b.radiusX<=1&&b.radiusY<=1}function d(a,b){if(null==b.left)return!0;var c=b.left-a.left,d=b.top-a.top;return c*c+d*d>400}var e=a.display;bh(e.scroller,"mousedown",nd(a,Df)),sg&&11>tg?bh(e.scroller,"dblclick",nd(a,function(b){if(!Ba(a,b)){var c=yc(a,b);if(c&&!Mf(a,b)&&!Jb(a.display,b)){Fa(b);var d=a.findWordAt(c);ne(a.doc,d.anchor,d.head)}}})):bh(e.scroller,"dblclick",function(b){return Ba(a,b)||Fa(b)}),Kg||bh(e.scroller,"contextmenu",function(b){return Nf(a,b)});var f,g={end:0};bh(e.scroller,"touchstart",function(b){if(!Ba(a,b)&&!c(b)&&!Mf(a,b)){e.input.ensurePolled(),clearTimeout(f);var d=+new Date;e.activeTouch={start:d,moved:!1,prev:d-g.end<=300?g:null},1==b.touches.length&&(e.activeTouch.left=b.touches[0].pageX,e.activeTouch.top=b.touches[0].pageY)}}),bh(e.scroller,"touchmove",function(){e.activeTouch&&(e.activeTouch.moved=!0)}),bh(e.scroller,"touchend",function(c){var f=e.activeTouch;if(f&&!Jb(e,c)&&null!=f.left&&!f.moved&&new Date-f.start<300){var g,h=a.coordsChar(e.activeTouch,"page");g=!f.prev||d(f,f.prev)?new Dh(h,h):!f.prev.prev||d(f,f.prev.prev)?a.findWordAt(h):new Dh(J(h.line,0),Q(a.doc,J(h.line+1,0))),a.setSelection(g.anchor,g.head),a.focus(),Fa(c)}b()}),bh(e.scroller,"touchcancel",b),bh(e.scroller,"scroll",function(){e.scroller.clientHeight&&(Zc(a,e.scroller.scrollTop),_c(a,e.scroller.scrollLeft,!0),Aa(a,"scroll",a))}),bh(e.scroller,"mousewheel",function(b){return Ld(a,b)}),bh(e.scroller,"DOMMouseScroll",function(b){return Ld(a,b)}),bh(e.wrapper,"scroll",function(){return e.wrapper.scrollTop=e.wrapper.scrollLeft=0}),e.dragFunctions={enter:function(b){Ba(a,b)||Ia(b)},over:function(b){Ba(a,b)||(Ze(a,b),Ia(b))},start:function(b){return Ye(a,b)},drop:nd(a,Xe),leave:function(b){Ba(a,b)||$e(a)}};var h=e.input.getField();bh(h,"keyup",function(b){return Af.call(a,b)}),bh(h,"keydown",nd(a,yf)),bh(h,"keypress",nd(a,Bf)),bh(h,"focus",function(b){return Ic(a,b)}),bh(h,"blur",function(b){return Jc(a,b)})}function Wf(a,b,c,d){var e,f=a.doc;null==c&&(c="add"),"smart"==c&&(f.mode.indent?e=Ya(a,b).state:c="prev");var g=a.options.tabSize,h=B(f,b),i=l(h.text,null,g);h.stateAfter&&(h.stateAfter=null);var j,k=h.text.match(/^\s*/)[0];if(d||/\S/.test(h.text)){if("smart"==c&&(j=f.mode.indent(e,h.text.slice(k.length),h.text),j==Rg||j>150)){if(!d)return;c="prev"}}else j=0,c="not";"prev"==c?j=b>f.first?l(B(f,b-1).text,null,g):0:"add"==c?j=i+a.options.indentUnit:"subtract"==c?j=i-a.options.indentUnit:"number"==typeof c&&(j=i+c),j=Math.max(0,j);var m="",n=0;if(a.options.indentWithTabs)for(var p=Math.floor(j/g);p;--p)n+=g,m+="	";if(j>n&&(m+=o(j-n)),m!=k)return Je(f,m,J(b,0),J(b,k.length),"+input"),h.stateAfter=null,!0;for(var q=0;q<f.sel.ranges.length;q++){var r=f.sel.ranges[q];if(r.head.line==b&&r.head.ch<k.length){var s=J(b,k.length);pe(f,q,new Dh(s,s));break}}}function Xf(a){ai=a}function Yf(a,b,c,d,e){var f=a.doc;a.display.shift=!1,d||(d=f.sel);var g=a.state.pasteIncoming||"paste"==e,h=dh(b),i=null;if(g&&d.ranges.length>1)if(ai&&ai.text.join("\n")==b){if(d.ranges.length%ai.text.length==0){i=[];for(var j=0;j<ai.text.length;j++)i.push(f.splitLines(ai.text[j]))}}else h.length==d.ranges.length&&a.options.pasteLinesPerSelection&&(i=q(h,function(a){return[a]}));for(var k,l=d.ranges.length-1;l>=0;l--){var m=d.ranges[l],n=m.from(),o=m.to();m.empty()&&(c&&c>0?n=J(n.line,n.ch-c):a.state.overwrite&&!g?o=J(o.line,Math.min(B(f,o.line).text.length,o.ch+p(h).length)):ai&&ai.lineWise&&ai.text.join("\n")==b&&(n=o=J(n.line,0))),k=a.curOp.updateInput;var r={from:n,to:o,text:i?i[l%i.length]:h,origin:e||(g?"paste":a.state.cutIncoming?"cut":"+input")};De(a.doc,r),ub(a,"inputRead",a,r)}b&&!g&&$f(a,b),Uc(a),a.curOp.updateInput=k,a.curOp.typing=!0,a.state.pasteIncoming=a.state.cutIncoming=!1}function Zf(a,b){var c=a.clipboardData&&a.clipboardData.getData("Text");return c?(a.preventDefault(),b.isReadOnly()||b.options.disableInput||md(b,function(){return Yf(b,c,0,null,"paste")}),!0):void 0}function $f(a,b){if(a.options.electricChars&&a.options.smartIndent)for(var c=a.doc.sel,d=c.ranges.length-1;d>=0;d--){var e=c.ranges[d];if(!(e.head.ch>100||d&&c.ranges[d-1].head.line==e.head.line)){var f=a.getModeAt(e.head),g=!1;if(f.electricChars){for(var h=0;h<f.electricChars.length;h++)if(b.indexOf(f.electricChars.charAt(h))>-1){g=Wf(a,e.head.line,"smart");break}}else f.electricInput&&f.electricInput.test(B(a.doc,e.head.line).text.slice(0,e.head.ch))&&(g=Wf(a,e.head.line,"smart"));g&&ub(a,"electricInput",a,e.head.line)}}}function _f(a){for(var b=[],c=[],d=0;d<a.doc.sel.ranges.length;d++){var e=a.doc.sel.ranges[d].head.line,f={anchor:J(e,0),head:J(e+1,0)};c.push(f),b.push(a.getRange(f.anchor,f.head))}return{text:b,ranges:c}}function ag(a,b){a.setAttribute("autocorrect","off"),a.setAttribute("autocapitalize","off"),a.setAttribute("spellcheck",!!b)}function bg(){var a=d("textarea",null,null,"position: absolute; bottom: -1em; padding: 0; width: 1px; height: 1em; outline: none"),b=d("div",[a],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return ug?a.style.width="1000px":a.setAttribute("wrap","off"),Bg&&(a.style.border="1px solid black"),ag(a),b}function cg(a,b,c,d,e){function f(){var d=b.line+c;return d<a.first||d>=a.first+a.size?!1:(b=new J(d,b.ch,b.sticky),j=B(a,d))}function g(d){var g;if(g=e?pf(a.cm,j,b,c):nf(j,b,c),null==g){if(d||!f())return!1;b=of(e,a.cm,j,b.line,c)}else b=g;return!0}var h=b,i=c,j=B(a,b.line);if("char"==d)g();else if("column"==d)g(!0);else if("word"==d||"group"==d)for(var k=null,l="group"==d,m=a.cm&&a.cm.getHelper(b,"wordChars"),n=!0;!(0>c)||g(!n);n=!1){var o=j.text.charAt(b.ch)||"\n",p=v(o,m)?"w":l&&"\n"==o?"n":!l||/\s/.test(o)?null:"p";if(!l||n||p||(p="s"),k&&k!=p){0>c&&(c=1,g(),b.sticky="after");break}if(p&&(k=p),c>0&&!g(!n))break}var q=ze(a,b,h,i,!0);return L(h,q)&&(q.hitSide=!0),q}function dg(a,b,c,d){var e,f=a.doc,g=b.left;if("page"==d){var h=Math.min(a.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight),i=Math.max(h-.5*sc(a.display),3);e=(c>0?b.bottom:b.top)+c*i}else"line"==d&&(e=c>0?b.bottom+3:b.top-3);for(var j;j=lc(a,g,e),j.outside;){if(0>c?0>=e:e>=f.height){j.hitSide=!0;break}e+=5*c}return j}function eg(a,b){var c=Ub(a,b.line);if(!c||c.hidden)return null;var d=B(a.doc,b.line),e=Rb(c,d,b.line),f=xa(d,a.doc.direction),g="left";if(f){var h=wa(f,b.ch);g=h%2?"right":"left"}var i=Xb(e.map,b.ch,g);return i.offset="right"==i.collapse?i.end:i.start,i}function fg(a){for(var b=a;b;b=b.parentNode)if(/CodeMirror-gutter-wrapper/.test(b.className))return!0;return!1}function gg(a,b){return b&&(a.bad=!0),a}function hg(a,b,c,d,e){function f(a){return function(b){return b.id==a}}function g(){k&&(j+=l,k=!1)}function h(a){a&&(g(),j+=a)}function i(b){if(1==b.nodeType){var c=b.getAttribute("cm-text");if(null!=c)return void h(c||b.textContent.replace(/\u200b/g,""));var j,m=b.getAttribute("cm-marker");if(m){var n=a.findMarks(J(d,0),J(e+1,0),f(+m));return void(n.length&&(j=n[0].find(0))&&h(C(a.doc,j.from,j.to).join(l)))}if("false"==b.getAttribute("contenteditable"))return;var o=/^(pre|div|p)$/i.test(b.nodeName);o&&g();for(var p=0;p<b.childNodes.length;p++)i(b.childNodes[p]);o&&(k=!0)}else 3==b.nodeType&&h(b.nodeValue)}for(var j="",k=!1,l=a.doc.lineSeparator();i(b),b!=c;)b=b.nextSibling;return j}function ig(a,b,c){var d;if(b==a.display.lineDiv){if(d=a.display.lineDiv.childNodes[c],!d)return gg(a.clipPos(J(a.display.viewTo-1)),!0);b=null,c=0}else for(d=b;;d=d.parentNode){if(!d||d==a.display.lineDiv)return null;if(d.parentNode&&d.parentNode==a.display.lineDiv)break}for(var e=0;e<a.display.view.length;e++){var f=a.display.view[e];if(f.node==d)return jg(f,b,c)}}function jg(a,b,c){function d(b,c,d){for(var e=-1;e<(l?l.length:0);e++)for(var f=0>e?k.map:l[e],g=0;g<f.length;g+=3){var h=f[g+2];if(h==b||h==c){var i=F(0>e?a.line:a.rest[e]),j=f[g]+d;return(0>d||h!=b)&&(j=f[g+(d?1:0)]),J(i,j)}}}var e=a.text.firstChild,g=!1;if(!b||!f(e,b))return gg(J(F(a.line),0),!0);if(b==e&&(g=!0,b=e.childNodes[c],c=0,!b)){var h=a.rest?p(a.rest):a.line;return gg(J(F(h),h.text.length),g)}var i=3==b.nodeType?b:null,j=b;for(i||1!=b.childNodes.length||3!=b.firstChild.nodeType||(i=b.firstChild,c&&(c=i.nodeValue.length));j.parentNode!=e;)j=j.parentNode;var k=a.measure,l=k.maps,m=d(i,j,c);if(m)return gg(m,g);for(var n=j.nextSibling,o=i?i.nodeValue.length-c:0;n;n=n.nextSibling){if(m=d(n,n.firstChild,0))return gg(J(m.line,m.ch-o),g);o+=n.textContent.length}for(var q=j.previousSibling,r=c;q;q=q.previousSibling){if(m=d(q,q.firstChild,-1))return gg(J(m.line,m.ch+r),g);r+=q.textContent.length}}function kg(a,b){function c(){a.value=j.getValue()}if(b=b?k(b):{},b.value=a.value,!b.tabindex&&a.tabIndex&&(b.tabindex=a.tabIndex),!b.placeholder&&a.placeholder&&(b.placeholder=a.placeholder),null==b.autofocus){var d=g();b.autofocus=d==a||null!=a.getAttribute("autofocus")&&d==document.body}var e;if(a.form&&(bh(a.form,"submit",c),!b.leaveSubmitMethodAlone)){var f=a.form;e=f.submit;try{var h=f.submit=function(){c(),f.submit=e,f.submit(),f.submit=h}}catch(i){}}b.finishInit=function(b){b.save=c,b.getTextArea=function(){return a},b.toTextArea=function(){b.toTextArea=isNaN,c(),a.parentNode.removeChild(b.getWrapperElement()),a.style.display="",a.form&&(za(a.form,"submit",c),"function"==typeof a.form.submit&&(a.form.submit=e))}},a.style.display="none";var j=Uf(function(b){return a.parentNode.insertBefore(b,a.nextSibling)},b);return j}function lg(a){a.off=za,a.on=bh,a.wheelEventPixels=Kd,a.Doc=Jh,a.splitLines=dh,a.countColumn=l,a.findColumn=n,a.isWordChar=u,a.Pass=Rg,a.signal=Aa,a.Line=oh,a.changeEnd=Od,a.scrollbarModel=xh,a.Pos=J,a.cmpPos=K,a.modes=hh,a.mimeModes=ih,a.resolveMode=Qa,a.getMode=Ra,a.modeExtensions=jh,a.extendMode=Sa,a.copyState=Ta,a.startState=Va,a.innerMode=Ua,a.commands=Rh,a.keyMap=Qh,a.keyName=jf,a.isModifierKey=gf,a.lookupKey=ff,a.normalizeKeyMap=ef,a.StringStream=kh,a.SharedTextMarker=Hh,a.TextMarker=Gh,a.LineWidget=Eh,a.e_preventDefault=Fa,a.e_stopPropagation=Ga,a.e_stop=Ia,a.addClass=h,a.contains=f,a.rmClass=Lg,a.keyNames=Mh}var mg=navigator.userAgent,ng=navigator.platform,og=/gecko\/\d/i.test(mg),pg=/MSIE \d/.test(mg),qg=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(mg),rg=/Edge\/(\d+)/.exec(mg),sg=pg||qg||rg,tg=sg&&(pg?document.documentMode||6:+(rg||qg)[1]),ug=!rg&&/WebKit\//.test(mg),vg=ug&&/Qt\/\d+\.\d+/.test(mg),wg=!rg&&/Chrome\//.test(mg),xg=/Opera\//.test(mg),yg=/Apple Computer/.test(navigator.vendor),zg=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(mg),Ag=/PhantomJS/.test(mg),Bg=!rg&&/AppleWebKit/.test(mg)&&/Mobile\/\w+/.test(mg),Cg=/Android/.test(mg),Dg=Bg||Cg||/webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(mg),Eg=Bg||/Mac/.test(ng),Fg=/\bCrOS\b/.test(mg),Gg=/win/i.test(ng),Hg=xg&&mg.match(/Version\/(\d*\.\d*)/);Hg&&(Hg=Number(Hg[1])),Hg&&Hg>=15&&(xg=!1,ug=!0);var Ig,Jg=Eg&&(vg||xg&&(null==Hg||12.11>Hg)),Kg=og||sg&&tg>=9,Lg=function(b,c){var d=b.className,e=a(c).exec(d);if(e){var f=d.slice(e.index+e[0].length);b.className=d.slice(0,e.index)+(f?e[1]+f:"")}};Ig=document.createRange?function(a,b,c,d){var e=document.createRange();return e.setEnd(d||a,c),e.setStart(a,b),e}:function(a,b,c){var d=document.body.createTextRange();try{d.moveToElementText(a.parentNode)}catch(e){return d}return d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",b),d};var Mg=function(a){a.select()};Bg?Mg=function(a){a.selectionStart=0,a.selectionEnd=a.value.length}:sg&&(Mg=function(a){try{a.select()}catch(b){}});var Ng=function(){this.id=null};Ng.prototype.set=function(a,b){clearTimeout(this.id),this.id=setTimeout(b,a)};var Og,Pg,Qg=30,Rg={toString:function(){return"CodeMirror.Pass"}},Sg={scroll:!1},Tg={origin:"*mouse"},Ug={origin:"+move"},Vg=[""],Wg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,Xg=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/,Yg=!1,Zg=!1,$g=null,_g=function(){function a(a){return 247>=a?c.charAt(a):a>=1424&&1524>=a?"R":a>=1536&&1785>=a?d.charAt(a-1536):a>=1774&&2220>=a?"r":a>=8192&&8203>=a?"w":8204==a?"b":"L";
}function b(a,b,c){this.level=a,this.from=b,this.to=c}var c="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",d="nnnnnnNNr%%r,rNNmmmmmmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmmmnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmnNmmmmmmrrmmNmmmmrr1111111111",e=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,f=/[stwN]/,g=/[LRr]/,h=/[Lb1n]/,i=/[1n]/;return function(c,d){var j="ltr"==d?"L":"R";if(0==c.length||"ltr"==d&&!e.test(c))return!1;for(var k=c.length,l=[],m=0;k>m;++m)l.push(a(c.charCodeAt(m)));for(var n=0,o=j;k>n;++n){var q=l[n];"m"==q?l[n]=o:o=q}for(var r=0,s=j;k>r;++r){var t=l[r];"1"==t&&"r"==s?l[r]="n":g.test(t)&&(s=t,"r"==t&&(l[r]="R"))}for(var u=1,v=l[0];k-1>u;++u){var w=l[u];"+"==w&&"1"==v&&"1"==l[u+1]?l[u]="1":","!=w||v!=l[u+1]||"1"!=v&&"n"!=v||(l[u]=v),v=w}for(var x=0;k>x;++x){var y=l[x];if(","==y)l[x]="N";else if("%"==y){var z=void 0;for(z=x+1;k>z&&"%"==l[z];++z);for(var A=x&&"!"==l[x-1]||k>z&&"1"==l[z]?"1":"N",B=x;z>B;++B)l[B]=A;x=z-1}}for(var C=0,D=j;k>C;++C){var E=l[C];"L"==D&&"1"==E?l[C]="L":g.test(E)&&(D=E)}for(var F=0;k>F;++F)if(f.test(l[F])){var G=void 0;for(G=F+1;k>G&&f.test(l[G]);++G);for(var H="L"==(F?l[F-1]:j),I="L"==(k>G?l[G]:j),J=H==I?H?"L":"R":j,K=F;G>K;++K)l[K]=J;F=G-1}for(var L,M=[],N=0;k>N;)if(h.test(l[N])){var O=N;for(++N;k>N&&h.test(l[N]);++N);M.push(new b(0,O,N))}else{var P=N,Q=M.length;for(++N;k>N&&"L"!=l[N];++N);for(var R=P;N>R;)if(i.test(l[R])){R>P&&M.splice(Q,0,new b(1,P,R));var S=R;for(++R;N>R&&i.test(l[R]);++R);M.splice(Q,0,new b(2,S,R)),P=R}else++R;N>P&&M.splice(Q,0,new b(1,P,N))}return 1==M[0].level&&(L=c.match(/^\s+/))&&(M[0].from=L[0].length,M.unshift(new b(0,0,L[0].length))),1==p(M).level&&(L=c.match(/\s+$/))&&(p(M).to-=L[0].length,M.push(new b(0,k-L[0].length,k))),"rtl"==d?M.reverse():M}}(),ah=[],bh=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent("on"+b,c);else{var d=a._handlers||(a._handlers={});d[b]=(d[b]||ah).concat(c)}},ch=function(){if(sg&&9>tg)return!1;var a=d("div");return"draggable"in a||"dragDrop"in a}(),dh=3!="\n\nb".split(/\n/).length?function(a){for(var b=0,c=[],d=a.length;d>=b;){var e=a.indexOf("\n",b);-1==e&&(e=a.length);var f=a.slice(b,"\r"==a.charAt(e-1)?e-1:e),g=f.indexOf("\r");-1!=g?(c.push(f.slice(0,g)),b+=g+1):(c.push(f),b=e+1)}return c}:function(a){return a.split(/\r\n?|\n/)},eh=window.getSelection?function(a){try{return a.selectionStart!=a.selectionEnd}catch(b){return!1}}:function(a){var b;try{b=a.ownerDocument.selection.createRange()}catch(c){}return b&&b.parentElement()==a?0!=b.compareEndPoints("StartToEnd",b):!1},fh=function(){var a=d("div");return"oncopy"in a?!0:(a.setAttribute("oncopy","return;"),"function"==typeof a.oncopy)}(),gh=null,hh={},ih={},jh={},kh=function(a,b,c){this.pos=this.start=0,this.string=a,this.tabSize=b||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0,this.lineOracle=c};kh.prototype.eol=function(){return this.pos>=this.string.length},kh.prototype.sol=function(){return this.pos==this.lineStart},kh.prototype.peek=function(){return this.string.charAt(this.pos)||void 0},kh.prototype.next=function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},kh.prototype.eat=function(a){var b,c=this.string.charAt(this.pos);return b="string"==typeof a?c==a:c&&(a.test?a.test(c):a(c)),b?(++this.pos,c):void 0},kh.prototype.eatWhile=function(a){for(var b=this.pos;this.eat(a););return this.pos>b},kh.prototype.eatSpace=function(){for(var a=this,b=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++a.pos;return this.pos>b},kh.prototype.skipToEnd=function(){this.pos=this.string.length},kh.prototype.skipTo=function(a){var b=this.string.indexOf(a,this.pos);return b>-1?(this.pos=b,!0):void 0},kh.prototype.backUp=function(a){this.pos-=a},kh.prototype.column=function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=l(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?l(this.string,this.lineStart,this.tabSize):0)},kh.prototype.indentation=function(){return l(this.string,null,this.tabSize)-(this.lineStart?l(this.string,this.lineStart,this.tabSize):0)},kh.prototype.match=function(a,b,c){if("string"!=typeof a){var d=this.string.slice(this.pos).match(a);return d&&d.index>0?null:(d&&b!==!1&&(this.pos+=d[0].length),d)}var e=function(a){return c?a.toLowerCase():a},f=this.string.substr(this.pos,a.length);return e(f)==e(a)?(b!==!1&&(this.pos+=a.length),!0):void 0},kh.prototype.current=function(){return this.string.slice(this.start,this.pos)},kh.prototype.hideFirstChars=function(a,b){this.lineStart+=a;try{return b()}finally{this.lineStart-=a}},kh.prototype.lookAhead=function(a){var b=this.lineOracle;return b&&b.lookAhead(a)};var lh=function(a,b){this.state=a,this.lookAhead=b},mh=function(a,b,c,d){this.state=b,this.doc=a,this.line=c,this.maxLookAhead=d||0};mh.prototype.lookAhead=function(a){var b=this.doc.getLine(this.line+a);return null!=b&&a>this.maxLookAhead&&(this.maxLookAhead=a),b},mh.prototype.nextLine=function(){this.line++,this.maxLookAhead>0&&this.maxLookAhead--},mh.fromSaved=function(a,b,c){return b instanceof lh?new mh(a,Ta(a.mode,b.state),c,b.lookAhead):new mh(a,Ta(a.mode,b),c)},mh.prototype.save=function(a){var b=a!==!1?Ta(this.doc.mode,this.state):this.state;return this.maxLookAhead>0?new lh(b,this.maxLookAhead):b};var nh=function(a,b,c){this.start=a.start,this.end=a.pos,this.string=a.current(),this.type=b||null,this.state=c},oh=function(a,b,c){this.text=a,da(this,b),this.height=c?c(this):1};oh.prototype.lineNo=function(){return F(this)},Ea(oh);var ph,qh={},rh={},sh=null,th=null,uh={left:0,right:0,top:0,bottom:0},vh=function(a,b,c){this.cm=c;var e=this.vert=d("div",[d("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),f=this.horiz=d("div",[d("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");a(e),a(f),bh(e,"scroll",function(){e.clientHeight&&b(e.scrollTop,"vertical")}),bh(f,"scroll",function(){f.clientWidth&&b(f.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,sg&&8>tg&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")};vh.prototype.update=function(a){var b=a.scrollWidth>a.clientWidth+1,c=a.scrollHeight>a.clientHeight+1,d=a.nativeBarWidth;if(c){this.vert.style.display="block",this.vert.style.bottom=b?d+"px":"0";var e=a.viewHeight-(b?d:0);this.vert.firstChild.style.height=Math.max(0,a.scrollHeight-a.clientHeight+e)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(b){this.horiz.style.display="block",this.horiz.style.right=c?d+"px":"0",this.horiz.style.left=a.barLeft+"px";var f=a.viewWidth-a.barLeft-(c?d:0);this.horiz.firstChild.style.width=Math.max(0,a.scrollWidth-a.clientWidth+f)+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&a.clientHeight>0&&(0==d&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:c?d:0,bottom:b?d:0}},vh.prototype.setScrollLeft=function(a){this.horiz.scrollLeft!=a&&(this.horiz.scrollLeft=a),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz,"horiz")},vh.prototype.setScrollTop=function(a){this.vert.scrollTop!=a&&(this.vert.scrollTop=a),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert,"vert")},vh.prototype.zeroWidthHack=function(){var a=Eg&&!zg?"12px":"18px";this.horiz.style.height=this.vert.style.width=a,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Ng,this.disableVert=new Ng},vh.prototype.enableZeroWidthBar=function(a,b,c){function d(){var e=a.getBoundingClientRect(),f="vert"==c?document.elementFromPoint(e.right-1,(e.top+e.bottom)/2):document.elementFromPoint((e.right+e.left)/2,e.bottom-1);f!=a?a.style.pointerEvents="none":b.set(1e3,d)}a.style.pointerEvents="auto",b.set(1e3,d)},vh.prototype.clear=function(){var a=this.horiz.parentNode;a.removeChild(this.horiz),a.removeChild(this.vert)};var wh=function(){};wh.prototype.update=function(){return{bottom:0,right:0}},wh.prototype.setScrollLeft=function(){},wh.prototype.setScrollTop=function(){},wh.prototype.clear=function(){};var xh={"native":vh,"null":wh},yh=0,zh=function(a,b,c){var d=a.display;this.viewport=b,this.visible=Mc(d,a.doc,b),this.editorIsHidden=!d.wrapper.offsetWidth,this.wrapperHeight=d.wrapper.clientHeight,this.wrapperWidth=d.wrapper.clientWidth,this.oldDisplayWidth=Ob(a),this.force=c,this.dims=uc(a),this.events=[]};zh.prototype.signal=function(a,b){Da(a,b)&&this.events.push(arguments)},zh.prototype.finish=function(){for(var a=this,b=0;b<this.events.length;b++)Aa.apply(null,a.events[b])};var Ah=0,Bh=null;sg?Bh=-.53:og?Bh=15:wg?Bh=-.7:yg&&(Bh=-1/3);var Ch=function(a,b){this.ranges=a,this.primIndex=b};Ch.prototype.primary=function(){return this.ranges[this.primIndex]},Ch.prototype.equals=function(a){var b=this;if(a==this)return!0;if(a.primIndex!=this.primIndex||a.ranges.length!=this.ranges.length)return!1;for(var c=0;c<this.ranges.length;c++){var d=b.ranges[c],e=a.ranges[c];if(!L(d.anchor,e.anchor)||!L(d.head,e.head))return!1}return!0},Ch.prototype.deepCopy=function(){for(var a=this,b=[],c=0;c<this.ranges.length;c++)b[c]=new Dh(M(a.ranges[c].anchor),M(a.ranges[c].head));return new Ch(b,this.primIndex)},Ch.prototype.somethingSelected=function(){for(var a=this,b=0;b<this.ranges.length;b++)if(!a.ranges[b].empty())return!0;return!1},Ch.prototype.contains=function(a,b){var c=this;b||(b=a);for(var d=0;d<this.ranges.length;d++){var e=c.ranges[d];if(K(b,e.from())>=0&&K(a,e.to())<=0)return d}return-1};var Dh=function(a,b){this.anchor=a,this.head=b};Dh.prototype.from=function(){return O(this.anchor,this.head)},Dh.prototype.to=function(){return N(this.anchor,this.head)},Dh.prototype.empty=function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch},Oe.prototype={chunkSize:function(){return this.lines.length},removeInner:function(a,b){for(var c=this,d=a,e=a+b;e>d;++d){var f=c.lines[d];c.height-=f.height,gb(f),ub(f,"delete")}this.lines.splice(a,b)},collapse:function(a){a.push.apply(a,this.lines)},insertInner:function(a,b,c){var d=this;this.height+=c,this.lines=this.lines.slice(0,a).concat(b).concat(this.lines.slice(a));for(var e=0;e<b.length;++e)b[e].parent=d},iterN:function(a,b,c){for(var d=this,e=a+b;e>a;++a)if(c(d.lines[a]))return!0}},Pe.prototype={chunkSize:function(){return this.size},removeInner:function(a,b){var c=this;this.size-=b;for(var d=0;d<this.children.length;++d){var e=c.children[d],f=e.chunkSize();if(f>a){var g=Math.min(b,f-a),h=e.height;if(e.removeInner(a,g),c.height-=h-e.height,f==g&&(c.children.splice(d--,1),e.parent=null),0==(b-=g))break;a=0}else a-=f}if(this.size-b<25&&(this.children.length>1||!(this.children[0]instanceof Oe))){var i=[];this.collapse(i),this.children=[new Oe(i)],this.children[0].parent=this}},collapse:function(a){for(var b=this,c=0;c<this.children.length;++c)b.children[c].collapse(a)},insertInner:function(a,b,c){var d=this;this.size+=b.length,this.height+=c;for(var e=0;e<this.children.length;++e){var f=d.children[e],g=f.chunkSize();if(g>=a){if(f.insertInner(a,b,c),f.lines&&f.lines.length>50){for(var h=f.lines.length%25+25,i=h;i<f.lines.length;){var j=new Oe(f.lines.slice(i,i+=25));f.height-=j.height,d.children.splice(++e,0,j),j.parent=d}f.lines=f.lines.slice(0,h),d.maybeSpill()}break}a-=g}},maybeSpill:function(){if(!(this.children.length<=10)){var a=this;do{var b=a.children.splice(a.children.length-5,5),c=new Pe(b);if(a.parent){a.size-=c.size,a.height-=c.height;var d=m(a.parent.children,a);a.parent.children.splice(d+1,0,c)}else{var e=new Pe(a.children);e.parent=a,a.children=[e,c],a=e}c.parent=a.parent}while(a.children.length>10);a.parent.maybeSpill()}},iterN:function(a,b,c){for(var d=this,e=0;e<this.children.length;++e){var f=d.children[e],g=f.chunkSize();if(g>a){var h=Math.min(b,g-a);if(f.iterN(a,h,c))return!0;if(0==(b-=h))break;a=0}else a-=g}}};var Eh=function(a,b,c){var d=this;if(c)for(var e in c)c.hasOwnProperty(e)&&(d[e]=c[e]);this.doc=a,this.node=b};Eh.prototype.clear=function(){var a=this,b=this.doc.cm,c=this.line.widgets,d=this.line,e=F(d);if(null!=e&&c){for(var f=0;f<c.length;++f)c[f]==a&&c.splice(f--,1);c.length||(d.widgets=null);var g=Ib(this);E(d,Math.max(0,d.height-g)),b&&(md(b,function(){Qe(b,d,-g),rd(b,e,"widget")}),ub(b,"lineWidgetCleared",b,this,e))}},Eh.prototype.changed=function(){var a=this,b=this.height,c=this.doc.cm,d=this.line;this.height=null;var e=Ib(this)-b;e&&(E(d,d.height+e),c&&md(c,function(){c.curOp.forceUpdate=!0,Qe(c,d,e),ub(c,"lineWidgetChanged",c,a,F(d))}))},Ea(Eh);var Fh=0,Gh=function(a,b){this.lines=[],this.type=b,this.doc=a,this.id=++Fh};Gh.prototype.clear=function(){var a=this;if(!this.explicitlyCleared){var b=this.doc.cm,c=b&&!b.curOp;if(c&&ed(b),Da(this,"clear")){var d=this.find();d&&ub(this,"clear",d.from,d.to)}for(var e=null,f=null,g=0;g<this.lines.length;++g){var h=a.lines[g],i=W(h.markedSpans,a);b&&!a.collapsed?rd(b,F(h),"text"):b&&(null!=i.to&&(f=F(h)),null!=i.from&&(e=F(h))),h.markedSpans=X(h.markedSpans,i),null==i.from&&a.collapsed&&!qa(a.doc,h)&&b&&E(h,sc(b.display))}if(b&&this.collapsed&&!b.options.lineWrapping)for(var j=0;j<this.lines.length;++j){var k=la(a.lines[j]),l=ta(k);l>b.display.maxLineLength&&(b.display.maxLine=k,b.display.maxLineLength=l,b.display.maxLineChanged=!0)}null!=e&&b&&this.collapsed&&qd(b,e,f+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,b&&we(b.doc)),b&&ub(b,"markerCleared",b,this,e,f),c&&fd(b),this.parent&&this.parent.clear()}},Gh.prototype.find=function(a,b){var c=this;null==a&&"bookmark"==this.type&&(a=1);for(var d,e,f=0;f<this.lines.length;++f){var g=c.lines[f],h=W(g.markedSpans,c);if(null!=h.from&&(d=J(b?g:F(g),h.from),-1==a))return d;if(null!=h.to&&(e=J(b?g:F(g),h.to),1==a))return e}return d&&{from:d,to:e}},Gh.prototype.changed=function(){var a=this,b=this.find(-1,!0),c=this,d=this.doc.cm;b&&d&&md(d,function(){var e=b.line,f=F(b.line),g=Ub(d,f);if(g&&(_b(g),d.curOp.selectionChanged=d.curOp.forceUpdate=!0),d.curOp.updateMaxLine=!0,!qa(c.doc,e)&&null!=c.height){var h=c.height;c.height=null;var i=Ib(c)-h;i&&E(e,e.height+i)}ub(d,"markerChanged",d,a)})},Gh.prototype.attachLine=function(a){if(!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;b.maybeHiddenMarkers&&-1!=m(b.maybeHiddenMarkers,this)||(b.maybeUnhiddenMarkers||(b.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(a)},Gh.prototype.detachLine=function(a){if(this.lines.splice(m(this.lines,a),1),!this.lines.length&&this.doc.cm){var b=this.doc.cm.curOp;(b.maybeHiddenMarkers||(b.maybeHiddenMarkers=[])).push(this)}},Ea(Gh);var Hh=function(a,b){var c=this;this.markers=a,this.primary=b;for(var d=0;d<a.length;++d)a[d].parent=c};Hh.prototype.clear=function(){var a=this;if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var b=0;b<this.markers.length;++b)a.markers[b].clear();ub(this,"clear")}},Hh.prototype.find=function(a,b){return this.primary.find(a,b)},Ea(Hh);var Ih=0,Jh=function(a,b,c,d,e){if(!(this instanceof Jh))return new Jh(a,b,c,d,e);null==c&&(c=0),Pe.call(this,[new Oe([new oh("",null)])]),this.first=c,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.modeFrontier=this.highlightFrontier=c;var f=J(c,0);this.sel=Nd(f),this.history=new _d(null),this.id=++Ih,this.modeOption=b,this.lineSep=d,this.direction="rtl"==e?"rtl":"ltr",this.extend=!1,"string"==typeof a&&(a=this.splitLines(a)),Wd(this,{from:f,to:f,text:a}),te(this,Nd(f),Sg)};Jh.prototype=t(Pe.prototype,{constructor:Jh,iter:function(a,b,c){c?this.iterN(a-this.first,b-a,c):this.iterN(this.first,this.first+this.size,a)},insert:function(a,b){for(var c=0,d=0;d<b.length;++d)c+=b[d].height;this.insertInner(a-this.first,b,c)},remove:function(a,b){this.removeInner(a-this.first,b)},getValue:function(a){var b=D(this,this.first,this.first+this.size);return a===!1?b:b.join(a||this.lineSeparator())},setValue:pd(function(a){var b=J(this.first,0),c=this.first+this.size-1;De(this,{from:b,to:J(c,B(this,c).text.length),text:this.splitLines(a),origin:"setValue",full:!0},!0),this.cm&&Vc(this.cm,0,0),te(this,Nd(b),Sg)}),replaceRange:function(a,b,c,d){b=Q(this,b),c=c?Q(this,c):b,Je(this,a,b,c,d)},getRange:function(a,b,c){var d=C(this,Q(this,a),Q(this,b));return c===!1?d:d.join(c||this.lineSeparator())},getLine:function(a){var b=this.getLineHandle(a);return b&&b.text},getLineHandle:function(a){return H(this,a)?B(this,a):void 0},getLineNumber:function(a){return F(a)},getLineHandleVisualStart:function(a){return"number"==typeof a&&(a=B(this,a)),la(a)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(a){return Q(this,a)},getCursor:function(a){var b,c=this.sel.primary();return b=null==a||"head"==a?c.head:"anchor"==a?c.anchor:"end"==a||"to"==a||a===!1?c.to():c.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:pd(function(a,b,c){qe(this,Q(this,"number"==typeof a?J(a,b||0):a),null,c)}),setSelection:pd(function(a,b,c){qe(this,Q(this,a),Q(this,b||a),c)}),extendSelection:pd(function(a,b,c){ne(this,Q(this,a),b&&Q(this,b),c)}),extendSelections:pd(function(a,b){oe(this,S(this,a),b)}),extendSelectionsBy:pd(function(a,b){var c=q(this.sel.ranges,a);oe(this,S(this,c),b)}),setSelections:pd(function(a,b,c){var d=this;if(a.length){for(var e=[],f=0;f<a.length;f++)e[f]=new Dh(Q(d,a[f].anchor),Q(d,a[f].head));null==b&&(b=Math.min(a.length-1,this.sel.primIndex)),te(this,Md(e,b),c)}}),addSelection:pd(function(a,b,c){var d=this.sel.ranges.slice(0);d.push(new Dh(Q(this,a),Q(this,b||a))),te(this,Md(d,d.length-1),c)}),getSelection:function(a){for(var b,c=this,d=this.sel.ranges,e=0;e<d.length;e++){var f=C(c,d[e].from(),d[e].to());b=b?b.concat(f):f}return a===!1?b:b.join(a||this.lineSeparator())},getSelections:function(a){for(var b=this,c=[],d=this.sel.ranges,e=0;e<d.length;e++){var f=C(b,d[e].from(),d[e].to());a!==!1&&(f=f.join(a||b.lineSeparator())),c[e]=f}return c},replaceSelection:function(a,b,c){for(var d=[],e=0;e<this.sel.ranges.length;e++)d[e]=a;this.replaceSelections(d,b,c||"+input")},replaceSelections:pd(function(a,b,c){for(var d=this,e=[],f=this.sel,g=0;g<f.ranges.length;g++){var h=f.ranges[g];e[g]={from:h.from(),to:h.to(),text:d.splitLines(a[g]),origin:c}}for(var i=b&&"end"!=b&&Sd(this,e,b),j=e.length-1;j>=0;j--)De(d,e[j]);i?se(this,i):this.cm&&Uc(this.cm)}),undo:pd(function(){Fe(this,"undo")}),redo:pd(function(){Fe(this,"redo")}),undoSelection:pd(function(){Fe(this,"undo",!0)}),redoSelection:pd(function(){Fe(this,"redo",!0)}),setExtending:function(a){this.extend=a},getExtending:function(){return this.extend},historySize:function(){for(var a=this.history,b=0,c=0,d=0;d<a.done.length;d++)a.done[d].ranges||++b;for(var e=0;e<a.undone.length;e++)a.undone[e].ranges||++c;return{undo:b,redo:c}},clearHistory:function(){this.history=new _d(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(a){return a&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(a){return this.history.generation==(a||this.cleanGeneration)},getHistory:function(){return{done:le(this.history.done),undone:le(this.history.undone)}},setHistory:function(a){var b=this.history=new _d(this.history.maxGeneration);b.done=le(a.done.slice(0),null,!0),b.undone=le(a.undone.slice(0),null,!0)},setGutterMarker:pd(function(a,b,c){return Ne(this,a,"gutter",function(a){var d=a.gutterMarkers||(a.gutterMarkers={});return d[b]=c,!c&&w(d)&&(a.gutterMarkers=null),!0})}),clearGutter:pd(function(a){var b=this;this.iter(function(c){c.gutterMarkers&&c.gutterMarkers[a]&&Ne(b,c,"gutter",function(){return c.gutterMarkers[a]=null,w(c.gutterMarkers)&&(c.gutterMarkers=null),!0})})}),lineInfo:function(a){var b;if("number"==typeof a){if(!H(this,a))return null;if(b=a,a=B(this,a),!a)return null}else if(b=F(a),null==b)return null;return{line:b,handle:a,text:a.text,gutterMarkers:a.gutterMarkers,textClass:a.textClass,bgClass:a.bgClass,wrapClass:a.wrapClass,widgets:a.widgets}},addLineClass:pd(function(b,c,d){return Ne(this,b,"gutter"==c?"gutter":"class",function(b){var e="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass";if(b[e]){if(a(d).test(b[e]))return!1;b[e]+=" "+d}else b[e]=d;return!0})}),removeLineClass:pd(function(b,c,d){return Ne(this,b,"gutter"==c?"gutter":"class",function(b){var e="text"==c?"textClass":"background"==c?"bgClass":"gutter"==c?"gutterClass":"wrapClass",f=b[e];if(!f)return!1;if(null==d)b[e]=null;else{var g=f.match(a(d));if(!g)return!1;var h=g.index+g[0].length;b[e]=f.slice(0,g.index)+(g.index&&h!=f.length?" ":"")+f.slice(h)||null}return!0})}),addLineWidget:pd(function(a,b,c){return Re(this,a,b,c)}),removeLineWidget:function(a){a.clear()},markText:function(a,b,c){return Se(this,Q(this,a),Q(this,b),c,c&&c.type||"range")},setBookmark:function(a,b){var c={replacedWith:b&&(null==b.nodeType?b.widget:b),insertLeft:b&&b.insertLeft,clearWhenEmpty:!1,shared:b&&b.shared,handleMouseEvents:b&&b.handleMouseEvents};return a=Q(this,a),Se(this,a,a,c,"bookmark")},findMarksAt:function(a){a=Q(this,a);var b=[],c=B(this,a.line).markedSpans;if(c)for(var d=0;d<c.length;++d){var e=c[d];(null==e.from||e.from<=a.ch)&&(null==e.to||e.to>=a.ch)&&b.push(e.marker.parent||e.marker)}return b},findMarks:function(a,b,c){a=Q(this,a),b=Q(this,b);var d=[],e=a.line;return this.iter(a.line,b.line+1,function(f){var g=f.markedSpans;if(g)for(var h=0;h<g.length;h++){var i=g[h];null!=i.to&&e==a.line&&a.ch>=i.to||null==i.from&&e!=a.line||null!=i.from&&e==b.line&&i.from>=b.ch||c&&!c(i.marker)||d.push(i.marker.parent||i.marker)}++e}),d},getAllMarks:function(){var a=[];return this.iter(function(b){var c=b.markedSpans;if(c)for(var d=0;d<c.length;++d)null!=c[d].from&&a.push(c[d].marker)}),a},posFromIndex:function(a){var b,c=this.first,d=this.lineSeparator().length;return this.iter(function(e){var f=e.text.length+d;return f>a?(b=a,!0):(a-=f,void++c)}),Q(this,J(c,b))},indexFromPos:function(a){a=Q(this,a);var b=a.ch;if(a.line<this.first||a.ch<0)return 0;var c=this.lineSeparator().length;return this.iter(this.first,a.line,function(a){b+=a.text.length+c}),b},copy:function(a){var b=new Jh(D(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep,this.direction);return b.scrollTop=this.scrollTop,b.scrollLeft=this.scrollLeft,b.sel=this.sel,b.extend=!1,a&&(b.history.undoDepth=this.history.undoDepth,b.setHistory(this.getHistory())),b},linkedDoc:function(a){a||(a={});var b=this.first,c=this.first+this.size;null!=a.from&&a.from>b&&(b=a.from),null!=a.to&&a.to<c&&(c=a.to);var d=new Jh(D(this,b,c),a.mode||this.modeOption,b,this.lineSep,this.direction);return a.sharedHist&&(d.history=this.history),(this.linked||(this.linked=[])).push({doc:d,sharedHist:a.sharedHist}),d.linked=[{doc:this,isParent:!0,sharedHist:a.sharedHist}],Ve(d,Ue(this)),d},unlinkDoc:function(a){var b=this;if(a instanceof Uf&&(a=a.doc),this.linked)for(var c=0;c<this.linked.length;++c){var d=b.linked[c];if(d.doc==a){b.linked.splice(c,1),a.unlinkDoc(b),We(Ue(b));break}}if(a.history==this.history){var e=[a.id];Xd(a,function(a){return e.push(a.id)},!0),a.history=new _d(null),a.history.done=le(this.history.done,e),a.history.undone=le(this.history.undone,e)}},iterLinkedDocs:function(a){Xd(this,a)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(a){return this.lineSep?a.split(this.lineSep):dh(a)},lineSeparator:function(){return this.lineSep||"\n"},setDirection:pd(function(a){"rtl"!=a&&(a="ltr"),a!=this.direction&&(this.direction=a,this.iter(function(a){return a.order=null}),this.cm&&$d(this.cm))})}),Jh.prototype.eachLine=Jh.prototype.iter;for(var Kh=0,Lh=!1,Mh={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"},Nh=0;10>Nh;Nh++)Mh[Nh+48]=Mh[Nh+96]=String(Nh);for(var Oh=65;90>=Oh;Oh++)Mh[Oh]=String.fromCharCode(Oh);for(var Ph=1;12>=Ph;Ph++)Mh[Ph+111]=Mh[Ph+63235]="F"+Ph;var Qh={};Qh.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},Qh.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},Qh.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars","Ctrl-O":"openLine"},Qh.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},Qh["default"]=Eg?Qh.macDefault:Qh.pcDefault;var Rh={selectAll:Be,singleSelection:function(a){return a.setSelection(a.getCursor("anchor"),a.getCursor("head"),Sg)},killLine:function(a){return lf(a,function(b){if(b.empty()){var c=B(a.doc,b.head.line).text.length;return b.head.ch==c&&b.head.line<a.lastLine()?{from:b.head,to:J(b.head.line+1,0)}:{from:b.head,to:J(b.head.line,c)}}return{from:b.from(),to:b.to()}})},deleteLine:function(a){return lf(a,function(b){return{from:J(b.from().line,0),to:Q(a.doc,J(b.to().line+1,0))}})},delLineLeft:function(a){return lf(a,function(a){return{from:J(a.from().line,0),to:a.from()}})},delWrappedLineLeft:function(a){return lf(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return{from:d,to:b.from()}})},delWrappedLineRight:function(a){return lf(a,function(b){var c=a.charCoords(b.head,"div").top+5,d=a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div");return{from:b.from(),to:d}})},undo:function(a){return a.undo()},redo:function(a){return a.redo()},undoSelection:function(a){return a.undoSelection()},redoSelection:function(a){return a.redoSelection()},goDocStart:function(a){return a.extendSelection(J(a.firstLine(),0))},goDocEnd:function(a){return a.extendSelection(J(a.lastLine()))},goLineStart:function(a){return a.extendSelectionsBy(function(b){return qf(a,b.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(a){return a.extendSelectionsBy(function(b){return sf(a,b.head)},{origin:"+move",bias:1})},goLineEnd:function(a){return a.extendSelectionsBy(function(b){return rf(a,b.head.line)},{origin:"+move",bias:-1})},goLineRight:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:a.display.lineDiv.offsetWidth+100,top:c},"div")},Ug)},goLineLeft:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5;return a.coordsChar({left:0,top:c},"div")},Ug)},goLineLeftSmart:function(a){return a.extendSelectionsBy(function(b){var c=a.cursorCoords(b.head,"div").top+5,d=a.coordsChar({left:0,top:c},"div");return d.ch<a.getLine(d.line).search(/\S/)?sf(a,b.head):d},Ug)},goLineUp:function(a){return a.moveV(-1,"line")},goLineDown:function(a){return a.moveV(1,"line")},goPageUp:function(a){return a.moveV(-1,"page")},goPageDown:function(a){return a.moveV(1,"page")},goCharLeft:function(a){return a.moveH(-1,"char")},goCharRight:function(a){return a.moveH(1,"char")},goColumnLeft:function(a){return a.moveH(-1,"column")},goColumnRight:function(a){return a.moveH(1,"column")},goWordLeft:function(a){return a.moveH(-1,"word")},goGroupRight:function(a){return a.moveH(1,"group")},goGroupLeft:function(a){return a.moveH(-1,"group")},goWordRight:function(a){return a.moveH(1,"word")},delCharBefore:function(a){return a.deleteH(-1,"char")},delCharAfter:function(a){return a.deleteH(1,"char")},delWordBefore:function(a){return a.deleteH(-1,"word")},delWordAfter:function(a){return a.deleteH(1,"word")},delGroupBefore:function(a){return a.deleteH(-1,"group")},delGroupAfter:function(a){return a.deleteH(1,"group")},indentAuto:function(a){return a.indentSelection("smart")},indentMore:function(a){return a.indentSelection("add")},indentLess:function(a){return a.indentSelection("subtract")},insertTab:function(a){return a.replaceSelection("	")},insertSoftTab:function(a){for(var b=[],c=a.listSelections(),d=a.options.tabSize,e=0;e<c.length;e++){var f=c[e].from(),g=l(a.getLine(f.line),f.ch,d);b.push(o(d-g%d))}a.replaceSelections(b)},defaultTab:function(a){a.somethingSelected()?a.indentSelection("add"):a.execCommand("insertTab")},transposeChars:function(a){return md(a,function(){for(var b=a.listSelections(),c=[],d=0;d<b.length;d++)if(b[d].empty()){var e=b[d].head,f=B(a.doc,e.line).text;if(f)if(e.ch==f.length&&(e=new J(e.line,e.ch-1)),e.ch>0)e=new J(e.line,e.ch+1),a.replaceRange(f.charAt(e.ch-1)+f.charAt(e.ch-2),J(e.line,e.ch-2),e,"+transpose");else if(e.line>a.doc.first){var g=B(a.doc,e.line-1).text;g&&(e=new J(e.line,1),a.replaceRange(f.charAt(0)+a.doc.lineSeparator()+g.charAt(g.length-1),J(e.line-1,g.length-1),e,"+transpose"))}c.push(new Dh(e,e))}a.setSelections(c)})},newlineAndIndent:function(a){return md(a,function(){for(var b=a.listSelections(),c=b.length-1;c>=0;c--)a.replaceRange(a.doc.lineSeparator(),b[c].anchor,b[c].head,"+input");b=a.listSelections();for(var d=0;d<b.length;d++)a.indentLine(b[d].from().line,null,!0);Uc(a)})},openLine:function(a){return a.replaceSelection("\n","start")},toggleOverwrite:function(a){return a.toggleOverwrite()}},Sh=new Ng,Th=null,Uh=400,Vh=function(a,b,c){this.time=a,this.pos=b,this.button=c};Vh.prototype.compare=function(a,b,c){return this.time+Uh>a&&0==K(b,this.pos)&&c==this.button};var Wh,Xh,Yh={toString:function(){return"CodeMirror.Init"}},Zh={},$h={};Uf.defaults=Zh,Uf.optionHandlers=$h;var _h=[];Uf.defineInitHook=function(a){return _h.push(a)};var ai=null,bi=function(a){var b=a.optionHandlers,c=a.helpers={};a.prototype={
constructor:a,focus:function(){window.focus(),this.display.input.focus()},setOption:function(a,c){var d=this.options,e=d[a];(d[a]!=c||"mode"==a)&&(d[a]=c,b.hasOwnProperty(a)&&nd(this,b[a])(this,c,e),Aa(this,"optionChange",this,a))},getOption:function(a){return this.options[a]},getDoc:function(){return this.doc},addKeyMap:function(a,b){this.state.keyMaps[b?"push":"unshift"](kf(a))},removeKeyMap:function(a){for(var b=this.state.keyMaps,c=0;c<b.length;++c)if(b[c]==a||b[c].name==a)return b.splice(c,1),!0},addOverlay:od(function(b,c){var d=b.token?b:a.getMode(this.options,b);if(d.startState)throw new Error("Overlays may not be stateful.");r(this.state.overlays,{mode:d,modeSpec:b,opaque:c&&c.opaque,priority:c&&c.priority||0},function(a){return a.priority}),this.state.modeGen++,qd(this)}),removeOverlay:od(function(a){for(var b=this,c=this.state.overlays,d=0;d<c.length;++d){var e=c[d].modeSpec;if(e==a||"string"==typeof a&&e.name==a)return c.splice(d,1),b.state.modeGen++,void qd(b)}}),indentLine:od(function(a,b,c){"string"!=typeof b&&"number"!=typeof b&&(b=null==b?this.options.smartIndent?"smart":"prev":b?"add":"subtract"),H(this.doc,a)&&Wf(this,a,b,c)}),indentSelection:od(function(a){for(var b=this,c=this.doc.sel.ranges,d=-1,e=0;e<c.length;e++){var f=c[e];if(f.empty())f.head.line>d&&(Wf(b,f.head.line,a,!0),d=f.head.line,e==b.doc.sel.primIndex&&Uc(b));else{var g=f.from(),h=f.to(),i=Math.max(d,g.line);d=Math.min(b.lastLine(),h.line-(h.ch?0:1))+1;for(var j=i;d>j;++j)Wf(b,j,a);var k=b.doc.sel.ranges;0==g.ch&&c.length==k.length&&k[e].from().ch>0&&pe(b.doc,e,new Dh(g,k[e].to()),Sg)}}}),getTokenAt:function(a,b){return ab(this,a,b)},getLineTokens:function(a,b){return ab(this,J(a),b,!0)},getTokenTypeAt:function(a){a=Q(this.doc,a);var b,c=Xa(this,B(this.doc,a.line)),d=0,e=(c.length-1)/2,f=a.ch;if(0==f)b=c[2];else for(;;){var g=d+e>>1;if((g?c[2*g-1]:0)>=f)e=g;else{if(!(c[2*g+1]<f)){b=c[2*g+2];break}d=g+1}}var h=b?b.indexOf("overlay "):-1;return 0>h?b:0==h?null:b.slice(0,h-1)},getModeAt:function(b){var c=this.doc.mode;return c.innerMode?a.innerMode(c,this.getTokenAt(b).state).mode:c},getHelper:function(a,b){return this.getHelpers(a,b)[0]},getHelpers:function(a,b){var d=this,e=[];if(!c.hasOwnProperty(b))return e;var f=c[b],g=this.getModeAt(a);if("string"==typeof g[b])f[g[b]]&&e.push(f[g[b]]);else if(g[b])for(var h=0;h<g[b].length;h++){var i=f[g[b][h]];i&&e.push(i)}else g.helperType&&f[g.helperType]?e.push(f[g.helperType]):f[g.name]&&e.push(f[g.name]);for(var j=0;j<f._global.length;j++){var k=f._global[j];k.pred(g,d)&&-1==m(e,k.val)&&e.push(k.val)}return e},getStateAfter:function(a,b){var c=this.doc;return a=P(c,null==a?c.first+c.size-1:a),Ya(this,a+1,b).state},cursorCoords:function(a,b){var c,d=this.doc.sel.primary();return c=null==a?d.head:"object"==typeof a?Q(this.doc,a):a?d.from():d.to(),ic(this,c,b||"page")},charCoords:function(a,b){return hc(this,Q(this.doc,a),b||"page")},coordsChar:function(a,b){return a=gc(this,a,b||"page"),lc(this,a.left,a.top)},lineAtHeight:function(a,b){return a=gc(this,{top:a,left:0},b||"page").top,G(this.doc,a+this.display.viewOffset)},heightAtLine:function(a,b,c){var d,e=!1;if("number"==typeof a){var f=this.doc.first+this.doc.size-1;a<this.doc.first?a=this.doc.first:a>f&&(a=f,e=!0),d=B(this.doc,a)}else d=a;return fc(this,d,{top:0,left:0},b||"page",c||e).top+(e?this.doc.height-sa(d):0)},defaultTextHeight:function(){return sc(this.display)},defaultCharWidth:function(){return tc(this.display)},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(a,b,c,d,e){var f=this.display;a=ic(this,Q(this.doc,a));var g=a.bottom,h=a.left;if(b.style.position="absolute",b.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(b),f.sizer.appendChild(b),"over"==d)g=a.top;else if("above"==d||"near"==d){var i=Math.max(f.wrapper.clientHeight,this.doc.height),j=Math.max(f.sizer.clientWidth,f.lineSpace.clientWidth);("above"==d||a.bottom+b.offsetHeight>i)&&a.top>b.offsetHeight?g=a.top-b.offsetHeight:a.bottom+b.offsetHeight<=i&&(g=a.bottom),h+b.offsetWidth>j&&(h=j-b.offsetWidth)}b.style.top=g+"px",b.style.left=b.style.right="","right"==e?(h=f.sizer.clientWidth-b.offsetWidth,b.style.right="0px"):("left"==e?h=0:"middle"==e&&(h=(f.sizer.clientWidth-b.offsetWidth)/2),b.style.left=h+"px"),c&&Rc(this,{left:h,top:g,right:h+b.offsetWidth,bottom:g+b.offsetHeight})},triggerOnKeyDown:od(yf),triggerOnKeyPress:od(Bf),triggerOnKeyUp:Af,triggerOnMouseDown:od(Df),execCommand:function(a){return Rh.hasOwnProperty(a)?Rh[a].call(null,this):void 0},triggerElectric:od(function(a){$f(this,a)}),findPosH:function(a,b,c,d){var e=this,f=1;0>b&&(f=-1,b=-b);for(var g=Q(this.doc,a),h=0;b>h&&(g=cg(e.doc,g,f,c,d),!g.hitSide);++h);return g},moveH:od(function(a,b){var c=this;this.extendSelectionsBy(function(d){return c.display.shift||c.doc.extend||d.empty()?cg(c.doc,d.head,a,b,c.options.rtlMoveVisually):0>a?d.from():d.to()},Ug)}),deleteH:od(function(a,b){var c=this.doc.sel,d=this.doc;c.somethingSelected()?d.replaceSelection("",null,"+delete"):lf(this,function(c){var e=cg(d,c.head,a,b,!1);return 0>a?{from:e,to:c.head}:{from:c.head,to:e}})}),findPosV:function(a,b,c,d){var e=this,f=1,g=d;0>b&&(f=-1,b=-b);for(var h=Q(this.doc,a),i=0;b>i;++i){var j=ic(e,h,"div");if(null==g?g=j.left:j.left=g,h=dg(e,j,f,c),h.hitSide)break}return h},moveV:od(function(a,b){var c=this,d=this.doc,e=[],f=!this.display.shift&&!d.extend&&d.sel.somethingSelected();if(d.extendSelectionsBy(function(g){if(f)return 0>a?g.from():g.to();var h=ic(c,g.head,"div");null!=g.goalColumn&&(h.left=g.goalColumn),e.push(h.left);var i=dg(c,h,a,b);return"page"==b&&g==d.sel.primary()&&Tc(c,hc(c,i,"div").top-h.top),i},Ug),e.length)for(var g=0;g<d.sel.ranges.length;g++)d.sel.ranges[g].goalColumn=e[g]}),findWordAt:function(a){var b=this.doc,c=B(b,a.line).text,d=a.ch,e=a.ch;if(c){var f=this.getHelper(a,"wordChars");"before"!=a.sticky&&e!=c.length||!d?++e:--d;for(var g=c.charAt(d),h=v(g,f)?function(a){return v(a,f)}:/\s/.test(g)?function(a){return/\s/.test(a)}:function(a){return!/\s/.test(a)&&!v(a)};d>0&&h(c.charAt(d-1));)--d;for(;e<c.length&&h(c.charAt(e));)++e}return new Dh(J(a.line,d),J(a.line,e))},toggleOverwrite:function(a){(null==a||a!=this.state.overwrite)&&((this.state.overwrite=!this.state.overwrite)?h(this.display.cursorDiv,"CodeMirror-overwrite"):Lg(this.display.cursorDiv,"CodeMirror-overwrite"),Aa(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==g()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:od(function(a,b){Vc(this,a,b)}),getScrollInfo:function(){var a=this.display.scroller;return{left:a.scrollLeft,top:a.scrollTop,height:a.scrollHeight-Nb(this)-this.display.barHeight,width:a.scrollWidth-Nb(this)-this.display.barWidth,clientHeight:Pb(this),clientWidth:Ob(this)}},scrollIntoView:od(function(a,b){null==a?(a={from:this.doc.sel.primary().head,to:null},null==b&&(b=this.options.cursorScrollMargin)):"number"==typeof a?a={from:J(a,0),to:null}:null==a.from&&(a={from:a,to:null}),a.to||(a.to=a.from),a.margin=b||0,null!=a.from.line?Wc(this,a):Yc(this,a.from,a.to,a.margin)}),setSize:od(function(a,b){var c=this,d=function(a){return"number"==typeof a||/^\d+$/.test(String(a))?a+"px":a};null!=a&&(this.display.wrapper.style.width=d(a)),null!=b&&(this.display.wrapper.style.height=d(b)),this.options.lineWrapping&&ac(this);var e=this.display.viewFrom;this.doc.iter(e,this.display.viewTo,function(a){if(a.widgets)for(var b=0;b<a.widgets.length;b++)if(a.widgets[b].noHScroll){rd(c,e,"widget");break}++e}),this.curOp.forceUpdate=!0,Aa(this,"refresh",this)}),operation:function(a){return md(this,a)},startOperation:function(){return ed(this)},endOperation:function(){return fd(this)},refresh:od(function(){var a=this.display.cachedTextHeight;qd(this),this.curOp.forceUpdate=!0,bc(this),Vc(this,this.doc.scrollLeft,this.doc.scrollTop),Fd(this),(null==a||Math.abs(a-sc(this.display))>.5)&&xc(this),Aa(this,"refresh",this)}),swapDoc:od(function(a){var b=this.doc;return b.cm=null,Yd(this,a),bc(this),this.display.input.reset(),Vc(this,a.scrollLeft,a.scrollTop),this.curOp.forceScroll=!0,ub(this,"swapDoc",this,b),b}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},Ea(a),a.registerHelper=function(b,d,e){c.hasOwnProperty(b)||(c[b]=a[b]={_global:[]}),c[b][d]=e},a.registerGlobalHelper=function(b,d,e,f){a.registerHelper(b,d,f),c[b]._global.push({pred:e,val:f})}},ci=function(a){this.cm=a,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Ng,this.composing=null,this.gracePeriod=!1,this.readDOMTimeout=null};ci.prototype.init=function(a){function b(a){if(!Ba(e,a)){if(e.somethingSelected())Xf({lineWise:!1,text:e.getSelections()}),"cut"==a.type&&e.replaceSelection("",null,"cut");else{if(!e.options.lineWiseCopyCut)return;var b=_f(e);Xf({lineWise:!0,text:b.text}),"cut"==a.type&&e.operation(function(){e.setSelections(b.ranges,0,Sg),e.replaceSelection("",null,"cut")})}if(a.clipboardData){a.clipboardData.clearData();var c=ai.text.join("\n");if(a.clipboardData.setData("Text",c),a.clipboardData.getData("Text")==c)return void a.preventDefault()}var g=bg(),h=g.firstChild;e.display.lineSpace.insertBefore(g,e.display.lineSpace.firstChild),h.value=ai.text.join("\n");var i=document.activeElement;Mg(h),setTimeout(function(){e.display.lineSpace.removeChild(g),i.focus(),i==f&&d.showPrimarySelection()},50)}}var c=this,d=this,e=d.cm,f=d.div=a.lineDiv;ag(f,e.options.spellcheck),bh(f,"paste",function(a){Ba(e,a)||Zf(a,e)||11>=tg&&setTimeout(nd(e,function(){return c.updateFromDOM()}),20)}),bh(f,"compositionstart",function(a){c.composing={data:a.data,done:!1}}),bh(f,"compositionupdate",function(a){c.composing||(c.composing={data:a.data,done:!1})}),bh(f,"compositionend",function(a){c.composing&&(a.data!=c.composing.data&&c.readFromDOMSoon(),c.composing.done=!0)}),bh(f,"touchstart",function(){return d.forceCompositionEnd()}),bh(f,"input",function(){c.composing||c.readFromDOMSoon()}),bh(f,"copy",b),bh(f,"cut",b)},ci.prototype.prepareSelection=function(){var a=Bc(this.cm,!1);return a.focus=this.cm.state.focused,a},ci.prototype.showSelection=function(a,b){a&&this.cm.display.view.length&&((a.focus||b)&&this.showPrimarySelection(),this.showMultipleSelections(a))},ci.prototype.showPrimarySelection=function(){var a=window.getSelection(),b=this.cm,c=b.doc.sel.primary(),d=c.from(),e=c.to();if(b.display.viewTo==b.display.viewFrom||d.line>=b.display.viewTo||e.line<b.display.viewFrom)return void a.removeAllRanges();var f=ig(b,a.anchorNode,a.anchorOffset),g=ig(b,a.focusNode,a.focusOffset);if(!f||f.bad||!g||g.bad||0!=K(O(f,g),d)||0!=K(N(f,g),e)){var h=b.display.view,i=d.line>=b.display.viewFrom&&eg(b,d)||{node:h[0].measure.map[2],offset:0},j=e.line<b.display.viewTo&&eg(b,e);if(!j){var k=h[h.length-1].measure,l=k.maps?k.maps[k.maps.length-1]:k.map;j={node:l[l.length-1],offset:l[l.length-2]-l[l.length-3]}}if(!i||!j)return void a.removeAllRanges();var m,n=a.rangeCount&&a.getRangeAt(0);try{m=Ig(i.node,i.offset,j.offset,j.node)}catch(o){}m&&(!og&&b.state.focused?(a.collapse(i.node,i.offset),m.collapsed||(a.removeAllRanges(),a.addRange(m))):(a.removeAllRanges(),a.addRange(m)),n&&null==a.anchorNode?a.addRange(n):og&&this.startGracePeriod()),this.rememberSelection()}},ci.prototype.startGracePeriod=function(){var a=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){a.gracePeriod=!1,a.selectionChanged()&&a.cm.operation(function(){return a.cm.curOp.selectionChanged=!0})},20)},ci.prototype.showMultipleSelections=function(a){c(this.cm.display.cursorDiv,a.cursors),c(this.cm.display.selectionDiv,a.selection)},ci.prototype.rememberSelection=function(){var a=window.getSelection();this.lastAnchorNode=a.anchorNode,this.lastAnchorOffset=a.anchorOffset,this.lastFocusNode=a.focusNode,this.lastFocusOffset=a.focusOffset},ci.prototype.selectionInEditor=function(){var a=window.getSelection();if(!a.rangeCount)return!1;var b=a.getRangeAt(0).commonAncestorContainer;return f(this.div,b)},ci.prototype.focus=function(){"nocursor"!=this.cm.options.readOnly&&(this.selectionInEditor()||this.showSelection(this.prepareSelection(),!0),this.div.focus())},ci.prototype.blur=function(){this.div.blur()},ci.prototype.getField=function(){return this.div},ci.prototype.supportsTouch=function(){return!0},ci.prototype.receivedFocus=function(){function a(){b.cm.state.focused&&(b.pollSelection(),b.polling.set(b.cm.options.pollInterval,a))}var b=this;this.selectionInEditor()?this.pollSelection():md(this.cm,function(){return b.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,a)},ci.prototype.selectionChanged=function(){var a=window.getSelection();return a.anchorNode!=this.lastAnchorNode||a.anchorOffset!=this.lastAnchorOffset||a.focusNode!=this.lastFocusNode||a.focusOffset!=this.lastFocusOffset},ci.prototype.pollSelection=function(){if(null==this.readDOMTimeout&&!this.gracePeriod&&this.selectionChanged()){var a=window.getSelection(),b=this.cm;if(Cg&&wg&&this.cm.options.gutters.length&&fg(a.anchorNode))return this.cm.triggerOnKeyDown({type:"keydown",keyCode:8,preventDefault:Math.abs}),this.blur(),void this.focus();if(!this.composing){this.rememberSelection();var c=ig(b,a.anchorNode,a.anchorOffset),d=ig(b,a.focusNode,a.focusOffset);c&&d&&md(b,function(){te(b.doc,Nd(c,d),Sg),(c.bad||d.bad)&&(b.curOp.selectionChanged=!0)})}}},ci.prototype.pollContent=function(){null!=this.readDOMTimeout&&(clearTimeout(this.readDOMTimeout),this.readDOMTimeout=null);var a=this.cm,b=a.display,c=a.doc.sel.primary(),d=c.from(),e=c.to();if(0==d.ch&&d.line>a.firstLine()&&(d=J(d.line-1,B(a.doc,d.line-1).length)),e.ch==B(a.doc,e.line).text.length&&e.line<a.lastLine()&&(e=J(e.line+1,0)),d.line<b.viewFrom||e.line>b.viewTo-1)return!1;var f,g,h;d.line==b.viewFrom||0==(f=zc(a,d.line))?(g=F(b.view[0].line),h=b.view[0].node):(g=F(b.view[f].line),h=b.view[f-1].node.nextSibling);var i,j,k=zc(a,e.line);if(k==b.view.length-1?(i=b.viewTo-1,j=b.lineDiv.lastChild):(i=F(b.view[k+1].line)-1,j=b.view[k+1].node.previousSibling),!h)return!1;for(var l=a.doc.splitLines(hg(a,h,j,g,i)),m=C(a.doc,J(g,0),J(i,B(a.doc,i).text.length));l.length>1&&m.length>1;)if(p(l)==p(m))l.pop(),m.pop(),i--;else{if(l[0]!=m[0])break;l.shift(),m.shift(),g++}for(var n=0,o=0,q=l[0],r=m[0],s=Math.min(q.length,r.length);s>n&&q.charCodeAt(n)==r.charCodeAt(n);)++n;for(var t=p(l),u=p(m),v=Math.min(t.length-(1==l.length?n:0),u.length-(1==m.length?n:0));v>o&&t.charCodeAt(t.length-o-1)==u.charCodeAt(u.length-o-1);)++o;if(1==l.length&&1==m.length&&g==d.line)for(;n&&n>d.ch&&t.charCodeAt(t.length-o-1)==u.charCodeAt(u.length-o-1);)n--,o++;l[l.length-1]=t.slice(0,t.length-o).replace(/^\u200b+/,""),l[0]=l[0].slice(n).replace(/\u200b+$/,"");var w=J(g,n),x=J(i,m.length?p(m).length-o:0);return l.length>1||l[0]||K(w,x)?(Je(a.doc,l,w,x,"+input"),!0):void 0},ci.prototype.ensurePolled=function(){this.forceCompositionEnd()},ci.prototype.reset=function(){this.forceCompositionEnd()},ci.prototype.forceCompositionEnd=function(){this.composing&&(clearTimeout(this.readDOMTimeout),this.composing=null,this.updateFromDOM(),this.div.blur(),this.div.focus())},ci.prototype.readFromDOMSoon=function(){var a=this;null==this.readDOMTimeout&&(this.readDOMTimeout=setTimeout(function(){if(a.readDOMTimeout=null,a.composing){if(!a.composing.done)return;a.composing=null}a.updateFromDOM()},80))},ci.prototype.updateFromDOM=function(){var a=this;(this.cm.isReadOnly()||!this.pollContent())&&md(this.cm,function(){return qd(a.cm)})},ci.prototype.setUneditable=function(a){a.contentEditable="false"},ci.prototype.onKeyPress=function(a){0!=a.charCode&&(a.preventDefault(),this.cm.isReadOnly()||nd(this.cm,Yf)(this.cm,String.fromCharCode(null==a.charCode?a.keyCode:a.charCode),0))},ci.prototype.readOnlyChanged=function(a){this.div.contentEditable=String("nocursor"!=a)},ci.prototype.onContextMenu=function(){},ci.prototype.resetPosition=function(){},ci.prototype.needsContentAttribute=!0;var di=function(a){this.cm=a,this.prevInput="",this.pollingFast=!1,this.polling=new Ng,this.hasSelection=!1,this.composing=null};di.prototype.init=function(a){function b(a){if(!Ba(e,a)){if(e.somethingSelected())Xf({lineWise:!1,text:e.getSelections()});else{if(!e.options.lineWiseCopyCut)return;var b=_f(e);Xf({lineWise:!0,text:b.text}),"cut"==a.type?e.setSelections(b.ranges,null,Sg):(d.prevInput="",g.value=b.text.join("\n"),Mg(g))}"cut"==a.type&&(e.state.cutIncoming=!0)}}var c=this,d=this,e=this.cm,f=this.wrapper=bg(),g=this.textarea=f.firstChild;a.wrapper.insertBefore(f,a.wrapper.firstChild),Bg&&(g.style.width="0px"),bh(g,"input",function(){sg&&tg>=9&&c.hasSelection&&(c.hasSelection=null),d.poll()}),bh(g,"paste",function(a){Ba(e,a)||Zf(a,e)||(e.state.pasteIncoming=!0,d.fastPoll())}),bh(g,"cut",b),bh(g,"copy",b),bh(a.scroller,"paste",function(b){Jb(a,b)||Ba(e,b)||(e.state.pasteIncoming=!0,d.focus())}),bh(a.lineSpace,"selectstart",function(b){Jb(a,b)||Fa(b)}),bh(g,"compositionstart",function(){var a=e.getCursor("from");d.composing&&d.composing.range.clear(),d.composing={start:a,range:e.markText(a,e.getCursor("to"),{className:"CodeMirror-composing"})}}),bh(g,"compositionend",function(){d.composing&&(d.poll(),d.composing.range.clear(),d.composing=null)})},di.prototype.prepareSelection=function(){var a=this.cm,b=a.display,c=a.doc,d=Bc(a);if(a.options.moveInputWithCursor){var e=ic(a,c.sel.primary().head,"div"),f=b.wrapper.getBoundingClientRect(),g=b.lineDiv.getBoundingClientRect();d.teTop=Math.max(0,Math.min(b.wrapper.clientHeight-10,e.top+g.top-f.top)),d.teLeft=Math.max(0,Math.min(b.wrapper.clientWidth-10,e.left+g.left-f.left))}return d},di.prototype.showSelection=function(a){var b=this.cm,d=b.display;c(d.cursorDiv,a.cursors),c(d.selectionDiv,a.selection),null!=a.teTop&&(this.wrapper.style.top=a.teTop+"px",this.wrapper.style.left=a.teLeft+"px")},di.prototype.reset=function(a){if(!this.contextMenuPending&&!this.composing){var b=this.cm;if(b.somethingSelected()){this.prevInput="";var c=b.getSelection();this.textarea.value=c,b.state.focused&&Mg(this.textarea),sg&&tg>=9&&(this.hasSelection=c)}else a||(this.prevInput=this.textarea.value="",sg&&tg>=9&&(this.hasSelection=null))}},di.prototype.getField=function(){return this.textarea},di.prototype.supportsTouch=function(){return!1},di.prototype.focus=function(){if("nocursor"!=this.cm.options.readOnly&&(!Dg||g()!=this.textarea))try{this.textarea.focus()}catch(a){}},di.prototype.blur=function(){this.textarea.blur()},di.prototype.resetPosition=function(){this.wrapper.style.top=this.wrapper.style.left=0},di.prototype.receivedFocus=function(){this.slowPoll()},di.prototype.slowPoll=function(){var a=this;this.pollingFast||this.polling.set(this.cm.options.pollInterval,function(){a.poll(),a.cm.state.focused&&a.slowPoll()})},di.prototype.fastPoll=function(){function a(){var d=c.poll();d||b?(c.pollingFast=!1,c.slowPoll()):(b=!0,c.polling.set(60,a))}var b=!1,c=this;c.pollingFast=!0,c.polling.set(20,a)},di.prototype.poll=function(){var a=this,b=this.cm,c=this.textarea,d=this.prevInput;if(this.contextMenuPending||!b.state.focused||eh(c)&&!d&&!this.composing||b.isReadOnly()||b.options.disableInput||b.state.keySeq)return!1;var e=c.value;if(e==d&&!b.somethingSelected())return!1;if(sg&&tg>=9&&this.hasSelection===e||Eg&&/[\uf700-\uf7ff]/.test(e))return b.display.input.reset(),!1;if(b.doc.sel==b.display.selForContextMenu){var f=e.charCodeAt(0);if(8203!=f||d||(d=""),8666==f)return this.reset(),this.cm.execCommand("undo")}for(var g=0,h=Math.min(d.length,e.length);h>g&&d.charCodeAt(g)==e.charCodeAt(g);)++g;return md(b,function(){Yf(b,e.slice(g),d.length-g,null,a.composing?"*compose":null),e.length>1e3||e.indexOf("\n")>-1?c.value=a.prevInput="":a.prevInput=e,a.composing&&(a.composing.range.clear(),a.composing.range=b.markText(a.composing.start,b.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},di.prototype.ensurePolled=function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},di.prototype.onKeyPress=function(){sg&&tg>=9&&(this.hasSelection=null),this.fastPoll()},di.prototype.onContextMenu=function(a){function b(){if(null!=g.selectionStart){var a=e.somethingSelected(),b=""+(a?g.value:"");g.value="",g.value=b,d.prevInput=a?"":"",g.selectionStart=1,g.selectionEnd=b.length,f.selForContextMenu=e.doc.sel}}function c(){if(d.contextMenuPending=!1,d.wrapper.style.cssText=l,g.style.cssText=k,sg&&9>tg&&f.scrollbars.setScrollTop(f.scroller.scrollTop=i),null!=g.selectionStart){(!sg||sg&&9>tg)&&b();var a=0,c=function(){f.selForContextMenu==e.doc.sel&&0==g.selectionStart&&g.selectionEnd>0&&""==d.prevInput?nd(e,Be)(e):a++<10?f.detectingSelectAll=setTimeout(c,500):(f.selForContextMenu=null,f.input.reset())};f.detectingSelectAll=setTimeout(c,200)}}var d=this,e=d.cm,f=e.display,g=d.textarea,h=yc(e,a),i=f.scroller.scrollTop;if(h&&!xg){var j=e.options.resetSelectionOnContextMenu;j&&-1==e.doc.sel.contains(h)&&nd(e,te)(e.doc,Nd(h),Sg);var k=g.style.cssText,l=d.wrapper.style.cssText;d.wrapper.style.cssText="position: absolute";var m=d.wrapper.getBoundingClientRect();g.style.cssText="position: absolute; width: 30px; height: 30px;\n      top: "+(a.clientY-m.top-5)+"px; left: "+(a.clientX-m.left-5)+"px;\n      z-index: 1000; background: "+(sg?"rgba(255, 255, 255, .05)":"transparent")+";\n      outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";var n;if(ug&&(n=window.scrollY),f.input.focus(),ug&&window.scrollTo(null,n),f.input.reset(),e.somethingSelected()||(g.value=d.prevInput=" "),d.contextMenuPending=!0,f.selForContextMenu=e.doc.sel,clearTimeout(f.detectingSelectAll),sg&&tg>=9&&b(),Kg){Ia(a);var o=function(){za(window,"mouseup",o),setTimeout(c,20)};bh(window,"mouseup",o)}else setTimeout(c,50)}},di.prototype.readOnlyChanged=function(a){a||this.reset(),this.textarea.disabled="nocursor"==a},di.prototype.setUneditable=function(){},di.prototype.needsContentAttribute=!1,Qf(Uf),bi(Uf);var ei="iter insert remove copy getEditor constructor".split(" ");for(var fi in Jh.prototype)Jh.prototype.hasOwnProperty(fi)&&m(ei,fi)<0&&(Uf.prototype[fi]=function(a){return function(){return a.apply(this.doc,arguments)}}(Jh.prototype[fi]));return Ea(Jh),Uf.inputStyles={textarea:di,contenteditable:ci},Uf.defineMode=function(a){Uf.defaults.mode||"null"==a||(Uf.defaults.mode=a),Oa.apply(this,arguments)},Uf.defineMIME=Pa,Uf.defineMode("null",function(){return{token:function(a){return a.skipToEnd()}}}),Uf.defineMIME("text/plain","null"),Uf.defineExtension=function(a,b){Uf.prototype[a]=b},Uf.defineDocExtension=function(a,b){Jh.prototype[a]=b},Uf.fromTextArea=kg,lg(Uf),Uf.version="5.30.0",Uf}),function(a){a(CodeMirror)}(function(a){"use strict";a.defineMode("javascript",function(b,c){function d(a){for(var b,c=!1,d=!1;null!=(b=a.next());){if(!c){if("/"==b&&!d)return;"["==b?d=!0:d&&"]"==b&&(d=!1)}c=!c&&"\\"==b}}function e(a,b,c){return Aa=a,Ba=c,b}function f(a,b){var c=a.next();if('"'==c||"'"==c)return b.tokenize=g(c),b.tokenize(a,b);if("."==c&&a.match(/^\d+(?:[eE][+\-]?\d+)?/))return e("number","number");if("."==c&&a.match(".."))return e("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(c))return e(c);if("="==c&&a.eat(">"))return e("=>","operator");if("0"==c&&a.eat(/x/i))return a.eatWhile(/[\da-f]/i),e("number","number");if("0"==c&&a.eat(/o/i))return a.eatWhile(/[0-7]/i),e("number","number");if("0"==c&&a.eat(/b/i))return a.eatWhile(/[01]/i),e("number","number");if(/\d/.test(c))return a.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),e("number","number");if("/"==c)return a.eat("*")?(b.tokenize=h,h(a,b)):a.eat("/")?(a.skipToEnd(),e("comment","comment")):za(a,b,1)?(d(a),a.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),e("regexp","string-2")):(a.eatWhile(Ja),e("operator","operator",a.current()));if("`"==c)return b.tokenize=i,i(a,b);if("#"==c)return a.skipToEnd(),e("error","error");if(Ja.test(c))return">"==c&&b.lexical&&">"==b.lexical.type||a.eatWhile(Ja),e("operator","operator",a.current());if(Ha.test(c)){a.eatWhile(Ha);var f=a.current();if("."!=b.lastType){if(Ia.propertyIsEnumerable(f)){var j=Ia[f];return e(j.type,j.style,f)}if("async"==f&&a.match(/^\s*[\(\w]/,!1))return e("async","keyword",f)}return e("variable","variable",f)}}function g(a){return function(b,c){var d,g=!1;if(Ea&&"@"==b.peek()&&b.match(Ka))return c.tokenize=f,e("jsonld-keyword","meta");for(;null!=(d=b.next())&&(d!=a||g);)g=!g&&"\\"==d;return g||(c.tokenize=f),e("string","string")}}function h(a,b){for(var c,d=!1;c=a.next();){if("/"==c&&d){b.tokenize=f;break}d="*"==c}return e("comment","comment")}function i(a,b){for(var c,d=!1;null!=(c=a.next());){if(!d&&("`"==c||"$"==c&&a.eat("{"))){b.tokenize=f;break}d=!d&&"\\"==c}return e("quasi","string-2",a.current())}function j(a,b){b.fatArrowAt&&(b.fatArrowAt=null);var c=a.string.indexOf("=>",a.start);if(!(0>c)){if(Ga){var d=/:\s*(?:\w+(?:<[^>]*>|\[\])?|\{[^}]*\})\s*$/.exec(a.string.slice(a.start,c));d&&(c=d.index)}for(var e=0,f=!1,g=c-1;g>=0;--g){var h=a.string.charAt(g),i=La.indexOf(h);if(i>=0&&3>i){if(!e){++g;break}if(0==--e){"("==h&&(f=!0);break}}else if(i>=3&&6>i)++e;else if(Ha.test(h))f=!0;else{if(/["'\/]/.test(h))return;if(f&&!e){++g;break}}}f&&!e&&(b.fatArrowAt=g)}}function k(a,b,c,d,e,f){this.indented=a,this.column=b,this.type=c,this.prev=e,this.info=f,null!=d&&(this.align=d)}function l(a,b){for(var c=a.localVars;c;c=c.next)if(c.name==b)return!0;for(var d=a.context;d;d=d.prev)for(var c=d.vars;c;c=c.next)if(c.name==b)return!0}function m(a,b,c,d,e){var f=a.cc;for(Na.state=a,Na.stream=e,Na.marked=null,Na.cc=f,Na.style=b,a.lexical.hasOwnProperty("align")||(a.lexical.align=!0);;){var g=f.length?f.pop():Fa?w:v;if(g(c,d)){for(;f.length&&f[f.length-1].lex;)f.pop()();return Na.marked?Na.marked:"variable"==c&&l(a,d)?"variable-2":b}}}function n(){for(var a=arguments.length-1;a>=0;a--)Na.cc.push(arguments[a])}function o(){return n.apply(null,arguments),!0}function p(a){function b(b){for(var c=b;c;c=c.next)if(c.name==a)return!0;return!1}var d=Na.state;if(Na.marked="def",d.context){if(b(d.localVars))return;d.localVars={name:a,next:d.localVars}}else{if(b(d.globalVars))return;c.globalVars&&(d.globalVars={name:a,next:d.globalVars})}}function q(){Na.state.context={prev:Na.state.context,vars:Na.state.localVars},Na.state.localVars=Oa}function r(){Na.state.localVars=Na.state.context.vars,Na.state.context=Na.state.context.prev}function s(a,b){var c=function(){var c=Na.state,d=c.indented;if("stat"==c.lexical.type)d=c.lexical.indented;else for(var e=c.lexical;e&&")"==e.type&&e.align;e=e.prev)d=e.indented;c.lexical=new k(d,Na.stream.column(),a,null,c.lexical,b)};return c.lex=!0,c}function t(){var a=Na.state;a.lexical.prev&&(")"==a.lexical.type&&(a.indented=a.lexical.indented),a.lexical=a.lexical.prev)}function u(a){function b(c){return c==a?o():";"==a?n():o(b)}return b}function v(a,b){return"var"==a?o(s("vardef",b.length),$,u(";"),t):"keyword a"==a?o(s("form"),y,v,t):"keyword b"==a?o(s("form"),v,t):"{"==a?o(s("}"),S,t):";"==a?o():"if"==a?("else"==Na.state.lexical.info&&Na.state.cc[Na.state.cc.length-1]==t&&Na.state.cc.pop()(),o(s("form"),y,v,t,da)):"function"==a?o(ja):"for"==a?o(s("form"),ea,v,t):"variable"==a?Ga&&"type"==b?(Na.marked="keyword",o(U,u("operator"),U,u(";"))):Ga&&"declare"==b?(Na.marked="keyword",o(v)):o(s("stat"),L):"switch"==a?o(s("form"),y,u("{"),s("}","switch"),S,t,t):"case"==a?o(w,u(":")):"default"==a?o(u(":")):"catch"==a?o(s("form"),q,u("("),ka,u(")"),v,t,r):"class"==a?o(s("form"),ma,t):"export"==a?o(s("stat"),qa,t):"import"==a?o(s("stat"),sa,t):"module"==a?o(s("form"),_,u("{"),s("}"),S,t,t):"async"==a?o(v):"@"==b?o(w,v):n(s("stat"),w,u(";"),t)}function w(a){return z(a,!1)}function x(a){return z(a,!0)}function y(a){return"("!=a?n():o(s(")"),w,u(")"),t)}function z(a,b){if(Na.state.fatArrowAt==Na.stream.start){var c=b?H:G;if("("==a)return o(q,s(")"),Q(ka,")"),t,u("=>"),c,r);if("variable"==a)return n(q,_,u("=>"),c,r)}var d=b?D:C;return Ma.hasOwnProperty(a)?o(d):"function"==a?o(ja,d):"class"==a?o(s("form"),la,t):"keyword c"==a||"async"==a?o(b?B:A):"("==a?o(s(")"),A,u(")"),t,d):"operator"==a||"spread"==a?o(b?x:w):"["==a?o(s("]"),xa,t,d):"{"==a?R(N,"}",null,d):"quasi"==a?n(E,d):"new"==a?o(I(b)):o()}function A(a){return a.match(/[;\}\)\],]/)?n():n(w)}function B(a){return a.match(/[;\}\)\],]/)?n():n(x)}function C(a,b){return","==a?o(w):D(a,b,!1)}function D(a,b,c){var d=0==c?C:D,e=0==c?w:x;return"=>"==a?o(q,c?H:G,r):"operator"==a?/\+\+|--/.test(b)||Ga&&"!"==b?o(d):"?"==b?o(w,u(":"),e):o(e):"quasi"==a?n(E,d):";"!=a?"("==a?R(x,")","call",d):"."==a?o(M,d):"["==a?o(s("]"),A,u("]"),t,d):Ga&&"as"==b?(Na.marked="keyword",o(U,d)):"regexp"==a?(Na.state.lastType=Na.marked="operator",Na.stream.backUp(Na.stream.pos-Na.stream.start-1),o(e)):void 0:void 0}function E(a,b){return"quasi"!=a?n():"${"!=b.slice(b.length-2)?o(E):o(w,F)}function F(a){return"}"==a?(Na.marked="string-2",Na.state.tokenize=i,o(E)):void 0}function G(a){return j(Na.stream,Na.state),n("{"==a?v:w)}function H(a){return j(Na.stream,Na.state),n("{"==a?v:x)}function I(a){return function(b){return"."==b?o(a?K:J):"variable"==b&&Ga?o(Z,a?D:C):n(a?x:w)}}function J(a,b){return"target"==b?(Na.marked="keyword",o(C)):void 0}function K(a,b){return"target"==b?(Na.marked="keyword",o(D)):void 0}function L(a){return":"==a?o(t,v):n(C,u(";"),t)}function M(a){return"variable"==a?(Na.marked="property",o()):void 0}function N(a,b){if("async"==a)return Na.marked="property",o(N);if("variable"==a||"keyword"==Na.style){if(Na.marked="property","get"==b||"set"==b)return o(O);var c;return Ga&&Na.state.fatArrowAt==Na.stream.start&&(c=Na.stream.match(/^\s*:\s*/,!1))&&(Na.state.fatArrowAt=Na.stream.pos+c[0].length),o(P)}return"number"==a||"string"==a?(Na.marked=Ea?"property":Na.style+" property",o(P)):"jsonld-keyword"==a?o(P):"modifier"==a?o(N):"["==a?o(w,u("]"),P):"spread"==a?o(w,P):":"==a?n(P):void 0}function O(a){return"variable"!=a?n(P):(Na.marked="property",o(ja))}function P(a){return":"==a?o(x):"("==a?n(ja):void 0}function Q(a,b,c){function d(e,f){if(c?c.indexOf(e)>-1:","==e){var g=Na.state.lexical;return"call"==g.info&&(g.pos=(g.pos||0)+1),o(function(c,d){return c==b||d==b?n():n(a)},d)}return e==b||f==b?o():o(u(b))}return function(c,e){return c==b||e==b?o():n(a,d)}}function R(a,b,c){for(var d=3;d<arguments.length;d++)Na.cc.push(arguments[d]);return o(s(b,c),Q(a,b),t)}function S(a){return"}"==a?o():n(v,S)}function T(a,b){if(Ga){if(":"==a)return o(U);if("?"==b)return o(T)}}function U(a,b){return"variable"==a?"keyof"==b?(Na.marked="keyword",o(U)):(Na.marked="type",o(Y)):"string"==a||"number"==a||"atom"==a?o(Y):"["==a?o(s("]"),Q(U,"]",","),t,Y):"{"==a?o(s("}"),Q(W,"}",",;"),t,Y):"("==a?o(Q(X,")"),V):void 0}function V(a){return"=>"==a?o(U):void 0}function W(a,b){return"variable"==a||"keyword"==Na.style?(Na.marked="property",o(W)):"?"==b?o(W):":"==a?o(U):"["==a?o(w,T,u("]"),W):void 0}function X(a){return"variable"==a?o(X):":"==a?o(U):void 0}function Y(a,b){return"<"==b?o(s(">"),Q(U,">"),t,Y):"|"==b||"."==a?o(U):"["==a?o(u("]"),Y):"extends"==b?o(U):void 0}function Z(a,b){return"<"==b?o(s(">"),Q(U,">"),t,Y):void 0}function $(){return n(_,T,ba,ca)}function _(a,b){return"modifier"==a?o(_):"variable"==a?(p(b),o()):"spread"==a?o(_):"["==a?R(_,"]"):"{"==a?R(aa,"}"):void 0}function aa(a,b){return"variable"!=a||Na.stream.match(/^\s*:/,!1)?("variable"==a&&(Na.marked="property"),"spread"==a?o(_):"}"==a?n():o(u(":"),_,ba)):(p(b),o(ba))}function ba(a,b){return"="==b?o(x):void 0}function ca(a){return","==a?o($):void 0}function da(a,b){return"keyword b"==a&&"else"==b?o(s("form","else"),v,t):void 0}function ea(a){return"("==a?o(s(")"),fa,u(")"),t):void 0}function fa(a){return"var"==a?o($,u(";"),ha):";"==a?o(ha):"variable"==a?o(ga):n(w,u(";"),ha)}function ga(a,b){return"in"==b||"of"==b?(Na.marked="keyword",o(w)):o(C,ha)}function ha(a,b){return";"==a?o(ia):"in"==b||"of"==b?(Na.marked="keyword",o(w)):n(w,u(";"),ia);
}function ia(a){")"!=a&&o(w)}function ja(a,b){return"*"==b?(Na.marked="keyword",o(ja)):"variable"==a?(p(b),o(ja)):"("==a?o(q,s(")"),Q(ka,")"),t,T,v,r):Ga&&"<"==b?o(s(">"),Q(U,">"),t,ja):void 0}function ka(a,b){return"@"==b&&o(w,ka),"spread"==a||"modifier"==a?o(ka):n(_,T,ba)}function la(a,b){return"variable"==a?ma(a,b):na(a,b)}function ma(a,b){return"variable"==a?(p(b),o(na)):void 0}function na(a,b){return"<"==b?o(s(">"),Q(U,">"),t,na):"extends"==b||"implements"==b||Ga&&","==a?o(Ga?U:w,na):"{"==a?o(s("}"),oa,t):void 0}function oa(a,b){return"modifier"==a||"async"==a||"variable"==a&&("static"==b||"get"==b||"set"==b)&&Na.stream.match(/^\s+[\w$\xa1-\uffff]/,!1)?(Na.marked="keyword",o(oa)):"variable"==a||"keyword"==Na.style?(Na.marked="property",o(Ga?pa:ja,oa)):"["==a?o(w,u("]"),Ga?pa:ja,oa):"*"==b?(Na.marked="keyword",o(oa)):";"==a?o(oa):"}"==a?o():"@"==b?o(w,oa):void 0}function pa(a,b){return"?"==b?o(pa):":"==a?o(U,ba):"="==b?o(x):n(ja)}function qa(a,b){return"*"==b?(Na.marked="keyword",o(wa,u(";"))):"default"==b?(Na.marked="keyword",o(w,u(";"))):"{"==a?o(Q(ra,"}"),wa,u(";")):n(v)}function ra(a,b){return"as"==b?(Na.marked="keyword",o(u("variable"))):"variable"==a?n(x,ra):void 0}function sa(a){return"string"==a?o():n(ta,ua,wa)}function ta(a,b){return"{"==a?R(ta,"}"):("variable"==a&&p(b),"*"==b&&(Na.marked="keyword"),o(va))}function ua(a){return","==a?o(ta,ua):void 0}function va(a,b){return"as"==b?(Na.marked="keyword",o(ta)):void 0}function wa(a,b){return"from"==b?(Na.marked="keyword",o(w)):void 0}function xa(a){return"]"==a?o():n(Q(x,"]"))}function ya(a,b){return"operator"==a.lastType||","==a.lastType||Ja.test(b.charAt(0))||/[,.]/.test(b.charAt(0))}function za(a,b,c){return b.tokenize==f&&/^(?:operator|sof|keyword [bc]|case|new|export|default|spread|[\[{}\(,;:]|=>)$/.test(b.lastType)||"quasi"==b.lastType&&/\{\s*$/.test(a.string.slice(0,a.pos-(c||0)))}var Aa,Ba,Ca=b.indentUnit,Da=c.statementIndent,Ea=c.jsonld,Fa=c.json||Ea,Ga=c.typescript,Ha=c.wordCharacters||/[\w$\xa1-\uffff]/,Ia=function(){function a(a){return{type:a,style:"keyword"}}var b=a("keyword a"),c=a("keyword b"),d=a("keyword c"),e=a("operator"),f={type:"atom",style:"atom"},g={"if":a("if"),"while":b,"with":b,"else":c,"do":c,"try":c,"finally":c,"return":d,"break":d,"continue":d,"new":a("new"),"delete":d,"void":d,"throw":d,"debugger":d,"var":a("var"),"const":a("var"),let:a("var"),"function":a("function"),"catch":a("catch"),"for":a("for"),"switch":a("switch"),"case":a("case"),"default":a("default"),"in":e,"typeof":e,"instanceof":e,"true":f,"false":f,"null":f,undefined:f,NaN:f,Infinity:f,"this":a("this"),"class":a("class"),"super":a("atom"),"yield":d,"export":a("export"),"import":a("import"),"extends":d,await:d};if(Ga){var h={type:"variable",style:"type"},i={"interface":a("class"),"implements":d,namespace:d,module:a("module"),"enum":a("module"),"public":a("modifier"),"private":a("modifier"),"protected":a("modifier"),"abstract":a("modifier"),readonly:a("modifier"),string:h,number:h,"boolean":h,any:h};for(var j in i)g[j]=i[j]}return g}(),Ja=/[+\-*&%=<>!?|~^@]/,Ka=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/,La="([{}])",Ma={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0,"jsonld-keyword":!0},Na={state:null,column:null,marked:null,cc:null},Oa={name:"this",next:{name:"arguments"}};return t.lex=!0,{startState:function(a){var b={tokenize:f,lastType:"sof",cc:[],lexical:new k((a||0)-Ca,0,"block",!1),localVars:c.localVars,context:c.localVars&&{vars:c.localVars},indented:a||0};return c.globalVars&&"object"==typeof c.globalVars&&(b.globalVars=c.globalVars),b},token:function(a,b){if(a.sol()&&(b.lexical.hasOwnProperty("align")||(b.lexical.align=!1),b.indented=a.indentation(),j(a,b)),b.tokenize!=h&&a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"==Aa?c:(b.lastType="operator"!=Aa||"++"!=Ba&&"--"!=Ba?Aa:"incdec",m(b,c,Aa,Ba,a))},indent:function(b,d){if(b.tokenize==h)return a.Pass;if(b.tokenize!=f)return 0;var e,g=d&&d.charAt(0),i=b.lexical;if(!/^\s*else\b/.test(d))for(var j=b.cc.length-1;j>=0;--j){var k=b.cc[j];if(k==t)i=i.prev;else if(k!=da)break}for(;("stat"==i.type||"form"==i.type)&&("}"==g||(e=b.cc[b.cc.length-1])&&(e==C||e==D)&&!/^[,\.=+\-*:?[\(]/.test(d));)i=i.prev;Da&&")"==i.type&&"stat"==i.prev.type&&(i=i.prev);var l=i.type,m=g==l;return"vardef"==l?i.indented+("operator"==b.lastType||","==b.lastType?i.info+1:0):"form"==l&&"{"==g?i.indented:"form"==l?i.indented+Ca:"stat"==l?i.indented+(ya(b,d)?Da||Ca:0):"switch"!=i.info||m||0==c.doubleIndentSwitch?i.align?i.column+(m?0:1):i.indented+(m?0:Ca):i.indented+(/^(?:case|default)\b/.test(d)?Ca:2*Ca)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:Fa?null:"/*",blockCommentEnd:Fa?null:"*/",lineComment:Fa?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:Fa?"json":"javascript",jsonldMode:Ea,jsonMode:Fa,expressionAllowed:za,skipExpression:function(a){var b=a.cc[a.cc.length-1];(b==w||b==x)&&a.cc.pop()}}}),a.registerHelper("wordChars","javascript",/[\w$]/),a.defineMIME("text/javascript","javascript"),a.defineMIME("text/ecmascript","javascript"),a.defineMIME("application/javascript","javascript"),a.defineMIME("application/x-javascript","javascript"),a.defineMIME("application/ecmascript","javascript"),a.defineMIME("application/json",{name:"javascript",json:!0}),a.defineMIME("application/x-json",{name:"javascript",json:!0}),a.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),a.defineMIME("text/typescript",{name:"javascript",typescript:!0}),a.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(a){a(CodeMirror)}(function(a){"use strict";var b={autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0},c={autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1};a.defineMode("xml",function(d,e){function f(a,b){function c(c){return b.tokenize=c,c(a,b)}var d=a.next();if("<"==d)return a.eat("!")?a.eat("[")?a.match("CDATA[")?c(i("atom","]]>")):null:a.match("--")?c(i("comment","-->")):a.match("DOCTYPE",!0,!0)?(a.eatWhile(/[\w\._\-]/),c(j(1))):null:a.eat("?")?(a.eatWhile(/[\w\._\-]/),b.tokenize=i("meta","?>"),"meta"):(A=a.eat("/")?"closeTag":"openTag",b.tokenize=g,"tag bracket");if("&"==d){var e;return e=a.eat("#")?a.eat("x")?a.eatWhile(/[a-fA-F\d]/)&&a.eat(";"):a.eatWhile(/[\d]/)&&a.eat(";"):a.eatWhile(/[\w\.\-:]/)&&a.eat(";"),e?"atom":"error"}return a.eatWhile(/[^&<]/),null}function g(a,b){var c=a.next();if(">"==c||"/"==c&&a.eat(">"))return b.tokenize=f,A=">"==c?"endTag":"selfcloseTag","tag bracket";if("="==c)return A="equals",null;if("<"==c){b.tokenize=f,b.state=n,b.tagName=b.tagStart=null;var d=b.tokenize(a,b);return d?d+" tag error":"tag error"}return/[\'\"]/.test(c)?(b.tokenize=h(c),b.stringStartCol=a.column(),b.tokenize(a,b)):(a.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word")}function h(a){var b=function(b,c){for(;!b.eol();)if(b.next()==a){c.tokenize=g;break}return"string"};return b.isInAttribute=!0,b}function i(a,b){return function(c,d){for(;!c.eol();){if(c.match(b)){d.tokenize=f;break}c.next()}return a}}function j(a){return function(b,c){for(var d;null!=(d=b.next());){if("<"==d)return c.tokenize=j(a+1),c.tokenize(b,c);if(">"==d){if(1==a){c.tokenize=f;break}return c.tokenize=j(a-1),c.tokenize(b,c)}}return"meta"}}function k(a,b,c){this.prev=a.context,this.tagName=b,this.indent=a.indented,this.startOfLine=c,(x.doNotIndent.hasOwnProperty(b)||a.context&&a.context.noIndent)&&(this.noIndent=!0)}function l(a){a.context&&(a.context=a.context.prev)}function m(a,b){for(var c;;){if(!a.context)return;if(c=a.context.tagName,!x.contextGrabbers.hasOwnProperty(c)||!x.contextGrabbers[c].hasOwnProperty(b))return;l(a)}}function n(a,b,c){return"openTag"==a?(c.tagStart=b.column(),o):"closeTag"==a?p:n}function o(a,b,c){return"word"==a?(c.tagName=b.current(),B="tag",s):(B="error",o)}function p(a,b,c){if("word"==a){var d=b.current();return c.context&&c.context.tagName!=d&&x.implicitlyClosed.hasOwnProperty(c.context.tagName)&&l(c),c.context&&c.context.tagName==d||x.matchClosing===!1?(B="tag",q):(B="tag error",r)}return B="error",r}function q(a,b,c){return"endTag"!=a?(B="error",q):(l(c),n)}function r(a,b,c){return B="error",q(a,b,c)}function s(a,b,c){if("word"==a)return B="attribute",t;if("endTag"==a||"selfcloseTag"==a){var d=c.tagName,e=c.tagStart;return c.tagName=c.tagStart=null,"selfcloseTag"==a||x.autoSelfClosers.hasOwnProperty(d)?m(c,d):(m(c,d),c.context=new k(c,d,e==c.indented)),n}return B="error",s}function t(a,b,c){return"equals"==a?u:(x.allowMissing||(B="error"),s(a,b,c))}function u(a,b,c){return"string"==a?v:"word"==a&&x.allowUnquoted?(B="string",s):(B="error",s(a,b,c))}function v(a,b,c){return"string"==a?v:s(a,b,c)}var w=d.indentUnit,x={},y=e.htmlMode?b:c;for(var z in y)x[z]=y[z];for(var z in e)x[z]=e[z];var A,B;return f.isInText=!0,{startState:function(a){var b={tokenize:f,state:n,indented:a||0,tagName:null,tagStart:null,context:null};return null!=a&&(b.baseIndent=a),b},token:function(a,b){if(!b.tagName&&a.sol()&&(b.indented=a.indentation()),a.eatSpace())return null;A=null;var c=b.tokenize(a,b);return(c||A)&&"comment"!=c&&(B=null,b.state=b.state(A||c,a,b),B&&(c="error"==B?c+" error":B)),c},indent:function(b,c,d){var e=b.context;if(b.tokenize.isInAttribute)return b.tagStart==b.indented?b.stringStartCol+1:b.indented+w;if(e&&e.noIndent)return a.Pass;if(b.tokenize!=g&&b.tokenize!=f)return d?d.match(/^(\s*)/)[0].length:0;if(b.tagName)return x.multilineTagIndentPastTag!==!1?b.tagStart+b.tagName.length+2:b.tagStart+w*(x.multilineTagIndentFactor||1);if(x.alignCDATA&&/<!\[CDATA\[/.test(c))return 0;var h=c&&/^<(\/)?([\w_:\.-]*)/.exec(c);if(h&&h[1])for(;e;){if(e.tagName==h[2]){e=e.prev;break}if(!x.implicitlyClosed.hasOwnProperty(e.tagName))break;e=e.prev}else if(h)for(;e;){var i=x.contextGrabbers[e.tagName];if(!i||!i.hasOwnProperty(h[2]))break;e=e.prev}for(;e&&e.prev&&!e.startOfLine;)e=e.prev;return e?e.indent+w:b.baseIndent||0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"<!--",blockCommentEnd:"-->",configuration:x.htmlMode?"html":"xml",helperType:x.htmlMode?"html":"xml",skipAttribute:function(a){a.state==u&&(a.state=s)}}}),a.defineMIME("text/xml","xml"),a.defineMIME("application/xml","xml"),a.mimeModes.hasOwnProperty("text/html")||a.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(a){a(CodeMirror)}(function(a){"use strict";function b(a){for(var b={},c=0;c<a.length;++c)b[a[c].toLowerCase()]=!0;return b}function c(a,b){for(var c,d=!1;null!=(c=a.next());){if(d&&"/"==c){b.tokenize=null;break}d="*"==c}return["comment","comment"]}a.defineMode("css",function(b,c){function d(a,b){return o=b,a}function e(a,b){var c=a.next();if(r[c]){var e=r[c](a,b);if(e!==!1)return e}return"@"==c?(a.eatWhile(/[\w\\\-]/),d("def",a.current())):"="==c||("~"==c||"|"==c)&&a.eat("=")?d(null,"compare"):'"'==c||"'"==c?(b.tokenize=f(c),b.tokenize(a,b)):"#"==c?(a.eatWhile(/[\w\\\-]/),d("atom","hash")):"!"==c?(a.match(/^\s*\w*/),d("keyword","important")):/\d/.test(c)||"."==c&&a.eat(/\d/)?(a.eatWhile(/[\w.%]/),d("number","unit")):"-"!==c?/[,+>*\/]/.test(c)?d(null,"select-op"):"."==c&&a.match(/^-?[_a-z][_a-z0-9-]*/i)?d("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(c)?d(null,c):"u"==c&&a.match(/rl(-prefix)?\(/)||"d"==c&&a.match("omain(")||"r"==c&&a.match("egexp(")?(a.backUp(1),b.tokenize=g,d("property","word")):/[\w\\\-]/.test(c)?(a.eatWhile(/[\w\\\-]/),d("property","word")):d(null,null):/[\d.]/.test(a.peek())?(a.eatWhile(/[\w.%]/),d("number","unit")):a.match(/^-[\w\\\-]+/)?(a.eatWhile(/[\w\\\-]/),a.match(/^\s*:/,!1)?d("variable-2","variable-definition"):d("variable-2","variable")):a.match(/^\w+-/)?d("meta","meta"):void 0}function f(a){return function(b,c){for(var e,f=!1;null!=(e=b.next());){if(e==a&&!f){")"==a&&b.backUp(1);break}f=!f&&"\\"==e}return(e==a||!f&&")"!=a)&&(c.tokenize=null),d("string","string")}}function g(a,b){return a.next(),a.match(/\s*[\"\')]/,!1)?b.tokenize=null:b.tokenize=f(")"),d(null,"(")}function h(a,b,c){this.type=a,this.indent=b,this.prev=c}function i(a,b,c,d){return a.context=new h(c,b.indentation()+(d===!1?0:q),a.context),c}function j(a){return a.context.prev&&(a.context=a.context.prev),a.context.type}function k(a,b,c){return F[c.context.type](a,b,c)}function l(a,b,c,d){for(var e=d||1;e>0;e--)c.context=c.context.prev;return k(a,b,c)}function m(a){var b=a.current().toLowerCase();p=B.hasOwnProperty(b)?"atom":A.hasOwnProperty(b)?"keyword":"variable"}var n=c.inline;c.propertyKeywords||(c=a.resolveMode("text/css"));var o,p,q=b.indentUnit,r=c.tokenHooks,s=c.documentTypes||{},t=c.mediaTypes||{},u=c.mediaFeatures||{},v=c.mediaValueKeywords||{},w=c.propertyKeywords||{},x=c.nonStandardPropertyKeywords||{},y=c.fontProperties||{},z=c.counterDescriptors||{},A=c.colorKeywords||{},B=c.valueKeywords||{},C=c.allowNested,D=c.lineComment,E=c.supportsAtComponent===!0,F={};return F.top=function(a,b,c){if("{"==a)return i(c,b,"block");if("}"==a&&c.context.prev)return j(c);if(E&&/@component/.test(a))return i(c,b,"atComponentBlock");if(/^@(-moz-)?document$/.test(a))return i(c,b,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/.test(a))return i(c,b,"atBlock");if(/^@(font-face|counter-style)/.test(a))return c.stateArg=a,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(a))return"keyframes";if(a&&"@"==a.charAt(0))return i(c,b,"at");if("hash"==a)p="builtin";else if("word"==a)p="tag";else{if("variable-definition"==a)return"maybeprop";if("interpolation"==a)return i(c,b,"interpolation");if(":"==a)return"pseudo";if(C&&"("==a)return i(c,b,"parens")}return c.context.type},F.block=function(a,b,c){if("word"==a){var d=b.current().toLowerCase();return w.hasOwnProperty(d)?(p="property","maybeprop"):x.hasOwnProperty(d)?(p="string-2","maybeprop"):C?(p=b.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(p+=" error","maybeprop")}return"meta"==a?"block":C||"hash"!=a&&"qualifier"!=a?F.top(a,b,c):(p="error","block")},F.maybeprop=function(a,b,c){return":"==a?i(c,b,"prop"):k(a,b,c)},F.prop=function(a,b,c){if(";"==a)return j(c);if("{"==a&&C)return i(c,b,"propBlock");if("}"==a||"{"==a)return l(a,b,c);if("("==a)return i(c,b,"parens");if("hash"!=a||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(b.current())){if("word"==a)m(b);else if("interpolation"==a)return i(c,b,"interpolation")}else p+=" error";return"prop"},F.propBlock=function(a,b,c){return"}"==a?j(c):"word"==a?(p="property","maybeprop"):c.context.type},F.parens=function(a,b,c){return"{"==a||"}"==a?l(a,b,c):")"==a?j(c):"("==a?i(c,b,"parens"):"interpolation"==a?i(c,b,"interpolation"):("word"==a&&m(b),"parens")},F.pseudo=function(a,b,c){return"meta"==a?"pseudo":"word"==a?(p="variable-3",c.context.type):k(a,b,c)},F.documentTypes=function(a,b,c){return"word"==a&&s.hasOwnProperty(b.current())?(p="tag",c.context.type):F.atBlock(a,b,c)},F.atBlock=function(a,b,c){if("("==a)return i(c,b,"atBlock_parens");if("}"==a||";"==a)return l(a,b,c);if("{"==a)return j(c)&&i(c,b,C?"block":"top");if("interpolation"==a)return i(c,b,"interpolation");if("word"==a){var d=b.current().toLowerCase();p="only"==d||"not"==d||"and"==d||"or"==d?"keyword":t.hasOwnProperty(d)?"attribute":u.hasOwnProperty(d)?"property":v.hasOwnProperty(d)?"keyword":w.hasOwnProperty(d)?"property":x.hasOwnProperty(d)?"string-2":B.hasOwnProperty(d)?"atom":A.hasOwnProperty(d)?"keyword":"error"}return c.context.type},F.atComponentBlock=function(a,b,c){return"}"==a?l(a,b,c):"{"==a?j(c)&&i(c,b,C?"block":"top",!1):("word"==a&&(p="error"),c.context.type)},F.atBlock_parens=function(a,b,c){return")"==a?j(c):"{"==a||"}"==a?l(a,b,c,2):F.atBlock(a,b,c)},F.restricted_atBlock_before=function(a,b,c){return"{"==a?i(c,b,"restricted_atBlock"):"word"==a&&"@counter-style"==c.stateArg?(p="variable","restricted_atBlock_before"):k(a,b,c)},F.restricted_atBlock=function(a,b,c){return"}"==a?(c.stateArg=null,j(c)):"word"==a?(p="@font-face"==c.stateArg&&!y.hasOwnProperty(b.current().toLowerCase())||"@counter-style"==c.stateArg&&!z.hasOwnProperty(b.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},F.keyframes=function(a,b,c){return"word"==a?(p="variable","keyframes"):"{"==a?i(c,b,"top"):k(a,b,c)},F.at=function(a,b,c){return";"==a?j(c):"{"==a||"}"==a?l(a,b,c):("word"==a?p="tag":"hash"==a&&(p="builtin"),"at")},F.interpolation=function(a,b,c){return"}"==a?j(c):"{"==a||";"==a?l(a,b,c):("word"==a?p="variable":"variable"!=a&&"("!=a&&")"!=a&&(p="error"),"interpolation")},{startState:function(a){return{tokenize:null,state:n?"block":"top",stateArg:null,context:new h(n?"block":"top",a||0,null)}},token:function(a,b){if(!b.tokenize&&a.eatSpace())return null;var c=(b.tokenize||e)(a,b);return c&&"object"==typeof c&&(o=c[1],c=c[0]),p=c,"comment"!=o&&(b.state=F[b.state](o,a,b)),p},indent:function(a,b){var c=a.context,d=b&&b.charAt(0),e=c.indent;return"prop"!=c.type||"}"!=d&&")"!=d||(c=c.prev),c.prev&&("}"!=d||"block"!=c.type&&"top"!=c.type&&"interpolation"!=c.type&&"restricted_atBlock"!=c.type?(")"==d&&("parens"==c.type||"atBlock_parens"==c.type)||"{"==d&&("at"==c.type||"atBlock"==c.type))&&(e=Math.max(0,c.indent-q)):(c=c.prev,e=c.indent)),e},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:D,fold:"brace"}});var d=["domain","regexp","url","url-prefix"],e=b(d),f=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],g=b(f),h=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],i=b(h),j=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],k=b(j),l=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-blend-mode","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","caret-color","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-rows","grid-column","grid-column-end","grid-column-gap","grid-column-start","grid-gap","grid-row","grid-row-end","grid-row-gap","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","justify-items","justify-self","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","place-content","place-items","place-self","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","user-select","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","will-change","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],m=b(l),n=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],o=b(n),p=["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"],q=b(p),r=["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"],s=b(r),t=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],u=b(t),v=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","devanagari","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","grid","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hard-light","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","luminosity","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","multiply","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","opacity","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unset","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],w=b(v),x=d.concat(f).concat(h).concat(j).concat(l).concat(n).concat(t).concat(v);
a.registerHelper("hintWords","css",x),a.defineMIME("text/css",{documentTypes:e,mediaTypes:g,mediaFeatures:i,mediaValueKeywords:k,propertyKeywords:m,nonStandardPropertyKeywords:o,fontProperties:q,counterDescriptors:s,colorKeywords:u,valueKeywords:w,tokenHooks:{"/":function(a,b){return a.eat("*")?(b.tokenize=c,c(a,b)):!1}},name:"css"}),a.defineMIME("text/x-scss",{mediaTypes:g,mediaFeatures:i,mediaValueKeywords:k,propertyKeywords:m,nonStandardPropertyKeywords:o,colorKeywords:u,valueKeywords:w,fontProperties:q,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(a,b){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(b.tokenize=c,c(a,b)):["operator","operator"]},":":function(a){return a.match(/\s*\{/,!1)?[null,null]:!1},$:function(a){return a.match(/^[\w-]+/),a.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(a){return a.eat("{")?[null,"interpolation"]:!1}},name:"css",helperType:"scss"}),a.defineMIME("text/x-less",{mediaTypes:g,mediaFeatures:i,mediaValueKeywords:k,propertyKeywords:m,nonStandardPropertyKeywords:o,colorKeywords:u,valueKeywords:w,fontProperties:q,allowNested:!0,lineComment:"//",tokenHooks:{"/":function(a,b){return a.eat("/")?(a.skipToEnd(),["comment","comment"]):a.eat("*")?(b.tokenize=c,c(a,b)):["operator","operator"]},"@":function(a){return a.eat("{")?[null,"interpolation"]:a.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)?!1:(a.eatWhile(/[\w\\\-]/),a.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),a.defineMIME("text/x-gss",{documentTypes:e,mediaTypes:g,mediaFeatures:i,propertyKeywords:m,nonStandardPropertyKeywords:o,fontProperties:q,counterDescriptors:s,colorKeywords:u,valueKeywords:w,supportsAtComponent:!0,tokenHooks:{"/":function(a,b){return a.eat("*")?(b.tokenize=c,c(a,b)):!1}},name:"css",helperType:"gss"})}),function(a){a(CodeMirror)}(function(a){"use strict";function b(a,b,c){var d=a.current(),e=d.search(b);return e>-1?a.backUp(d.length-e):d.match(/<\/?$/)&&(a.backUp(d.length),a.match(b,!1)||a.match(d)),c}function c(a){var b=i[a];return b?b:i[a]=new RegExp("\\s+"+a+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*")}function d(a,b){var d=a.match(c(b));return d?/^\s*(.*?)\s*$/.exec(d[2])[1]:""}function e(a,b){return new RegExp((b?"^":"")+"</s*"+a+"s*>","i")}function f(a,b){for(var c in a)for(var d=b[c]||(b[c]=[]),e=a[c],f=e.length-1;f>=0;f--)d.unshift(e[f])}function g(a,b){for(var c=0;c<a.length;c++){var e=a[c];if(!e[0]||e[1].test(d(b,e[0])))return e[2]}}var h={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]},i={};a.defineMode("htmlmixed",function(c,d){function i(d,f){var h,l=j.token(d,f.htmlState),m=/\btag\b/.test(l);if(m&&!/[<>\s\/]/.test(d.current())&&(h=f.htmlState.tagName&&f.htmlState.tagName.toLowerCase())&&k.hasOwnProperty(h))f.inTag=h+" ";else if(f.inTag&&m&&/>$/.test(d.current())){var n=/^([\S]+) (.*)/.exec(f.inTag);f.inTag=null;var o=">"==d.current()&&g(k[n[1]],n[2]),p=a.getMode(c,o),q=e(n[1],!0),r=e(n[1],!1);f.token=function(a,c){return a.match(q,!1)?(c.token=i,c.localState=c.localMode=null,null):b(a,r,c.localMode.token(a,c.localState))},f.localMode=p,f.localState=a.startState(p,j.indent(f.htmlState,""))}else f.inTag&&(f.inTag+=d.current(),d.eol()&&(f.inTag+=" "));return l}var j=a.getMode(c,{name:"xml",htmlMode:!0,multilineTagIndentFactor:d.multilineTagIndentFactor,multilineTagIndentPastTag:d.multilineTagIndentPastTag}),k={},l=d&&d.tags,m=d&&d.scriptTypes;if(f(h,k),l&&f(l,k),m)for(var n=m.length-1;n>=0;n--)k.script.unshift(["type",m[n].matches,m[n].mode]);return{startState:function(){var b=a.startState(j);return{token:i,inTag:null,localMode:null,localState:null,htmlState:b}},copyState:function(b){var c;return b.localState&&(c=a.copyState(b.localMode,b.localState)),{token:b.token,inTag:b.inTag,localMode:b.localMode,localState:c,htmlState:a.copyState(j,b.htmlState)}},token:function(a,b){return b.token(a,b)},indent:function(b,c,d){return!b.localMode||/^\s*<\//.test(c)?j.indent(b.htmlState,c):b.localMode.indent?b.localMode.indent(b.localState,c,d):a.Pass},innerMode:function(a){return{state:a.localState||a.htmlState,mode:a.localMode||j}}}},"xml","javascript","css"),a.defineMIME("text/html","htmlmixed")}),utils=function(){"use strict";var a="state_start",b="state_resume",c="state_preview",d="state_splash",e=20,f=function(a,b,c){var d=0;if(void 0!==b&&null!==b){var f=b.RESIZE_MODE;if(void 0!==f&&null!==f&&"manual"===f.toLowerCase()){var g,h=parseInt(b.RESIZE_HEIGHT,10);void 0!==c&&(g=parseInt(c.RESIZE_HEIGHT,10)),void 0===g||null===g||""===g||isNaN(g)?void 0===h||null===h||""===h||isNaN(h)||(d=h):d=g}}var i=jQuery(a.iframeId),j=i.parent();j.css("height",j.height()),i.css("height","");var k=i.get(0).contentWindow.document.body,l=i.get(0).contentWindow.document.documentElement;if(0===d&&(d=Math.max(k.scrollHeight,k.offsetHeight,l.clientHeight,l.scrollHeight,l.offsetHeight)),d+=e,i.css("height",d+"px"),j.css("height",""),void 0!==a.doAfterDimensionChange&&jQuery.isFunction(a.doAfterDimensionChange)){var m={};m.CURRENT_HEIGHT=d,m.MIN_HEIGHT=$(a.iframeId).contents().find("body").height();var n=void 0;void 0!==c&&(n=c.id),a.doAfterDimensionChange(m,n)}},g=function(){return{LAUNCH_MODE_STATE_START:a,LAUNCH_MODE_STATE_RESUME:b,LAUNCH_MODE_STATE_PREVIEW:c,LAUNCH_MODE_STATE_SPLASH:d}};return{getActivityLaunchMode:g,autoResizeActivityIframe:f}}();var AdapterGenerator=function(){"use strict";function a(a){var c=this;this.id=a,this.shell=void 0,this.activityEngineConfig,this.renderOverridesHandler,this.eventObj={fired:!1},this.platformStatus={code:b,message:"Success"},this.adapterConfig={loaderId:"#loader",iframeContainerId:"#iframeContainer",iframeId:"#activity_container",autoResize:!0,loadedResources:[],loadedJS:[],loadedCSS:[],doAfterInitializationCompleted:function(){},autoResizeActivityIframe:"",doAfterSavePartialResult:function(){},doAfterSaveResult:function(){},doAfterSkipQuestion:function(){},itemChangedInEditor:function(){},doAfterItemSavedInEditor:function(){}},this.platformAdapter={engineType:h.engineType,engine:h.engine,content:h.content,externalPath:h.externalPath,videoRoot:h.videoRoot,displaySubmit:h.displaySubmit,productAssetsBasePath:h.productAssetsBasePath,mediaManager:h.mediaManager,showAnswers:h.showAnswers,variation:h.variation,activityName:h.activityName,splashScreen:h.splashScreen,RESIZE_MODE:h.RESIZE_MODE,RESIZE_HEIGHT:h.RESIZE_HEIGHT,MIN_HEIGHT_THRESHOLD:h.MIN_HEIGHT_THRESHOLD,renderOverrides:h.renderOverrides,mode:h.mode,currentAttempt:h.currentAttempt,maxAttempts:h.maxAttempts,lastResults:h.lastResults,getParameterMap:function(){return{engineType:this.engineType,engine:this.engine,content:this.content,externalPath:this.externalPath,videoRoot:this.videoRoot,variation:this.variation,displaySubmit:this.displaySubmit,productAssetsBasePath:this.productAssetsBasePath,mediaManager:this.mediaManager,showAnswers:this.showAnswers,activityName:this.activityName,splashScreen:this.splashScreen,renderOverrides:this.renderOverrides,mode:this.mode,currentAttempt:this.currentAttempt,maxAttempts:this.maxAttempts}},getId:function(){return c.id},setShellObject:function(a){c.shell=a},showLoadingSpinner:function(){jQuery(c.adapterConfig.loaderId).removeClass("hidden")},hideLoadingSpinner:function(){jQuery(c.adapterConfig.loaderId).addClass("hidden")},initializationCompleted:function(a,b){c.activityEngineConfig=a,void 0!==b&&(c.renderOverridesHandler=b.renderOverridesHandler),c.adapterConfig.doAfterInitializationCompleted(a,c.id),jQuery(c.adapterConfig.iframeContainerId).removeClass("invisible"),jQuery(c.adapterConfig.loaderId).addClass("hidden"),this.autoResizeActivityIframe(a)},autoResizeActivityIframe:function(){this.adapterConfig.autoResize&&(jQuery.isFunction(this.adapterConfig.autoResizeActivityIframe)?this.adapterConfig.autoResizeActivityIframe(this.adapterConfig.iframeId,this.activityEngineConfig,this):utils.autoResizeActivityIframe(this.adapterConfig,this.activityEngineConfig,this))}.bind(this),getLastResults:function(a){a&&a(g,"NO_ERROR")},submitResults:function(a,b,d){c.adapterConfig.doAfterSaveResult(b,a),d&&d(g,"NO_ERROR")},savePartialResults:function(a,b,d){c.adapterConfig.doAfterSavePartialResult(b,a),d&&d(g,"NO_ERROR")},sendStatement:function(a,b){c.adapterConfig.sendStatement(a,b)},submitSkipQuestion:function(a,b){c.adapterConfig.doAfterSkipQuestion(b,a)},submitEditChanges:function(a,b,d){c.adapterConfig.doAfterItemSavedInEditor(b,a),d&&d()},itemChangedInEditor:function(a,b){c.adapterConfig.itemChangedInEditor(b,a)},closeActivity:function(a){a&&a(g,"NO_ERROR")},zoomImage:function(a){jQuery.fancybox({href:a},{type:"iframe"})},launchHTML:function(a){jQuery.fancybox({href:a},{type:"iframe"})},launchPDF:function(a){jQuery.fancybox({href:a},{type:"iframe",autoSize:!1,autoCenter:!0,iframe:{preload:!1}})},showOverlayDiv:function(){var a=jQuery("<div></div>");a.addClass("overlay"),jQuery(c.adapterConfig.iframeContainerId).append(a)},removeOverlayDiv:function(){var a=jQuery(c.adapterConfig.iframeContainerId+" .overlay");a.remove()},getResource:function(a,b,d){return void 0!==c.adapterConfig.loadedResources[a]?void d(c.adapterConfig.loadedResources[a],"NO_ERROR"):void jQuery.ajax({url:a,dataType:b}).done(function(b){c.adapterConfig.loadedResources[a]=b,d(b,"NO_ERROR")}).fail(function(b){console.error("AJAX to get resource failed with path:"+a+",status:"+b.status+", with Status Text:"+b.statusText),d(b,"ERROR")})},loadJS:function(a,b){return c.adapterConfig.loadedJS[a]===!0?void b():void utils.loadJS(a,function(){c.adapterConfig.loadedJS[a]=!0,b()})},loadCSS:function(a,b){return c.adapterConfig.loadedCSS[a]===!0?void b():void utils.loadCSS(a,function(){c.adapterConfig.loadedCSS[a]=!0,b()})},getModel:function(a,b){b&&b(g,"NO_ERROR")},updateModel:function(a,b,c){c&&c(g,"NO_ERROR")}},jQuery(window).bind("resize",function(){if(jQuery(c.adapterConfig.iframeId).length>0){var a=jQuery(window).width(),b=jQuery(window).height();(e!=a||f!=b)&&c.platformAdapter.autoResizeActivityIframe(),e=a,f=b}})}var b="PLATFORM_OK",c="PLATFORM_FAIL",d=utils.getActivityLaunchMode(),e=jQuery(window).width(),f=jQuery(window).height(),g={readyState:4,status:200,statusText:"No interaction with LMS",responseText:"<html><head><title>Success</title><body><p>No interaction with LMS.</p></body></html>"},h={engineType:"",engine:"",content:"",externalPath:"",videoRoot:"",displaySubmit:!0,productAssetsBasePath:"",mediaManager:{},showAnswers:!0,variation:"",activityName:"Default Activity Name",currentAttempt:0,maxAttempts:0,splashScreen:"",RESIZE_MODE:"auto",RESIZE_HEIGHT:0,MIN_HEIGHT_THRESHOLD:0,renderOverrides:{},mode:{activityState:d.LAUNCH_MODE_STATE_START},lastResults:""};return a.prototype={getActivityAdapter:function(a){return jQuery.extend(this.adapterConfig,a),this},setRenderOverrides:function(a){this.platformAdapter.renderOverrides=a,$.isFunction(this.renderOverridesHandler)&&this.renderOverridesHandler()},clearCachedResources:function(){this.adapterConfig.loadedJS=[],this.adapterConfig.loadedCSS=[]},getActivityHtmlElements:function(){return{loaderId:this.adapterConfig.loaderId,iframeContainerId:this.adapterConfig.iframeContainerId,iframeId:this.adapterConfig.iframeId}},populateAdapterParameters:function(a){var b="success";return this.platformAdapter.engineType=a.engineType,this.platformAdapter.engine=a.engine,this.platformAdapter.activityName=a.activityname,this.platformAdapter.productAssetsBasePath=a.productAssetsBasePath,this.platformAdapter.mediaManager=a.mediaManager,this.platformAdapter.content=a.content?a.content:"",this.platformAdapter.externalPath=a.externalPath?a.externalPath:"",this.platformAdapter.videoRoot=a.videoRoot?a.videoRoot:"",this.platformAdapter.displaySubmit=void 0!==a.displaySubmit?a.displaySubmit:!0,this.platformAdapter.showAnswers=void 0!==a.showAnswers?a.showAnswers:!0,this.platformAdapter.RESIZE_MODE=a.RESIZE_MODE,this.platformAdapter.RESIZE_HEIGHT=a.RESIZE_HEIGHT,this.platformAdapter.MIN_HEIGHT_THRESHOLD=a.MIN_HEIGHT_THRESHOLD,this.platformAdapter.renderOverrides=a.renderOverrides,this.platformAdapter.variation=a.variation,this.platformAdapter.currentAttempt=a.currentAttempt,this.platformAdapter.maxAttempts=a.maxAttempts,void 0!==a.mode&&void 0!==a.mode.activityState&&(this.platformAdapter.mode.activityState=a.mode.activityState),this.platformAdapter.mode.activityState!==d.LAUNCH_MODE_STATE_PREVIEW&&(this.platformAdapter.splashScreen=a.splashScreen),b},resetAdapterToDefaultParams:function(){this.platformAdapter.engineType=h.engineType,this.platformAdapter.engine=h.engine,this.platformAdapter.content=h.content,this.platformAdapter.externalPath=h.externalPath,this.platformAdapter.videoRoot=h.videoRoot,this.platformAdapter.variation=h.variation,this.platformAdapter.displaySubmit=h.displaySubmit,this.platformAdapter.productAssetsBasePath=h.productAssetsBasePath,this.platformAdapter.mediaManager=h.mediaManager,this.platformAdapter.showAnswers=h.showAnswers,this.platformAdapter.activityName=h.activityName,this.platformAdapter.splashScreen=h.splashScreen,this.platformAdapter.RESIZE_MODE=h.RESIZE_MODE,this.platformAdapter.RESIZE_HEIGHT=h.RESIZE_HEIGHT,this.platformAdapter.MIN_HEIGHT_THRESHOLD=h.MIN_HEIGHT_THRESHOLD,this.platformAdapter.renderOverrides=h.renderOverrides,this.platformAdapter.mode=h.mode,this.platformAdapter.currentAttempt=h.currentAttempt,this.platformAdapter.maxAttempts=h.maxAttempts,this.platformAdapter.lastResults=h.lastResults,this.activityEngineConfig=null,this.renderOverridesHandler=null},launch:function(a,b){this.resetAdapterToDefaultParams();var d="",e=this.getActivityHtmlElements(),f=e.iframeId,g=e.loaderId,h=e.iframeContainerId,i=a.html;(void 0===f||""===f||0!==f.indexOf("#"))&&(d+="Incorrect value supplied for iframe. Value supplied is "+f+"."),(void 0===g||""===g||0!==g.indexOf("#"))&&(d+=" Incorrect value supplied for loader. Value supplied is "+g+"."),(void 0===h||""===h||0!==h.indexOf("#"))&&(d+=" Incorrect value supplied for iframe container. Value supplied is "+h+"."),(void 0===i||""===i)&&(d+=" Incorrect value supplied for iframe html."),jQuery(h).html("");var j=document.createElement("iframe");j.id=f.split("#")[1],jQuery(j).attr("frameborder","0"),jQuery(j).css("width","100%"),jQuery(h).addClass("invisible"),jQuery(h).append(j);var k=j.document;j.contentDocument?k=j.contentDocument:j.contentWindow&&(k=j.contentWindow.document),k&&(k.open(),k.writeln(i),k.close()),jQuery(g).removeClass("hidden"),jQuery(g).css("position","fixed"),jQuery(g).css("top","55%"),jQuery(g).css("left","48%"),void 0===a.productAssetsBasePath&&(a.productAssetsBasePath="");var l=this.populateAdapterParameters(a);"failure"===l&&(d+=" Incorrect value supplied for mandatory adapter parameters."),""!==d&&(this.platformStatus.code=c,this.platformStatus.message=d),this.eventObj.fired=!0,jQuery(this.eventObj).triggerHandler("readyEvent")},launchNewItem:function(a){var b=this.getActivityHtmlElements(),c=b.loaderId;jQuery(c).removeClass("hidden"),jQuery(c).css("position","fixed"),jQuery(c).css("top","55%"),jQuery(c).css("left","48%"),void 0===a.productAssetsBasePath&&(a.productAssetsBasePath=""),this.populateAdapterParameters(a),this.shell.initializeEngine(this.platformAdapter)}},a}();!function(){return adaptormap={},renderActivityMap={},TestRunner=function(){"use strict";var a,b="",c={},d="../",e=!1,f="",g="SMARTADMIN",h="COSMATT_PROFILE1",i="COSMATT_PROFILE2",j="external",k={FIB:{CHART:{engine:"chart",variation:"CHART"},DND_FIB:{engine:"dnd",variation:"DND_FIB"},DND_MATCH:{engine:"dnd",variation:"DND_MATCH"},DND_TABLE:{engine:"dnd",variation:"DND_TABLE"},DND_VIDEO:{engine:"dnd",variation:"DND_VIDEO"}}},l=function(a,e,g,h,i,j,k,l){e&&e.productAssets&&(b=e.productAssets),l&&(c=l),d=e&&e.dependencyBase&&""!==e.dependencyBase?e.dependencyBase+"libs-frontend-testrunner/":e.dependencyBase+"../",f=i,j=j?"#"+j:void 0;var m="#"+g;renderActivityMap[a]={renderOverrides:h,secretKey:k,containerID:m,runtimeProfile:""};var n=new AdapterGenerator(a),o=n.getActivityAdapter({iframeContainerId:m,iframeId:"#iframe_"+a,loaderId:j,autoResize:h.autoResize,renderOverrides:h,doAfterSaveResult:z,doAfterSavePartialResult:y,doAfterInitializationCompleted:C,doAfterDimensionChange:D,doAfterSkipQuestion:B,itemChangedInEditor:E,doAfterItemSavedInEditor:F,sendStatement:A});adaptormap[a]=o,f.initializationCompleted()},m=function(f,l,m,o,p,q){if("MODE_EDITOR"===o){if(!m.supportsEditor)return a||($(renderActivityMap[f].containerID).html('<section class="widget"><textarea id="json-textarea"></textarea></section>'),a=CodeMirror.fromTextArea(document.getElementById("json-textarea"),{lineNumbers:!0,theme:"twilight",scrollbarStyle:"native",mode:{name:"javascript",json:!0}})),a.setValue(JSON.stringify(l.content,null,4)),n(f),void(q&&q());l.engine+="-EDITOR",l.variation+="_EDITOR"}if(l.content){var r=l.content.feedback,s=l.content.responses;if($.isEmptyObject(s))return;var t;$.isEmptyObject(r)||(t=JSON.parse(JSON.stringify(r)));var u=JSON.parse(JSON.stringify(s));if(!$.isEmptyObject(r)&&"object"!=typeof t||"object"!=typeof u){var v=renderActivityMap[f].secretKey;if(!v||$.isEmptyObject(v))return;if("object"!=typeof t)try{r=JSON.parse(r);var w=forge.aes.createDecryptionCipher(v),x="comprodls1234";w.start(x),r.__proto__=Object.getPrototypeOf(w.output),w.update(r),w.finish();var y=w.output.data;if(y=forge.util.decodeUtf8(y),y=JSON.parse(y),"object"!=typeof y)return;l.content.feedback=y}catch(z){return console.error("Secret Key: "+v),console.error("Question Feedback: "+r.toString()),void console.error(z.message)}if("object"!=typeof u)try{s=JSON.parse(s);var w=forge.aes.createDecryptionCipher(v),x="comprodls1234";w.start(x),s.__proto__=Object.getPrototypeOf(w.output),w.update(s),w.finish();var A=w.output.data;if(A=forge.util.decodeUtf8(A),A=JSON.parse(A),"object"!=typeof A)return;l.content.responses=A}catch(z){return console.error("Secret Key: "+v),console.error("Question Response: "+s.toString()),void console.error(z.message)}}}if(renderActivityMap[f].renderOverrides.displaySubmit&&(e=renderActivityMap[f].renderOverrides.displaySubmit),"OPEN"===l.engine&&(e=!0),l.displaySubmit=e,m&&m.type===j){l.engine=l.engine.toLowerCase(),l.engineType=m.engineType;var B=m.externalPath;if(B){if("https:"===location.protocol&&"https:"!==B.substr(0,B.indexOf("//")))return;B.includes("github.com")&&(B=B.replace("github.com","rawgit.com")),"/"!==B.charAt(B.length-1)&&(B=B.concat("/")),l.externalPath=B}}else k[l.engine]&&k[l.engine][l.variation]?l.engine=k[l.engine][l.variation].engine+"-min-1.8.5":(l.engine=l.engine.toLowerCase(),l.engine=l.engine+"-min-1.8.5");l.variation=l.variation.toUpperCase(),l.productAssetsBasePath=b,l.mediaManager=c,l.renderOverrides=renderActivityMap[f].renderOverrides;var C=adaptormap[f];0!==$(C.adapterConfig.iframeId).length&&C.shell&&p===renderActivityMap[f].runtimeProfile?C.launchNewItem(l):(p===g?l.html="<!DOCTYPE html><html lang='en' class='medium'><head><meta content='text/html; charset=UTF-8' http-equiv='Content-Type'><meta charset='utf-8'><title>Activity Content</title><link rel='stylesheet' href='"+d+"dist/css/libs-frontend-core-min-0.6.4.css'><style type='text/css'>body,html{background:none repeat scroll 0 0 #fff}html{font-size:14px}html.small{font-size:12px}html.medium{font-size:14px}html.large{font-size:16px}body{font-size:1em;font-family:Arial}html.open-sans-font,html.open-sans-font body{font-family:'Open Sans',Verdana}html.oswald-font,html.oswald-font body{font-family:Oswald,cursive}html.roboto-font,html.roboto-font body{font-family:Roboto,Arial,sans-serif}#placeholder{padding:0}.activity-body .btn{background-color:#637182;color:#fff;font-size:1em}.activity-body h2{font-size:1.6em;margin:7px 0}.activity-body h3{border-bottom:2px solid #CECECE}.activity-body hr{border-bottom:1px dashed #C2C2C2;margin:1.1em}.activity-body p.instructions{font-size:1.1em}.activity-body button i.fa{color:#000}.activity-body .smart-form p{color:#366894;font-size:1.286em}.activity-body .smart-form .instructions{color:#000;margin-top:7px}.activity-body .smart-form ol{width:100%}.activity-body .smart-form ol li{padding:.7em .4em .7em 1.8em}.activity-body .smart-form ul{width:100%}.activity-body .smart-form ul li{padding:.7em .4em .7em 1.8em}.activity-body .smart-form ul li.highlight{background-color:#F2F2F2;border-radius:6px}.activity-body .smart-form .label{font-size:1em;line-height:1.8em}.activity-body .smart-form .checkbox,.activity-body .smart-form .radio{font-size:1em;line-height:1.8em;color:#3D3D3D}.activity-body .smart-form .radio.state-error input:checked+i{border-color:#a90329}.activity-body .smart-form .radio.state-error input+i:after{background-color:#a90329}.activity-body .smart-form .radio.state-success input:checked+i{border-color:#7dc27d}.activity-body .smart-form .radio.state-success input+i:after{background-color:#7dc27d}.activity-body .smart-form .checkbox.state-error input:checked+i{border-color:#a90329}.activity-body .smart-form .checkbox.state-error input+i:after{color:#a90329}.activity-body .smart-form .checkbox.state-success input:checked+i{border-color:#7dc27d}.activity-body .smart-form .checkbox.state-success input+i:after{color:#7dc27d}.activity-body footer{margin-top:.5em}button .glyphicon{color:#000;line-height:2}.fixed-header{height:100%}.scroll-pane{overflow-y:auto;position:absolute;width:100%}.fixed-footer{bottom:0;position:absolute;width:100%}.style-yellow,.style-yellow .activity-body .smart-form .radio i,.style-yellow body{background:#f7f1cf}.small .activity-body .smart-form ul li{padding:.2em .2em .2em 1.8em}.large .radio-lg i,.medium .radio-lg i{height:1.8em;width:1.8em;top:-.1em}.large .radio-lg input+i:after,.medium .radio-lg input+i:after{height:1.2em;width:1.2em;top:.3em;left:.3em}.large .checkbox-lg i,.medium .checkbox-lg i{top:0;height:1.8em;width:1.8em}.large .checkbox-lg input+i::after,.medium .checkbox-lg input+i::after{font:1.6em/1.2em FontAwesome;left:.1em}.large .checkbox-lg input:checked:hover+i::after,.medium .checkbox-lg input:checked:hover+i::after{left:.15em}.large .radio-sm i,.medium .radio-sm i{height:1.4em;width:1.4em;top:.2em}.large .radio-sm input+i:after,.medium .radio-sm input+i:after{height:1em;left:.2em;top:.2em;width:1em}.ribbon-adjustments{margin:30px 30px 0}</style></head><body><div id='placeholder' class='placeholder ribbon-adjustments'></div><script src='"+d+"dist/js/require-min-1.9.8.js' type='text/javascript'></script><script type='text/javascript'>require.config({paths: {'vendor': '"+d+"dist/js/vendor-min-1.8.5','shell': '"+d+"dist/js/shell-min-1.8.6'},shim: {'shell': {deps: ['vendor']}}});require(['shell'], function(shellRef){var shell = new Shell('"+f+"');shell.init();});</script></body></html>":p===h?l.html="<!DOCTYPE html><html lang='en' class='medium'><head><meta content='text/html; charset=UTF-8' http-equiv='Content-Type'><meta charset='utf-8'><title>Activity Content</title><link rel='stylesheet' href='"+d+"dist/css/libs-frontend-core-min-0.6.4.css'><style type='text/css'>body,html{background:none repeat scroll 0 0 #fff}html{font-size:14px}html.small{font-size:12px}html.medium{font-size:14px}html.large{font-size:16px}body{font-size:1em;font-family:Arial}html.open-sans-font,html.open-sans-font body{font-family:'Open Sans',Verdana}html.oswald-font,html.oswald-font body{font-family:Oswald,cursive}html.roboto-font,html.roboto-font body{font-family:Roboto,Arial,sans-serif}#placeholder{padding:0}.activity-body .btn{background-color:#637182;color:#fff;font-size:1em}.activity-body h2{font-size:1.6em;margin:7px 0}.activity-body h3{border-bottom:2px solid #CECECE}.activity-body hr{border-bottom:1px dashed #C2C2C2;margin:1.1em}.activity-body p.instructions{font-size:1.1em}.activity-body button i.fa{color:#000}.activity-body .smart-form p{color:#366894;font-size:1.286em}.activity-body .smart-form .instructions{color:#000;margin-top:7px}.activity-body .smart-form ol{width:100%}.activity-body .smart-form ol li{padding:.7em .4em .7em 1.8em}.activity-body .smart-form ul{width:100%}.activity-body .smart-form ul li{padding:.7em .4em .7em 1.8em}.activity-body .smart-form ul li.highlight{background-color:#F2F2F2;border-radius:6px}.activity-body .smart-form .label{font-size:1em;line-height:1.8em}.activity-body .smart-form .checkbox,.activity-body .smart-form .radio{font-size:1em;line-height:1.8em;color:#3D3D3D}.activity-body .smart-form .radio.state-error input:checked+i{border-color:#a90329}.activity-body .smart-form .radio.state-error input+i:after{background-color:#a90329}.activity-body .smart-form .radio.state-success input:checked+i{border-color:#7dc27d}.activity-body .smart-form .radio.state-success input+i:after{background-color:#7dc27d}.activity-body .smart-form .checkbox.state-error input:checked+i{border-color:#a90329}.activity-body .smart-form .checkbox.state-error input+i:after{color:#a90329}.activity-body .smart-form .checkbox.state-success input:checked+i{border-color:#7dc27d}.activity-body .smart-form .checkbox.state-success input+i:after{color:#7dc27d}.activity-body footer{margin-top:.5em}button .glyphicon{color:#000;line-height:2}.fixed-header{height:100%}.scroll-pane{overflow-y:auto;position:absolute;width:100%}.fixed-footer{bottom:0;position:absolute;width:100%}.style-yellow,.style-yellow .activity-body .smart-form .radio i,.style-yellow body{background:#f7f1cf}.small .activity-body .smart-form ul li{padding:.2em .2em .2em 1.8em}.large .radio-lg i,.medium .radio-lg i{height:1.8em;width:1.8em;top:-.1em}.large .radio-lg input+i:after,.medium .radio-lg input+i:after{height:1.2em;width:1.2em;top:.3em;left:.3em}.large .checkbox-lg i,.medium .checkbox-lg i{top:0;height:1.8em;width:1.8em}.large .checkbox-lg input+i::after,.medium .checkbox-lg input+i::after{font:1.6em/1.2em FontAwesome;left:.1em}.large .checkbox-lg input:checked:hover+i::after,.medium .checkbox-lg input:checked:hover+i::after{left:.15em}.large .radio-sm i,.medium .radio-sm i{height:1.4em;width:1.4em;top:.2em}.large .radio-sm input+i:after,.medium .radio-sm input+i:after{height:1em;left:.2em;top:.2em;width:1em}.ribbon-adjustments{margin:30px 30px 0}</style><link rel='stylesheet' href='"+d+"dist/css/cosmatt-min.css'></head><body><div id='placeholder' class='placeholder ribbon-adjustments'></div><script src='"+d+"dist/js/require-min-1.9.8.js' type='text/javascript'></script><script type='text/javascript'>require.config({paths: {'vendor': '"+d+"dist/js/vendor-min-1.8.5','shell': '"+d+"dist/js/shell-min-1.8.6'},shim: {'shell': {deps: ['vendor']}}});require(['shell'], function(shellRef){var shell = new Shell('"+f+"');shell.init();});</script></body></html>":p===i?l.html="<!DOCTYPE html><html lang='en' class='medium'><head><meta content='text/html; charset=UTF-8' http-equiv='Content-Type'><meta charset='utf-8'><title>Activity Content</title><link rel='stylesheet' href='"+d+"dist/css/bootstrap.min.css'><link rel='stylesheet' href='"+d+"dist/css/font-awesome.min.css'><style type='text/css'>body,html{background:none repeat scroll 0 0 #fff}html{font-size:14px}html.small{font-size:12px}html.medium{font-size:14px}html.large{font-size:16px}body{font-size:1em;font-family:Arial}html.open-sans-font,html.open-sans-font body{font-family:'Open Sans',Verdana}html.oswald-font,html.oswald-font body{font-family:Oswald,cursive}html.roboto-font,html.roboto-font body{font-family:Roboto,Arial,sans-serif}#placeholder{padding:0}.activity-body .btn{background-color:#637182;color:#fff;font-size:1em}.activity-body h2{font-size:1.6em;margin:7px 0}.activity-body h3{border-bottom:2px solid #CECECE}.activity-body hr{border-bottom:1px dashed #C2C2C2;margin:1.1em}.activity-body p.instructions{font-size:1.1em}.activity-body button i.fa{color:#000}.activity-body .smart-form p{color:#366894;font-size:1.286em}.activity-body .smart-form .instructions{color:#000;margin-top:7px}.activity-body .smart-form ol{width:100%}.activity-body .smart-form ol li{padding:.7em .4em .7em 1.8em}.activity-body .smart-form ul{width:100%}.activity-body .smart-form ul li{padding:.7em .4em .7em 1.8em}.activity-body .smart-form ul li.highlight{background-color:#F2F2F2;border-radius:6px}.activity-body .smart-form .label{font-size:1em;line-height:1.8em}.activity-body .smart-form .checkbox,.activity-body .smart-form .radio{font-size:1em;line-height:1.8em;color:#3D3D3D}.activity-body .smart-form .radio.state-error input:checked+i{border-color:#a90329}.activity-body .smart-form .radio.state-error input+i:after{background-color:#a90329}.activity-body .smart-form .radio.state-success input:checked+i{border-color:#7dc27d}.activity-body .smart-form .radio.state-success input+i:after{background-color:#7dc27d}.activity-body .smart-form .checkbox.state-error input:checked+i{border-color:#a90329}.activity-body .smart-form .checkbox.state-error input+i:after{color:#a90329}.activity-body .smart-form .checkbox.state-success input:checked+i{border-color:#7dc27d}.activity-body .smart-form .checkbox.state-success input+i:after{color:#7dc27d}.activity-body footer{margin-top:.5em}button .glyphicon{color:#000;line-height:2}.fixed-header{height:100%}.scroll-pane{overflow-y:auto;position:absolute;width:100%}.fixed-footer{bottom:0;position:absolute;width:100%}.style-yellow,.style-yellow .activity-body .smart-form .radio i,.style-yellow body{background:#f7f1cf}.small .activity-body .smart-form ul li{padding:.2em .2em .2em 1.8em}.large .radio-lg i,.medium .radio-lg i{height:1.8em;width:1.8em;top:-.1em}.large .radio-lg input+i:after,.medium .radio-lg input+i:after{height:1.2em;width:1.2em;top:.3em;left:.3em}.large .checkbox-lg i,.medium .checkbox-lg i{top:0;height:1.8em;width:1.8em}.large .checkbox-lg input+i::after,.medium .checkbox-lg input+i::after{font:1.6em/1.2em FontAwesome;left:.1em}.large .checkbox-lg input:checked:hover+i::after,.medium .checkbox-lg input:checked:hover+i::after{left:.15em}.large .radio-sm i,.medium .radio-sm i{height:1.4em;width:1.4em;top:.2em}.large .radio-sm input+i:after,.medium .radio-sm input+i:after{height:1em;left:.2em;top:.2em;width:1em}.ribbon-adjustments{margin:30px 30px 0}</style><link rel='stylesheet' href='"+d+"dist/css/cosmatt-min.css'></head><body><div id='placeholder' class='placeholder ribbon-adjustments'></div><script src='"+d+"dist/js/require-min-1.9.8.js' type='text/javascript'></script><script type='text/javascript'>require.config({paths: {'vendor': '"+d+"dist/js/vendor-min-1.8.5','shell': '"+d+"dist/js/shell-min-1.8.6'},shim: {'shell': {deps: ['vendor']}}});require(['shell'], function(shellRef){var shell = new Shell('"+f+"');shell.init();});</script></body></html>":l.html="<!DOCTYPE html><html lang='en' class='medium'><head><meta content='text/html; charset=UTF-8' http-equiv='Content-Type'><meta charset='utf-8'><title>Activity Content</title><link rel='stylesheet' href='"+d+"dist/css/bootstrap.min.css'><link rel='stylesheet' href='"+d+"dist/css/font-awesome.min.css'><style type='text/css'>body,html{background:none repeat scroll 0 0 #fff}html{font-size:14px}html.small{font-size:12px}html.medium{font-size:14px}html.large{font-size:16px}body{font-size:1em;font-family:Arial}html.open-sans-font,html.open-sans-font body{font-family:'Open Sans',Verdana}html.oswald-font,html.oswald-font body{font-family:Oswald,cursive}html.roboto-font,html.roboto-font body{font-family:Roboto,Arial,sans-serif}#placeholder{padding:0}.activity-body .btn{background-color:#637182;color:#fff;font-size:1em}.activity-body h2{font-size:1.6em;margin:7px 0}.activity-body h3{border-bottom:2px solid #CECECE}.activity-body hr{border-bottom:1px dashed #C2C2C2;margin:1.1em}.activity-body p.instructions{font-size:1.1em}.activity-body button i.fa{color:#000}.activity-body .smart-form p{color:#366894;font-size:1.286em}.activity-body .smart-form .instructions{color:#000;margin-top:7px}.activity-body .smart-form ol{width:100%}.activity-body .smart-form ol li{padding:.7em .4em .7em 1.8em}.activity-body .smart-form ul{width:100%}.activity-body .smart-form ul li{padding:.7em .4em .7em 1.8em}.activity-body .smart-form ul li.highlight{background-color:#F2F2F2;border-radius:6px}.activity-body .smart-form .label{font-size:1em;line-height:1.8em}.activity-body .smart-form .checkbox,.activity-body .smart-form .radio{font-size:1em;line-height:1.8em;color:#3D3D3D}.activity-body .smart-form .radio.state-error input:checked+i{border-color:#a90329}.activity-body .smart-form .radio.state-error input+i:after{background-color:#a90329}.activity-body .smart-form .radio.state-success input:checked+i{border-color:#7dc27d}.activity-body .smart-form .radio.state-success input+i:after{background-color:#7dc27d}.activity-body .smart-form .checkbox.state-error input:checked+i{border-color:#a90329}.activity-body .smart-form .checkbox.state-error input+i:after{color:#a90329}.activity-body .smart-form .checkbox.state-success input:checked+i{border-color:#7dc27d}.activity-body .smart-form .checkbox.state-success input+i:after{color:#7dc27d}.activity-body footer{margin-top:.5em}button .glyphicon{color:#000;line-height:2}.fixed-header{height:100%}.scroll-pane{overflow-y:auto;position:absolute;width:100%}.fixed-footer{bottom:0;position:absolute;width:100%}.style-yellow,.style-yellow .activity-body .smart-form .radio i,.style-yellow body{background:#f7f1cf}.small .activity-body .smart-form ul li{padding:.2em .2em .2em 1.8em}.large .radio-lg i,.medium .radio-lg i{height:1.8em;width:1.8em;top:-.1em}.large .radio-lg input+i:after,.medium .radio-lg input+i:after{height:1.2em;width:1.2em;top:.3em;left:.3em}.large .checkbox-lg i,.medium .checkbox-lg i{top:0;height:1.8em;width:1.8em}.large .checkbox-lg input+i::after,.medium .checkbox-lg input+i::after{font:1.6em/1.2em FontAwesome;left:.1em}.large .checkbox-lg input:checked:hover+i::after,.medium .checkbox-lg input:checked:hover+i::after{left:.15em}.large .radio-sm i,.medium .radio-sm i{height:1.4em;width:1.4em;top:.2em}.large .radio-sm input+i:after,.medium .radio-sm input+i:after{height:1em;left:.2em;top:.2em;width:1em}.ribbon-adjustments{margin:30px 30px 0}</style></head><body><div id='placeholder' class='placeholder ribbon-adjustments'></div><script src='"+d+"dist/js/require-min-1.9.8.js' type='text/javascript'></script><script type='text/javascript'>require.config({paths: {'vendor': '"+d+"dist/js/vendor-min-1.8.5','shell': '"+d+"dist/js/shell-min-1.8.6'},shim: {'shell': {deps: ['vendor']}}});require(['shell'], function(shellRef){var shell = new Shell('"+f+"');shell.init();});</script></body></html>",
C.launch(l)),p&&(renderActivityMap[f].runtimeProfile=p),q&&q()},n=function(b){a.on("change",function(a,c){E(b,JSON.parse(a.getValue()))})},o=function(a,b){if(a){var c=adaptormap[a];c.setRenderOverrides(b)}else for(var d in adaptormap)if(adaptormap.hasOwnProperty(d)){var c=adaptormap[d];c.setRenderOverrides(b)}},p=function(a){var b=adaptormap[a];b.forceSubmit()},q=function(a){var b=adaptormap[a];b.shell.getActivityDelegate().skipQuestionActivity()},r=function(a){var b=adaptormap[a];b.shell.getActivityDelegate().submitActivity()},s=function(a){var b=adaptormap[a];b.shell.getActivityDelegate().showGrades()},t=function(a){var b=adaptormap[a];b.shell.getActivityDelegate().clearGrades()},u=function(a){var b=adaptormap[a];b.shell.getActivityDelegate().resetAnswers()},v=function(a,b){var c=adaptormap[a];c.shell.getActivityDelegate().displayInputArea(b)},w=function(a){var b=adaptormap[a];b.shell.getActivityDelegate().showFeedback()},x=function(a,b){var c=adaptormap[a];c.shell.getActivityDelegate().updateLastSavedResults(b)},y=function(a,b){f.afterPartialSave&&f.afterPartialSave(a,b)},z=function(a,b){f.afterCompleted&&f.afterCompleted(a,b)},A=function(a,b){f.sendStatement&&f.sendStatement(a,b)},B=function(a,b){f.doAfterSkipQuestion&&f.doAfterSkipQuestion(a,b)},C=function(a,b){f.afterLoaded&&f.afterLoaded(b)},D=function(a,b){f.afterDimensionChange&&f.afterDimensionChange(b,a)},E=function(a,b){f.itemChangedInEditor&&f.itemChangedInEditor(a,b)},F=function(a,b){f.doAfterItemSavedInEditor&&f.doAfterItemSavedInEditor(a,b)},G=function(a,b){var c=adaptormap[a];return c.shell.getActivityDelegate().getItemContent(b)},H=function(b,c){if(c){var d=adaptormap[b];d.shell.getActivityDelegate().saveItemInEditor()}else F(b,JSON.parse(a.getValue()))};return{init:l,adaptormap:adaptormap,paintQuestion:m,updateRenderPreferences:o,forceSubmit:p,skipQuestion:q,submitAnswer:r,showGrades:s,clearGrades:t,resetAnswers:u,updateLastSavedResults:x,displayInputArea:v,showFeedback:w,saveItemInEditor:H,getItemContent:G}},TestRunner}(),registerForReadyEvent=function(a,b){myeltadapter=adaptormap[b],myeltadapter.eventObj.fired===!0?MyActivityDelegate=a(myeltadapter.platformAdapter,myeltadapter.platformStatus):jQuery(myeltadapter.eventObj).bind("readyEvent",function(){MyActivityDelegate=a(myeltadapter.platformAdapter,myeltadapter.platformStatus)})};